!function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=57)}([function(e,r){e.exports=require("http-status-codes")},function(e,r,t){"use strict";t(60);var n=t(0),a=t.n(n),o=t(10);function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][AddressController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.building_resource_id_parameter,this.routeResources=Qe.building_routeResources,this.routeResource=Qe.building_routeResource,this.routeResourcePhotos=Qe.building_routeResourcePhotos,this.accessControlResource=Qe.building_accessControlResource,this.resourceName=Qe.building_resourceName}},{key:"configureRoutes",value:function(){}}])&&s(r.prototype,t),n&&s(r,n),e}();function c(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][BuildingController] initialised")}var r,t,n,a,o;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.building_resource_id_parameter,this.routeResources=Qe.building_routeResources,this.routeResource=Qe.building_routeResource,this.routeResourcePhotos=Qe.building_routeResourcePhotos,this.accessControlResource=Qe.building_accessControlResource,this.resourceName=Qe.building_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.routeResourcePhotos,this.handlePhotoGet.bind(this)),this.expressApp.post(this.routeResourcePhotos,this.handlePhotoUpdate.bind(this)),this.expressApp.delete(this.routeResourcePhotos,this.handlePhotoDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Building,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:(a=regeneratorRuntime.mark((function e(r,t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.routeResources,a=[{model:this.models.University},{model:this.models.Canteen},{model:this.models.Residence}],e.abrupt("return",this.myExpressRouter.defaultControllerHelper.handleIndex(r,t,this.models.Building,this.myAccessControl,this.accessControlResource,this.resourceName,a,n,null));case 3:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,r=arguments;return new Promise((function(t,n){var o=a.apply(e,r);function s(e){c(o,t,n,s,i,"next",e)}function i(e){c(o,t,n,s,i,"throw",e)}s(void 0)}))},function(e,r){return o.apply(this,arguments)})},{key:"handleCreate",value:function(e,r){var t=e.body.short||"NN",n=e.body.latitude||52.27352,a=e.body.longitude||8.044164,o=this.models.Building.build({short:t,latitude:n,longitude:a});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,o,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"helperGetResourceId",value:function(e){return e.locals[this.resourceName].id}},{key:"handlePhotoGet",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}},{key:"handlePhotoUpdate",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}},{key:"handlePhotoDelete",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}}])&&l(r.prototype,t),n&&l(r,n),e}();function p(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][CanteenController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.canteen_resource_id_parameter,this.routeResources=Qe.canteen_routeResources,this.routeResource=Qe.canteen_routeResource,this.accessControlResource=Qe.canteen_accessControlResource,this.resourceName=Qe.canteen_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(Qe.canteen_routeCanteenMealsAtDay,this.handleGetMealsAtDay.bind(this)),this.expressApp.get(Qe.canteen_routeCanteenPopularTimeAtDay,this.handleGetPopularTimeAtDay.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Canteen,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Canteen,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGetMealsAtDay",value:function(e,r){var t=this,n=e.locals.date,o=e.locals[this.resourceName],s=this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource),i=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.meal_accessControlResource);if(this.logger.info("["+this.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - check Permission for canteen: "+o.id+" at "+n),s.granted&&i.granted){this.logger.info("["+this.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - permission granted");var c=Qe.redisClient,l=e.locals.current_user.role,u=this.routeResources+"-"+o.id+"-"+n;return c.get(l+":"+u,(function(e,s){if(s){t.logger.info("["+t.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - cached data found");var i=JSON.parse(s);Qe.responseWithJSON(r,a.a.OK,i)}else t.logger.info("["+t.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - no cached data found"),t.models.CanteenMeal.findAll({include:[{model:t.models.Meal,include:[{model:t.models.RecipeGroup,include:[{model:t.models.RecipeType}]}]}],where:{CanteenId:o.id,date:n.toISOString()}}).then((function(e){var t=e.map((function(e){return e.get({plain:!0})}));c.setex(l+":"+u,60,JSON.stringify(t)),Qe.responseWithJSON(r,a.a.OK,t)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - CanteenMeal.findAll: "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}))}this.logger.info("["+this.myExpressRouter.workerID+"][CanteenController] handleGetMealsAtDay - permission not granted"),Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to read Canteen Meals"})}},{key:"handleGetPopularTimeAtDay",value:function(e,r){var t=this,n=e.locals[this.resourceName],o=e.locals.date;this.logger.info("["+this.myExpressRouter.workerID+"][CanteenController] handleGetPopularTimeAtDay - "+n.id+" at "+o),n.getBuilding().then((function(e){var s,i,c;null!=e?t.models.PopularTime.findAll({where:{BuildingId:e.id,date:o.toISOString()}}).then((function(e){if(0!==e.length){var t=e.map((function(e){return e.get({plain:!0})}));Qe.responseWithJSON(r,a.a.OK,t)}else{var n=o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate(),s=[{date:n,time:"08:00:00",traffic:23},{date:n,time:"09:00:00",traffic:25},{date:n,time:"10:00:00",traffic:60},{date:n,time:"11:00:00",traffic:170},{date:n,time:"12:00:00",traffic:180},{date:n,time:"13:00:00",traffic:100},{date:n,time:"14:00:00",traffic:120},{date:n,time:"15:00:00",traffic:40},{date:n,time:"16:00:00",traffic:20},{date:n,time:"17:00:00",traffic:25},{date:n,time:"18:00:00",traffic:10}];Qe.responseWithJSON(r,a.a.OK,s)}})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][CanteenController] handleGetPopularTimeAtDay - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):(t.logger.info("["+t.myExpressRouter.workerID+"][CanteenController] handleGetPopularTimeAtDay - building of canteen not found: canteen: "+n.id),Qe.responseWithJSON(r,a.a.NOT_FOUND,(s={error:"building of canteen not found"},i=t.resourceName+"_id",c=n.id,i in s?Object.defineProperty(s,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[i]=c,s)))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][CanteenController] handleGetPopularTimeAtDay - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}}])&&p(r.prototype,t),n&&p(r,n),e}(),m=t(2);function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][DeviceController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.device_resource_id_parameter,this.routeResources=Qe.device_routeResources,this.routeResource=Qe.device_routeResource,this.accessControlResource=Qe.device_accessControlResource,this.resourceName=Qe.device_resourceName,this.device_routeStreamViews=Qe.device_routeStreamViews}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.device_routeStreamViews,this.handleGetStreamViews.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){var o=this;this.models.Device.findOne({where:{id:n}}).then((function(s){null===s?(o.logger.info("["+o.myExpressRouter.workerID+"][DeviceController] paramcheckerResourceId - device_id "+n),Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"device_id not found",device_id:n})):(e.locals[o.resourceName]=s,s.getUser().then((function(r){if(e.locals.isOwnDevice=!1,null!==r){var n=e.locals.current_user.id,a=r.id;n&&a&&n===a&&(e.locals.isOwnDevice=!0)}t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][DeviceController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})))})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][DeviceController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Device,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=this,n=this,o=e.body.user_id;if(void 0===o)return this.logger.info("["+this.myExpressRouter.workerID+"][DeviceController] handleCreate - user_id is missing"),void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"user_id is missing"});this.models.User.findOne({where:{id:o}}).then((function(s){if(null===s)return t.logger.info("["+t.myExpressRouter.workerID+"][DeviceController] handleCreate - user_id "+o+" not found"),void Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id not found",user_id:o});var i=e.locals.current_user.id+""==o+"";e.locals.isOwnDevice=i;var c,l,u,p=t.models.Device.build({}),d=t.myAccessControl.can(e.locals.current_user.role).createAny(t.accessControlResource);i&&(d=t.myAccessControl.can(e.locals.current_user.role).createOwn(t.accessControlResource)),d.granted?(p.setUser(s,{save:!1}),p.save().then((function(t){e.locals[n.resourceName]=t,n.handleGet(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][DeviceController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.FORBIDDEN,(c={errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource"},l=t.resourceName+"_id",u=p.id,l in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][DeviceController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnDevice)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnDevice)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnDevice)}},{key:"handleGetStreamViews",value:function(e,r){var t=this,n=e.locals.isOwnDevice,o=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.streamview_accessControlResource);n&&(o=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.streamview_accessControlResource)),o.granted?e.locals[this.resourceName].getStreamViews().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,o)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][DeviceController] handleGetStreamViews - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Devices: "+Qe.streamview_accessControlResource})}}])&&h(r.prototype,t),n&&h(r,n),e}();function v(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.routeResources=Qe.friend_routeResources,this.accessControlResource=Qe.friend_accessControlResource,this.resourceName=Qe.friend_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.get(this.routeResources,this.handleIndex.bind(this))}},{key:"handleIndex",value:function(e,r){var t=this.routeResources;this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.sequelize.models.UserFriends,this.myAccessControl,this.accessControlResource,this.resourceName,[],t)}}])&&v(r.prototype,t),n&&v(r,n),e}();function x(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][GrantListController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.building_resource_id_parameter,this.routeResources=Qe.building_routeResources,this.routeResource=Qe.building_routeResource,this.routeResourcePhotos=Qe.building_routeResourcePhotos,this.accessControlResource=Qe.building_accessControlResource,this.resourceName=Qe.building_resourceName}},{key:"configureRoutes",value:function(){}}])&&x(r.prototype,t),n&&x(r,n),e}();function y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=t(63),w=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n;return r=e,n=[{key:"genSalt",value:function(){return R.genSaltSync(10)}},{key:"hashSecret",value:function(e,r){return R.hashSync(e,r)}},{key:"compare",value:function(e,r){return R.compareSync(e,r)}}],(t=null)&&y(r.prototype,t),n&&y(r,n),e}();function _(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][LoginController] initialised")}var r,t,n;return r=e,n=[{key:"correctPlaintextSecretForUser",value:function(e,r){var t=e.hashedSecretKey;return w.compare(r,t)}}],(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.login_resource_id_parameter,this.routeResources=Qe.login_routeResources,this.routeResource=Qe.login_routeResource,this.accessControlResource=Qe.login_accessControlResource,this.resourceName=Qe.login_resourceName}},{key:"configureRoutes",value:function(){}}])&&_(r.prototype,t),n&&_(r,n),e}();function C(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var N=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][MarkingController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.marking_resource_id_parameter,this.routeResources=Qe.marking_routeResources,this.routeResource=Qe.marking_routeResource,this.accessControlResource=Qe.marking_accessControlResource,this.resourceName=Qe.marking_resourceName,this.marking_routeAssociationUsers=Qe.marking_routeAssociationUsers}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.marking_routeAssociationUsers,this.handleGetMarkingUsers.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Marking,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Marking,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=e.body.label||"Label",n=e.body.description||"Description",a=e.body.classification||"Classification",o=this.models.Marking.build({label:t,description:n,classification:a});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,o,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGetMarkingUsers",value:function(e,r){var t=this;this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.markingUsers_accessControlResource).granted?e.locals[this.resourceName].getUsers().then((function(e){var t=e.map((function(e){return{id:e.get({plain:!0}).id}}));Qe.responseWithJSON(r,a.a.OK,t)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MarkingController] handleGetMarkingUsers - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Markings",user_id:e.locals[this.resourceName].id})}}])&&C(r.prototype,t),n&&C(r,n),e}();function E(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.routeResources=Qe.tableUpdateTimes_routeResources,this.accessControlResource=Qe.tableUpdateTimes_accessControlResource,this.resourceName=Qe.tableUpdateTimes_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.get(this.routeResources,this.handleIndex.bind(this))}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.TableUpdateTimes,this.myAccessControl,this.accessControlResource,this.resourceName)}}])&&E(r.prototype,t),n&&E(r,n),e}();function O(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.meal_resource_id_parameter,this.routeResources=Qe.meal_routeResources,this.routeResource=Qe.meal_routeResource,this.routeResourcePhotos=Qe.meal_routeResourcePhotos,this.accessControlResource=Qe.meal_accessControlResource,this.resourceName=Qe.meal_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.routeResourcePhotos,this.handlePhotoGet.bind(this)),this.expressApp.post(this.routeResourcePhotos,this.handlePhotoUpdate.bind(this)),this.expressApp.delete(this.routeResourcePhotos,this.handlePhotoDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Meal,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){var t=this.routeResources;this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Meal,this.myAccessControl,this.accessControlResource,this.resourceName,[],t)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"helperGetResourceId",value:function(e){return e.locals[this.resourceName].id}},{key:"handlePhotoGet",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}},{key:"handlePhotoUpdate",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}},{key:"handlePhotoDelete",value:function(e,r){var t=this.helperGetResourceId(e);this.myExpressRouter.photoHelper.handlePhotoDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}}])&&O(r.prototype,t),n&&O(r,n),e}();function I(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.mealrating_resource_id_parameter,this.routeResources=Qe.mealrating_routeResources,this.routeResource=Qe.mealrating_routeResource,this.accessControlResource=Qe.mealrating_accessControlResource,this.resourceName=Qe.mealrating_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){var o=this;this.models.MealRating.findOne({where:{id:n}}).then((function(s){s?(e.locals[o.resourceName]=s,s.getUser().then((function(r){e.locals.isOwnMealRating=!1,r&&(e.locals.isOwnMealRating=e.locals.current_user.id===r.id),t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][MealRatingController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"mealrating_id not found",mealrating_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][MealRatingController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleIndex",value:function(e,r){var t=e.query.UserId,n=null;!!t&&""+t==""+e.locals.current_user.id&&!!e.locals.current_user.id&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(this.accessControlResource)),this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.MealRating,this.myAccessControl,this.accessControlResource,this.resourceName,[this.models.Meal],null,n)}},{key:"handleCreate",value:function(e,r){var t=this,n=this,o=e.body.UserId;this.models.User.findOne({where:{id:o}}).then((function(s){if(s){var i=e.body.MealId;t.models.Meal.findOne({where:{id:i}}).then((function(o){if(o){var c=e.body.CanteenId;t.models.Canteen.findOne({where:{id:c}}).then((function(i){if(i){var l=s.id===e.locals.current_user.id;e.locals.isOwnMealRating=l;var u=t.myAccessControl.can(e.locals.current_user.role).createAny(t.accessControlResource);if(l&&(u=t.myAccessControl.can(e.locals.current_user.role).createOwn(t.accessControlResource)),u.granted){var p=e.body.value;t.models.MealRating.findOne({where:{UserId:s.id,MealId:o.id,CanteenId:i.id}}).then((function(c){c?c.update({value:p}).then((function(t){e.locals[n.resourceName]=t,n.handleGet(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):(c=t.models.MealRating.build({UserId:s.id,MealId:o.id,CanteenId:i.id,value:p})).save().then((function(t){e.locals[n.resourceName]=t,n.handleGet(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Resource: "+t.accessControlResource})}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"CanteenId not found",CanteenId:c})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"MealId not found",MealId:i})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"UserId not found",UserId:o})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealRatingController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealRating)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealRating)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealRating)}}])&&I(r.prototype,t),n&&I(r,n),e}();function T(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.mealcomment_resource_id_parameter,this.routeResources=Qe.mealcomment_routeResources,this.routeResource=Qe.mealcomment_routeResource,this.accessControlResource=Qe.mealcomment_accessControlResource,this.resourceName=Qe.mealcomment_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){var o=this;this.models.MealComment.findOne({where:{id:n}}).then((function(s){s?(e.locals[o.resourceName]=s,s.getUser().then((function(r){e.locals.isOwnMealComment=!!r&&e.locals.current_user.id===r.id,t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][MealCommentController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"mealcomment_id not found",mealcomment_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][MealCommentController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleIndex",value:function(e,r){var t=e.query.UserId,n=null;!!t&&""+t==""+e.locals.current_user.id&&!!e.locals.current_user.id&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(this.accessControlResource)),this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.MealComment,this.myAccessControl,this.accessControlResource,this.resourceName,[this.models.Meal],null,n)}},{key:"handleCreate",value:function(e,r){var t=this,n=this,o=e.body.UserId;this.models.User.findOne({where:{id:o}}).then((function(o){if(o){var s=e.body.MealId;t.models.Meal.findOne({where:{id:s}}).then((function(i){if(i){var c=e.body.CanteenId;t.models.Canteen.findOne({where:{id:c}}).then((function(s){if(s){var l=o.id===e.locals.current_user.id;e.locals.isOwnMealComment=l;var u=t.myAccessControl.can(e.locals.current_user.role).createAny(t.accessControlResource);if(l&&(u=t.myAccessControl.can(e.locals.current_user.role).createOwn(t.accessControlResource)),u.granted){var p=e.body.text;t.models.MealComment.findOne({where:{UserId:o.id,MealId:i.id,CanteenId:s.id}}).then((function(c){c?c.update({text:p}).then((function(t){e.locals[n.resourceName]=t,n.handleGet(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):(c=t.models.MealComment.build({UserId:o.id,MealId:i.id,CanteenId:s.id,text:p})).save().then((function(t){e.locals[n.resourceName]=t,n.handleGet(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Resource: "+t.accessControlResource})}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"CanteenId not found",CanteenId:c})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"MealId not found",MealId:s})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"UserId not found",UserId:user_id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][MealCommentController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealComment)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealComment)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnMealComment)}}])&&T(r.prototype,t),n&&T(r,n),e}(),U=t(3);function M(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function P(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][MeetingController] initialised")}var r,t,n,o,s;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.meeting_resource_id_parameter,this.routeResources=Qe.meeting_routeResources,this.routeResource=Qe.meeting_routeResource,this.routeResourceFind=Qe.meeting_routeResourcFind,this.accessControlResource=Qe.meeting_accessControlResource,this.resourceName=Qe.meeting_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResourceFind,this.handleResourceFind.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Meeting,this.accessControlResource,this.resourceName)}},{key:"validateMeetingTime",value:function(e){if(e){var r=new Date,t=U.a.diff_seconds(e,r)/60;if(t>=-15&&t<=1440)return U.a.roundDownToNextMilliSeconds(e,9e5)}return!1}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Meeting,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleResourceFind",value:function(e,r){var t=this,n=this.resourceName,o=e.body.BuildingId,s={date:new Date(e.body.date),BuildingId:o};this.models.Meeting.findOne({where:s}).then((function(o){o?(e.locals[n]=o,t.handleGet(e,r)):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:n+" for given params not found",params:s})})).catch((function(e){console.log(e),t.logger.error("[MeetingConrtoller] handleFind: "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleCreate",value:(o=regeneratorRuntime.mark((function e(r,t){var n,o,s,i,c,l,u,p,d,m,h,f,v,g,x=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,o=this.accessControlResource,s=this.myAccessControl,i=this.resourceName,c=r.body.UserId,l=r.locals.current_user.id+""==c+"",u=s.can(r.locals.current_user.role).createAny(o),l&&(u=s.can(r.locals.current_user.role).createOwn(o)),!u.granted){e.next=30;break}if(p=new Date(r.body.date),d=r.body.BuildingId,m=r.body.UserId,!(h=this.validateMeetingTime(p))){e.next=27;break}return e.next=16,this.models.User.findOne({where:{id:m}});case 16:if(!(f=e.sent)){e.next=24;break}return e.next=20,this.models.Meeting.findOne({where:{date:h,BuildingId:d}});case 20:(v=e.sent)?v.addUser(f).then((function(e){n.handleGetWithResource(r,t,v),n.customUpdateResource(v)})).catch((function(e){x.logger.error("[MeetingConrtoller] handleCreate: "+e.toString),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):(g=this.models.Meeting.build({date:h,BuildingId:d})).save().then((function(e){g.addUser(f).then((function(e){n.handleGetWithResource(r,t,g),n.customUpdateResource(g)})).catch((function(e){console.log(e),x.logger.error("[MeetingConrtoller] handleCreate: "+e.toString),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){console.log(e),x.logger.error("[MeetingConrtoller] handleCreate: "+e.toString),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})),e.next=25;break;case 24:Qe.responseWithJSON(t,a.a.NOT_FOUND,{error:"user_id not found",user_id:user_id});case 25:e.next=28;break;case 27:Qe.responseWithJSON(t,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, date is invalid"});case 28:e.next=31;break;case 30:Qe.responseWithJSON(t,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Resource: "+i});case 31:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,r=arguments;return new Promise((function(t,n){var a=o.apply(e,r);function s(e){M(a,t,n,s,i,"next",e)}function i(e){M(a,t,n,s,i,"throw",e)}s(void 0)}))},function(e,r){return s.apply(this,arguments)})},{key:"parseUsersToJSONOfIDs",value:function(e){var r={};if(e)for(var t=0;t<e.length;t++)r[e[t].id]=!0;return r}},{key:"customUpdateResource",value:function(e){var r=this;e&&e.getUsers().then((function(t){var n={user_amount:t.length};e.update(n).then((function(e){})).catch((function(e){console.log(e),r.logger.error("[MeetingConrtoller] customUpdateResource at update: "+e.toString)}))})).catch((function(e){console.log(e),r.logger.error("[MeetingConrtoller] customUpdateResource at getUsers: "+e.toString)}))}},{key:"handleGet",value:function(e,r){this.handleGetWithResource(e,r,e.locals[this.resourceName])}},{key:"helperHandleGetWithPermissionReadAny",value:function(e,r,t,n,o){var s=m.a.filterResourceWithPermission(t,o),i=n;s.Users=i,Qe.responseWithJSON(r,a.a.OK,s)}},{key:"helperHandleGetWithPermissionReadOwn",value:function(e,r,t,n,o){var s=this,i=e.locals.current_user,c=this.myAccessControl.can(i.role).readOwn(Qe.friend_accessControlResource),l=i.id;this.models.User.findOne({where:{id:l}}).then((function(e){e?e.getFriends().then((function(e){for(var l=s.parseUsersToJSONOfIDs(n),u=m.a.filterResourcesWithPermission(e,c),p=[],d=0;d<u.length;d++){var h=u[d];l[h.id]&&p.push(h)}var f=m.a.filterResourceWithPermission(t,o);f.Friends=p,f.Current_User=l[i.id],Qe.responseWithJSON(r,a.a.OK,f)})).catch((function(e){console.log(e),s.logger.error("[MeetingConrtoller] handleGet: "+e.toString),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id not found",user_id:l})})).catch((function(e){console.log(e),s.logger.error("[MeetingConrtoller] handleGet: "+e.toString),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGetWithResource",value:function(e,r,t){var n=this,o=e.locals.current_user;if(o){var s=this.myAccessControl,i=this.accessControlResource,c=this.resourceName;t.getUsers().then((function(l){var u=s.can(o.role).readAny(i);if(u.granted)n.helperHandleGetWithPermissionReadAny(e,r,t,l,u);else{var p=s.can(o.role).readOwn(i);p.granted?n.helperHandleGetWithPermissionReadOwn(e,r,t,l,p):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource: "+c})}})).catch((function(e){console.log(e),n.logger.error("[MeetingConrtoller] handleGet: "+e.toString),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!1)}}])&&P(r.prototype,t),n&&P(r,n),e}();function W(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.news_resource_id_parameter,this.routeResources=Qe.news_routeResources,this.routeResource=Qe.news_routeResource,this.accessControlResource=Qe.news_accessControlResource,this.resourceName=Qe.news_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.News,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.News,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=e.body.title||"Title",n=e.body.abstract||"This is a abstract",a=e.body.date||new Date,o=this.models.News.build({title:t,abstract:n,date:a});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,o,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}}])&&W(r.prototype,t),n&&W(r,n),e}();function J(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var q=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][PermissionController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.routeResources=Qe.permission_routeResources,this.routeResourceOwn=Qe.permission_routeOwn,this.accessControlResource=Qe.permissions_accessControlResource,this.resourceName=Qe.permissions_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResourceOwn,this.handleGet.bind(this))}},{key:"addAttributesIfGranted",value:function(e,r,t,n,a){if(a.granted){var o=a.attributes,s=e[r]||{},i=s[t]||{};i[n]=o,s[t]=i,e[r]=s}return e}},{key:"getAllPermissionsForRole",value:function(e){for(var r={},t=this.myAccessControl.getResources(),n=0;n<t.length;n++){var a=t[n],o=this.myAccessControl.can(e).createAny(a);r=this.addAttributesIfGranted(r,e,a,"create:any",o);var s=this.myAccessControl.can(e).createOwn(a);r=this.addAttributesIfGranted(r,e,a,"create:own",s);var i=this.myAccessControl.can(e).readAny(a);r=this.addAttributesIfGranted(r,e,a,"read:any",i);var c=this.myAccessControl.can(e).readOwn(a);r=this.addAttributesIfGranted(r,e,a,"read:own",c);var l=this.myAccessControl.can(e).updateAny(a);r=this.addAttributesIfGranted(r,e,a,"update:any",l);var u=this.myAccessControl.can(e).updateOwn(a);r=this.addAttributesIfGranted(r,e,a,"update:own",u);var p=this.myAccessControl.can(e).deleteAny(a);r=this.addAttributesIfGranted(r,e,a,"delete:any",p);var d=this.myAccessControl.can(e).deleteOwn(a);r=this.addAttributesIfGranted(r,e,a,"delete:own",d)}return r}},{key:"getAllPermissionsForAllRoles",value:function(){for(var e=this.myAccessControl.getRoles(),r={},t=0;t<e.length;t++){var n=e[t],a=this.getAllPermissionsForRole(n);r=Object.assign(r,a)}return r}},{key:"handleIndex",value:function(e,r){var t=e.locals.current_user.role;if(this.myAccessControl.can(t).readAny(this.accessControlResource).granted)try{var n=this.getAllPermissionsForAllRoles();Qe.responseWithJSON(r,a.a.OK,n)}catch(e){Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{errorCode:a.a.INTERNAL_SERVER_ERROR,error:e.toString()})}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to read all Permissions"})}},{key:"handleGet",value:function(e,r){var t=e.locals.current_user.role;if(this.myAccessControl.can(t).readOwn(this.accessControlResource).granted)try{var n=this.getAllPermissionsForRole(t);Qe.responseWithJSON(r,a.a.OK,n)}catch(e){Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{errorCode:a.a.INTERNAL_SERVER_ERROR,error:e.toString()})}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to read own Permissions"})}}])&&J(r.prototype,t),n&&J(r,n),e}();function L(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.residence_resource_id_parameter,this.routeResources=Qe.residence_routeResources,this.routeResource=Qe.residence_routeResource,this.accessControlResource=Qe.residence_accessControlResource,this.resourceName=Qe.residence_resourceName,this.routeResourceWashers=Qe.residence_routeResourceWashers,this.residence_routeAssociationUsersAccessControll=Qe.residence_routeAssociationUsersAccessControll,this.residence_routeAssociationUsers=Qe.residence_routeAssociationUsers}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.routeResourceWashers,this.handleGetResidenceWashers.bind(this)),this.expressApp.get(this.residence_routeAssociationUsers,this.handleGetAssociationUsers.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Residence,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Residence,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGetResidenceWashers",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny("Washer");n.granted?e.locals[this.resourceName].getWashers().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][ResidenceController] handleGetResidenceWashers - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Residence Washers",residence_id:e.locals[this.resourceName].id})}},{key:"handleGetAssociationUsers",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(this.residence_routeAssociationUsersAccessControll);n.granted?e.locals[this.resourceName].getUsers().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][ResidenceController] handleGetAssociationUsers - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Residence Users",residence_id:e.locals[this.resourceName].id})}}])&&L(r.prototype,t),n&&L(r,n),e}();function z(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var H=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.role_resource_id_parameter,this.routeResources=Qe.role_routeResources,this.routeResource=Qe.role_routeResource,this.role_routeResourceInheritedRoles=Qe.role_routeResourceInheritedRoles,this.accessControlResource=Qe.role_accessControlResource,this.resourceName=Qe.role_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Role,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Role,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}}])&&z(r.prototype,t),n&&z(r,n),e}();function V(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var K=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][StreamViewController] initialised")}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.streamview_resource_id_parameter,this.routeResources=Qe.streamview_routeResources,this.routeResource=Qe.streamview_routeResource,this.accessControlResource=Qe.streamview_accessControlResource,this.resourceName=Qe.streamview_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){var o=this;e.locals.isOwnStreamView=!1,this.models.StreamView.findOne({where:{id:n}}).then((function(s){s?(e.locals[o.resourceName]=s,s.getDevice().then((function(n){n?n.getUser().then((function(r){r&&(e.locals.isOwnStreamView=e.locals.current_user.id===r.id),t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][StreamViewController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][StreamViewController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"streamview_id not found",streamview_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][StreamViewController] paramcheckerResourceId - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.StreamView,this.myAccessControl,this.accessControlResource,this.resourceName,[],null)}},{key:"handleCreate",value:function(e,r){var t=this,n=e.body.device_id;n?this.models.Device.findOne({where:{id:n}}).then((function(o){o?o.getUser().then((function(s){if(s){var i=e.locals.current_user.id=s.id;e.locals.isOwnStreamView=i;var c=t.myAccessControl.can(e.locals.current_user.role).createAny(t.accessControlResource);if(i&&(c=t.myAccessControl.can(e.locals.current_user.role).createOwn(t.accessControlResource)),c.granted){var l=c.filter(e.body),u=t.models.StreamView.build(l);u.setDevice(o,{save:!1}),u.save().then((function(t){m.a.respondWithPermissionFilteredResource(e,r,t,c)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][StreamViewController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create resource "+t.resourceName})}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"no user for device found",device_id:n})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][StreamViewController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"device_id not found",device_id:n})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][StreamViewController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"device_id is missing"})}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnStreamView)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnStreamView)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnStreamView)}}])&&V(r.prototype,t),n&&V(r,n),e}(),$=t(6);function Z(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function Q(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n,o,s;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.user_resource_id_parameter,this.routeResources=Qe.user_routeResources,this.routeResource=Qe.user_routeResource,this.accessControlResource=Qe.user_accessControlResource,this.resourceName=Qe.user_resourceName,this.routeUsersAmount=Qe.user_routeAmount,this.routeUsersDevice=Qe.user_routeUsersDevice,this.routeUserGetNewToken=Qe.user_routeUserGetNewToken,this.user_routeUserPrivacyPolicyRead=Qe.user_routeUserPrivacyPolicyRead,this.user_routeUsersFavoriteMeals=Qe.user_routeUsersFavoriteMeals,this.user_routeUsersFavoriteMeal=Qe.user_routeUsersFavoriteMeal,this.user_routeUsersFriends=Qe.user_routeUsersFriends,this.user_routeUsersFriend=Qe.user_routeUsersFriend,this.friend_resourceName=Qe.friend_resourceName,this.friend_resource_id_parameter=Qe.friend_resource_id_parameter,this.user_routeUsersFriendRequests=Qe.user_routeUsersFriendRequests,this.user_routeUsersFriendRequest=Qe.user_routeUsersFriendRequest,this.friendrequest_resourceName=Qe.friendrequest_resourceName,this.friendrequest_resource_id_parameter=Qe.friendrequest_resource_id_parameter,this.userMarking_accessControlResource=Qe.userMarking_accessControlResource,this.user_routeMarkings=Qe.user_routeMarkings,this.user_routeMarking=Qe.user_routeMarking,this.user_selectedCanteen_routeIdentifier=Qe.user_selectedCanteen_routeIdentifier,this.user_routeWasherNotifications=Qe.user_routeWasherNotifications,this.user_routeWasherNotification=Qe.user_routeWasherNotification}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerUserID.bind(this)),this.expressApp.param(this.friend_resource_id_parameter,this.paramcheckerFriendID.bind(this)),this.expressApp.param(this.friendrequest_resource_id_parameter,this.paramcheckerFriendRequestID.bind(this)),this.expressApp.get(this.routeUsersAmount,this.handleGetAmount.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.routeUsersDevice,this.handleGetDevice.bind(this)),this.expressApp.post(this.routeUserGetNewToken,this.myExpressRouter.middlewareOnlyAuthenticatedViaPlaintextSecret.bind(this),this.handleGetNewToken.bind(this)),this.expressApp.post(this.user_routeUserPrivacyPolicyRead,this.handleUpdatePrivacyPolicy.bind(this)),this.expressApp.get(this.user_routeUsersFavoriteMeals,this.handleGetFavoriteMeals.bind(this)),this.expressApp.post(this.user_routeUsersFavoriteMeal,this.handleCreateFavoriteMeal.bind(this)),this.expressApp.get(this.user_routeUsersFavoriteMeal,this.handleGetFavoriteMeal.bind(this)),this.expressApp.delete(this.user_routeUsersFavoriteMeal,this.handleDeleteFavoriteMeal.bind(this)),this.expressApp.get(this.user_routeUsersFriends,this.handleGetFriends.bind(this)),this.expressApp.post(this.user_routeUsersFriend,this.handleCreateFriend.bind(this)),this.expressApp.get(this.user_routeUsersFriend,this.handleGetFriend.bind(this)),this.expressApp.delete(this.user_routeUsersFriend,this.handleDeleteFriend.bind(this)),this.expressApp.get(this.user_routeUsersFriendRequests,this.handleGetFriendRequests.bind(this)),this.expressApp.post(this.user_routeUsersFriendRequest,this.handleCreateFriendRequest.bind(this)),this.expressApp.get(this.user_routeUsersFriendRequest,this.handleGetFriendRequest.bind(this)),this.expressApp.delete(this.user_routeUsersFriendRequest,this.handleDeleteFriendRequest.bind(this)),this.expressApp.get(this.user_routeMarkings,this.handleGetUserMarkings.bind(this)),this.expressApp.post(this.user_routeMarking,this.handleCreateUserMarking.bind(this)),this.expressApp.get(this.user_routeMarking,this.handleGetUserMarking.bind(this)),this.expressApp.delete(this.user_routeMarking,this.handleDeleteUserMarking.bind(this)),this.expressApp.get(this.user_routeWasherNotifications,this.handleGetUserWasherNotifications.bind(this)),this.expressApp.post(this.user_routeWasherNotification,this.handleCreateUserWasherNotification.bind(this)),this.expressApp.get(this.user_routeWasherNotification,this.handleGetUserWasherNotification.bind(this)),this.expressApp.delete(this.user_routeWasherNotification,this.handleDeleteUserWasherNotification.bind(this))}},{key:"paramcheckerUserID",value:function(e,r,t,n){var o=this;this.models.User.findOne({where:{id:n}}).then((function(s){return s?(e.locals[o.resourceName]=s,e.locals.isOwnUser=e.locals.current_user.id===s.id,void t()):void Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id not found",user_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] paramcheckerUserID - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"paramcheckerFriendID",value:function(e,r,t,n){var o=this;this.models.User.findOne({where:{id:n}}).then((function(s){s?(e.locals[o.friend_resourceName]=s,e.locals[o.resourceName].getFriends().then((function(r){e.locals.isOwnFriend=!1;for(var n=0;n<r.length;n++)r[n].id===s.id&&(e.locals.isOwnFriend=!0);t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] paramcheckerFriendID - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"friend_id not found",friend_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] paramcheckerFriendID - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"paramcheckerFriendRequestID",value:function(e,r,t,n){var o=this;this.models.User.findOne({where:{id:n}}).then((function(s){s?(e.locals[o.friendrequest_resourceName]=s,e.locals[o.resourceName].getOutgoingFriendRequests().then((function(r){e.locals.isOwnFriendRequest=!1;for(var n=0;n<r.length;n++)r[n].id===s.id&&(e.locals.isOwnFriendRequest=!0);t()})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] paramcheckerFriendRequestID - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"friendrequest_id not found",friendrequest_id:n})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] paramcheckerFriendRequestID - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGetAmount",value:function(e,r){var t=this;this.models.User.count().then((function(e){Qe.responseWithJSON(r,a.a.OK,e)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetAmount - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGetNewToken",value:function(e,r){var t=this,n=e.locals[this.resourceName],o=n.id,s=e.locals.current_user.id;e.locals.isOwnUser=o===s;var i=this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.user_accessToken_accessControlResource);e.locals.isOwnUser&&(i=this.myAccessControl.can(e.locals.current_user.role).createOwn(Qe.user_accessToken_accessControlResource)),this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleGetNewToken - current_user_id: "+s+" user_id: "+o+" granted: "+i.granted+" ownUser: "+e.locals.isOwnUser),i.granted?(n.update({online_time:new Date}),this.models.UserRole.findOne({include:[{model:this.models.Role}],where:{UserId:n.id}}).then((function(e){var n=$.a.roleNameUser;e&&(n=e.Role.name);var i={successfully:!0,accessToken:t.myExpressRouter.tokenHelper.createToken(o,n)};t.logger.info("["+t.myExpressRouter.workerID+"][UserController] handleGetNewToken - current_user_id: "+s+" user_id: "+o+" successfully: "+i.successfully+" roleName: "+n),Qe.responseWithJSON(r,a.a.OK,i)})).catch((function(e){console.log(e.toString()),t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetNewToken - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):(this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleGetNewToken - current_user_id: "+s+" user_id: "+o+" successfully: "+answer.successfully+" ownUser: "+e.locals.isOwnUser),Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create AccessToken"}))}},{key:"handleUpdatePrivacyPolicy",value:function(e,r){var t,n,o,s=e.locals[this.resourceName].id,i=e.locals.current_user.id;if(e.locals.isOwnUser){this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleUpdatePrivacyPolice - current_user_id: "+i+" user_id: "+s);var c={privacyPoliceReadDate:new Date};e.locals[this.resourceName].update(c).then((function(e){var t=e.get({plain:!0});Qe.responseWithJSON(r,a.a.OK,t)})).catch((function(e){Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleUpdatePrivacyPolice - current_user_id: "+i+" user_id: "+s),Qe.responseWithJSON(r,a.a.FORBIDDEN,(t={errorCode:a.a.FORBIDDEN,error:"Forbidden to update Resource"},n=resourceName+"_id",o=sequelizeResource.id,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.User,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).createOwn(this.accessControlResource),o=e.connection.remoteAddress;if(this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleCreate - remoteAddress: "+o),n.granted){var s=e.body.plaintextSecret;if(!s)return this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleCreate - plaintextSecret is missing"),void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"plaintextSecret is missing"});this.models.User.create({privacyPoliceReadDate:new Date,online_time:new Date}).then((function(e){var n=w.genSalt(),o=w.hashSecret(s,n);t.models.Login.create({UserId:e.id,hashedSecretKey:o,salt:o}).then((function(t){var n={user_id:e.id};Qe.responseWithJSON(r,a.a.OK,n)})).catch((function(n){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreate - "+n.toString()),e.destroy(),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:n.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Resource: "+this.accessControlResource})}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnUser)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnUser)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,e.locals.isOwnUser)}},{key:"handleGetDevice",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).updateAny(Qe.device_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).updateOwn(Qe.device_accessControlResource)),n.granted?e.locals[this.resourceName].getDevice().then((function(e){if(e){var n=e.id;Qe.responseWithJSON(r,a.a.OK,n)}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:t.resourceName+" device not found"})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetDevice - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Device",user_id:e.locals[this.resourceName].id})}},{key:"handleGetFavoriteMeals",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.user_favoriteMeals_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.user_favoriteMeals_accessControlResource)),n.granted?e.locals[this.resourceName].getFavoriteMeals().then((function(n){var a=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.meal_accessControlResource);m.a.respondWithPermissionFilteredResources(e,r,n,a)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFavoriteMeals - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Favorite Meals",user_id:e.locals[this.resourceName].id})}},{key:"handleCreateFavoriteMeal",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.user_favoriteMeals_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).createOwn(Qe.user_favoriteMeals_accessControlResource)),n.granted){var o=e.locals[Qe.meal_resourceName];e.locals[this.resourceName].hasFavoriteMeal(o).then((function(n){n?t.handleGetFavoriteMeal(e,r):e.locals[t.resourceName].addFavoriteMeal(o).then((function(n){t.handleGetFavoriteMeal(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateFavoriteMeal - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateFavoriteMeal - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Users Favorite Meal",user_id:e.locals[this.resourceName].id})}},{key:"handleGetFavoriteMeal",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.user_favoriteMeals_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.user_favoriteMeals_accessControlResource)),n.granted){var o=e.locals[Qe.meal_resourceName];e.locals[this.resourceName].hasFavoriteMeal(o).then((function(n){if(n){var s=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.meal_accessControlResource);m.a.respondWithPermissionFilteredResource(e,r,o,s)}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"meal_id is not users favorite meal",meal_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFavoriteMeal - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Favorite Meal",user_id:e.locals[this.resourceName].id})}},{key:"handleDeleteFavoriteMeal",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.user_favoriteMeals_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(Qe.user_favoriteMeals_accessControlResource)),n.granted){var o=e.locals[Qe.meal_resourceName];e.locals[this.resourceName].hasFavoriteMeal(o).then((function(n){n?e.locals[t.resourceName].removeFavoriteMeal(o).then((function(t){m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFavoriteMeal - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFavoriteMeal - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete Users Favorite Meal",user_id:e.locals[this.resourceName].id})}},{key:"handleGetFriends",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.friend_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.friend_accessControlResource)),n.granted?e.locals[this.resourceName].getFriends().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFriends - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Friends",user_id:e.locals[this.resourceName].id})}},{key:"handleCreateFriend",value:function(e,r){if(this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.friend_accessControlResource).granted){var t=e.locals[Qe.friend_resourceName],n=e.locals[this.resourceName];this.helper_forceFriendShip(e,r,n,t)}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Users Friend",user_id:e.locals[this.resourceName].id})}},{key:"helper_forceFriendShip",value:function(e,r,t,n){var o=this;t.addFriend(n).then((function(e){n.addFriend(t).then((function(e){Qe.responseWithJSON(r,a.a.OK,{friend_id:n.id})})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] helper_forceFriendShip - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){o.logger.error("["+o.myExpressRouter.workerID+"][UserController] helper_forceFriendShip - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"handleGetFriend",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.friend_accessControlResource);if(e.locals.isOwnUser&&e.locals.isOwnFriend&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.friend_accessControlResource)),n.granted){var o=e.locals[Qe.friend_resourceName];e.locals[this.resourceName].hasFriend(o).then((function(t){return t?void m.a.respondWithPermissionFilteredResource(e,r,o,n):void Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id not friend with",friend_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFriend - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Friend",user_id:e.locals[this.resourceName].id})}},{key:"handleDeleteFriend",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.friend_accessControlResource);if(e.locals.isOwnUser&&e.locals.isOwnFriend&&(n=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(Qe.friend_accessControlResource)),n.granted){var o=e.locals[Qe.friend_resourceName],s=e.locals[this.resourceName];s.hasFriend(o).then((function(n){n?s.removeFriend(o).then((function(n){o.removeFriend(s).then((function(t){m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFriend - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFriend - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id not friend with",friend_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFriend - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete Users Friend",user_id:e.locals[this.resourceName].id})}},{key:"handleGetFriendRequests",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.friendrequest_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.friendrequest_accessControlResource)),n.granted?e.locals[this.resourceName].getOutgoingFriendRequests().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFriendRequests - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users FriendRequests",user_id:e.locals[this.resourceName].id})}},{key:"handleCreateFriendRequest",value:function(e,r){var t=this;this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - start");var n=this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.friendrequest_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).createOwn(Qe.friendrequest_accessControlResource)),this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - check permission"),n.granted){var o=e.locals[Qe.friendrequest_resourceName],s=e.locals[this.resourceName];this.logger.info("["+this.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest -"+s.id+" --\x3e "+o.id),s.addOutgoingFriendRequests(o).then((function(n){t.logger.info("["+t.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - added outgoing friendrequest"),o.hasOutgoingFriendRequest(s).then((function(n){return t.logger.info("["+t.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - check if both have requests"),n?t.helper_friendRequestMatched(e,r,s,o):Qe.responseWithJSON(r,a.a.OK,{friendrequest_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateFriendRequest - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Users FriendRequest",user_id:e.locals[this.resourceName].id})}},{key:"helper_friendRequestMatched",value:(o=regeneratorRuntime.mark((function e(r,t,n,o){var s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.info("["+this.myExpressRouter.workerID+"][UserController] helper_friendRequestMatched"),n.removeOutgoingFriendRequests(o).then((function(e){o.removeOutgoingFriendRequests(n).then((function(e){s.helper_forceFriendShip(r,t,n,o)})).catch((function(e){s.logger.error("["+s.myExpressRouter.workerID+"][UserController] helper_friendRequestMatched - "+e.toString()),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){s.logger.error("["+s.myExpressRouter.workerID+"][UserController] helper_friendRequestMatched - "+e.toString()),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}));case 2:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,r=arguments;return new Promise((function(t,n){var a=o.apply(e,r);function s(e){Z(a,t,n,s,i,"next",e)}function i(e){Z(a,t,n,s,i,"throw",e)}s(void 0)}))},function(e,r,t,n){return s.apply(this,arguments)})},{key:"handleGetFriendRequest",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.friendrequest_accessControlResource);if(e.locals.isOwnUser&&e.locals.isOwnFriendRequest&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.friendrequest_accessControlResource)),n.granted){var o=e.locals[Qe.friendrequest_resourceName];e.locals[this.resourceName].hasOutgoingFriendRequest(o).then((function(t){t?m.a.respondWithPermissionFilteredResources(e,r,o,n):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id has not send any friendrequest with",friend_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetFriendRequest - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users FriendRequest",user_id:e.locals[this.resourceName].id})}},{key:"handleDeleteFriendRequest",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.friendrequest_accessControlResource);if(e.locals.isOwnUser&&e.locals.isOwnFriendRequest&&(n=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(Qe.friendrequest_accessControlResource)),n.granted){var o=e.locals[Qe.friendrequest_resourceName],s=e.locals[this.resourceName];s.hasOutgoingFriendRequest(o).then((function(n){n?s.removeOutgoingFriendRequests(o).then((function(t){m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFriendRequest - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"user_id has not send any fruendrequest with",friend_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteFriendRequest - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete Users FriendRequest",user_id:e.locals[this.resourceName].id})}},{key:"handleGetUserMarkings",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(this.userMarking_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(this.userMarking_accessControlResource)),n.granted?e.locals[this.resourceName].getMarkings().then((function(n){var a=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.marking_accessControlResource);m.a.respondWithPermissionFilteredResources(e,r,n,a)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetUserMarkings - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Markings",user_id:e.locals[this.resourceName].id})}},{key:"handleCreateUserMarking",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).createAny(this.userMarking_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).createOwn(this.userMarking_accessControlResource)),n.granted){var o=e.locals[Qe.marking_resourceName];e.locals[this.resourceName].hasMarking(o).then((function(n){n?t.handleGetUserMarking(e,r):e.locals[t.resourceName].addMarking(o).then((function(n){t.handleGetUserMarking(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateUserMarking - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateUserMarking - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Users Marking",user_id:e.locals[this.resourceName].id})}},{key:"handleGetUserMarking",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(this.userMarking_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(this.userMarking_accessControlResource)),n.granted){var o=e.locals[Qe.marking_resourceName];e.locals[this.resourceName].hasMarking(o).then((function(n){if(n){var s=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.marking_accessControlResource);m.a.respondWithPermissionFilteredResource(e,r,o,s)}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"marking_id is not users marking id",marking_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetUserMarking - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Users Marking",user_id:e.locals[this.resourceName].id})}},{key:"handleDeleteUserMarking",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(this.userMarking_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(this.userMarking_accessControlResource)),n.granted){var o=e.locals[Qe.marking_resourceName];e.locals[this.resourceName].hasMarking(o).then((function(n){n?e.locals[t.resourceName].removeMarking(o).then((function(t){m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteUserMarking - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteUserMarking - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete Users Marking",user_id:e.locals[this.resourceName].id})}},{key:"handleGetUserWasherNotifications",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.userWasherNotification_accessControlResource);e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.userWasherNotification_accessControlResource)),n.granted?e.locals[this.resourceName].getObservingWashers().then((function(n){var a=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.washer_accessControlResource);m.a.respondWithPermissionFilteredResources(e,r,n,a)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetUserWasherNotifications - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get "+Qe.userWasherNotification_accessControlResource,user_id:e.locals[this.resourceName].id})}},{key:"handleCreateUserWasherNotification",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.userWasherNotification_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).createOwn(Qe.userWasherNotification_accessControlResource)),n.granted){var o=e.locals[Qe.washer_resourceName];e.locals[this.resourceName].hasObservingWasher(o).then((function(n){n?t.handleGetUserWasherNotification(e,r):e.locals[t.resourceName].addObservingWasher(o).then((function(n){t.handleGetUserWasherNotification(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateUserWasherNotification - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleCreateUserWasherNotification - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create "+Qe.userWasherNotification_accessControlResource,user_id:e.locals[this.resourceName].id})}},{key:"handleGetUserWasherNotification",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.userWasherNotification_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).readOwn(Qe.userWasherNotification_accessControlResource)),n.granted){var o=e.locals[Qe.washer_resourceName];e.locals[this.resourceName].hasObservingWasher(o).then((function(n){if(n){var s=t.myAccessControl.can(e.locals.current_user.role).readAny(Qe.washer_accessControlResource);m.a.respondWithPermissionFilteredResource(e,r,o,s)}else Qe.responseWithJSON(r,a.a.NOT_FOUND,{error:"washer_id is not users washer id",washer_id:o.id})})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleGetUserWasherNotification - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get UserWasherNotification",user_id:e.locals[this.resourceName].id})}},{key:"handleDeleteUserWasherNotification",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.userWasherNotification_accessControlResource);if(e.locals.isOwnUser&&(n=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(Qe.userWasherNotification_accessControlResource)),n.granted){var o=e.locals[Qe.washer_resourceName];e.locals[this.resourceName].hasObservingWasher(o).then((function(n){n?e.locals[t.resourceName].removeObservingWasher(o).then((function(t){m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteUserWasherNotification - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserController] handleDeleteUserWasherNotification - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete UserWasherNotification",user_id:e.locals[this.resourceName].id})}}])&&Q(r.prototype,t),n&&Q(r,n),e}();function Y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.routeResources=Qe.userrole_routeResources,this.routeResource=Qe.userrole_routeResource,this.accessControlResource=Qe.userrole_accessControlResource,this.resourceName=Qe.userrole_resourceName,this.routeResourceForUser=Qe.userrole_routeResourceForUser}},{key:"configureRoutes",value:function(){this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResource,this.handleCreate.bind(this)),this.expressApp.get(this.routeResourceForUser,this.handleGet.bind(this)),this.expressApp.delete(this.routeResourceForUser,this.handleDelete.bind(this))}},{key:"handleIndex",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource);n.granted?this.models.UserRole.findAll().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleIndex - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource: "+this.resourceName})}},{key:"handleCreate",value:function(e,r){var t=this,n=e.locals[Qe.user_resourceName],o=e.locals.current_user.role,s=e.locals[Qe.role_resourceName],i=s.name;if($.a.inheritatesOrIsSameRole(o,i,this.myAccessControl)){var c=n.id===e.locals.current_user.id,l=this.myAccessControl.can(e.locals.current_user.role).createAny(this.accessControlResource);c&&(l=this.myAccessControl.can(e.locals.current_user.role).createOwn(this.accessControlResource)),this.logger.info("["+this.myExpressRouter.workerID+"][UserRoleController] handleCreate - current_user: "+e.locals.current_user.id+" user: "+n.id+" role: "+s.name+" permission.granted: "+l.granted),l.granted?this.models.UserRole.findOne({where:{UserId:n.id}}).then((function(i){i?t.models.Role.findOne({where:{id:i.RoleId}}).then((function(n){if(n){var c=n.name;if($.a.isFirstRoleRealyHigher(c,o,t.myAccessControl))return void Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to set Role for someone higher than you!"})}i.RoleId=s.id,i.save().then((function(t){m.a.respondWithPermissionFilteredResource(e,r,t,l)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):t.models.UserRole.create({UserId:n.id,RoleId:s.id}).then((function(t){m.a.respondWithPermissionFilteredResource(e,r,t,l)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleCreate - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to set Role for user: "})}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to set higher Role than own! Own: "+o+" to assign Role: "+i})}},{key:"handleGet",value:function(e,r){var t=this,n=e.locals[Qe.user_resourceName],o=n.id===e.locals.current_user.id,s=this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource);o&&(s=this.myAccessControl.can(e.locals.current_user.role).readOwn(this.accessControlResource)),s.granted?this.models.UserRole.findOne({where:{UserId:n.id}}).then((function(t){m.a.respondWithPermissionFilteredResource(e,r,t,s)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleGet - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource: "+this.resourceName})}},{key:"handleDelete",value:function(e,r){var t=this,n=e.locals[Qe.user_resourceName],o=e.locals.current_user.role,s=n.id===e.locals.current_user.id,i=this.myAccessControl.can(e.locals.current_user.role).deleteAny(this.accessControlResource);s&&(i=this.myAccessControl.can(e.locals.current_user.role).deleteOwn(this.accessControlResource)),i.granted&&this.models.UserRole.findOne({where:{UserId:n.id}}).then((function(n){n?t.models.Role.findOne({where:{id:n.RoleId}}).then((function(i){var c=i.name;$.a.isFirstRoleRealyHigher(c,o,t.myAccessControl)?Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to delete Role for someone higher than you!"}):(e.locals[t.resourceName]=n,t.myExpressRouter.defaultControllerHelper.handleDelete(e,r,t.myAccessControl,t.accessControlResource,t.resourceName,s))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleDelete - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):m.a.respondWithDeleteMessage(e,r)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UserRoleController] handleDelete - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}}])&&Y(r.prototype,t),n&&Y(r,n),e}();function re(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function te(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ne=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.university_resource_id_parameter,this.routeResources=Qe.university_routeResources,this.routeResource=Qe.university_routeResource,this.accessControlResource=Qe.university_accessControlResource,this.resourceName=Qe.university_resourceName,this.university_routeResourceBuildings=Qe.university_routeResourceBuildings,this.university_routeResourceBuilding=Qe.university_routeResourceBuilding}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.university_routeResourceBuildings,this.handleGetBuildings.bind(this)),this.expressApp.post(this.university_routeResourceBuilding,this.handleAddBuilding.bind(this)),this.expressApp.delete(this.university_routeResourceBuilding,this.handleRemoveBuilding.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.University,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.University,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleAddBuilding",value:function(e,r){var t=this;if(this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.building_accessControlResource).granted){var n=e.locals[Qe.building_resourceName];e.locals[this.resourceName].addBuilding(n).then((function(e){Qe.responseWithJSON(r,a.a.OK,re({},Qe.building_resourceName+"_id",n.id))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UniversityController] handleAddBuilding - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}}},{key:"handleRemoveBuilding",value:function(e,r){var t=this;if(this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.building_accessControlResource).granted){var n=e.locals[Qe.building_resourceName];e.locals[this.resourceName].removeBuilding(n).then((function(e){Qe.responseWithJSON(r,a.a.OK,re({},Qe.building_resourceName+"_id",n.id))})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UniversityController] handleRemoveBuilding - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}}},{key:"handleGetBuildings",value:function(e,r){var t=this;this.myAccessControl.can(e.locals.current_user.role).readAny(Qe.building_accessControlResource).granted?e.locals[this.resourceName].getBuildings().then((function(e){var t=e.map((function(e){return{id:e.get({plain:!0}).id}}));Qe.responseWithJSON(r,a.a.OK,t)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][UniversityController] handleGetBuildings - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Universities Buildings",university_id:e.locals[this.resourceName].id})}}])&&te(r.prototype,t),n&&te(r,n),e}();function ae(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.feedback_resource_id_parameter,this.routeResources=Qe.feedback_routeResources,this.routeResource=Qe.feedback_routeResource,this.accessControlResource=Qe.feedback_accessControlResource,this.resourceName=Qe.feedback_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Feedback,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Feedback,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=this.models.Feedback.build({message:e.body.message,label:e.body.label});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,t,this.myAccessControl,this.accessControlResource,this.resourceName,!0,!1)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!1)}}])&&ae(r.prototype,t),n&&ae(r,n),e}();function se(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ie=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.information_resource_id_parameter,this.routeResources=Qe.information_routeResources,this.routeResource=Qe.information_routeResource,this.accessControlResource=Qe.information_accessControlResource,this.resourceName=Qe.information_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Information,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Information,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=e.body.label||"New entry",n=e.body.value||"New value",a=e.body.datatype||"String",o=this.models.Information.build({label:t,value:n,datatype:a});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,o,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}}])&&se(r.prototype,t),n&&se(r,n),e}(),ce=t(9),le=t(44),ue=t.n(le);function pe(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function de(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){pe(o,n,a,s,i,"next",e)}function i(e){pe(o,n,a,s,i,"throw",e)}s(void 0)}))}}function me(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var he="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!$%&/()=?`^<>;:,.-_#'+*[]|{}",fe=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n,o,s,i,c,l,u,p,d,m,h,f,v;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.order_resource_id_parameter,this.routeResources=Qe.order_routeResources,this.routeResource=Qe.order_routeResource,this.accessControlResource=Qe.order_accessControlResource,this.resourceName=Qe.order_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"isOwnCheck",value:(v=de(regeneratorRuntime.mark((function e(r,t){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,t.getUser();case 3:return n=e.sent,a=!1,r.locals.current_user&&n?a=r.locals.current_user.id===n.id:(o=r.body.token)&&o.length>0&&(a=ue.a.safeCompare(o,t.token)),e.abrupt("return",a);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)}))),function(e,r){return v.apply(this,arguments)})},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Order,this.accessControlResource,this.resourceName,this.isOwnCheck.bind(this))}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Order,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"checkTimeRange",value:function(e){var r=ce.DateTime.fromISO(e.toISOString(),{zone:"Europe/Berlin"}),t=new ce.DateTime(r);t=t.set({hour:11,minute:40,second:0,millisecond:0});var n=new ce.DateTime(r);return n=n.set({hour:14,minute:10,second:0,millisecond:0}),r>=t&&r<=n}},{key:"validateTimeslot",value:function(e,r){if(r){if(r=new Date(r),!this.checkTimeRange(r))return Qe.responseWithJSON(e,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, timeslot range is not valid: only 11:40 - 14:10"}),!1;var t=ce.DateTime.fromISO(r.toISOString(),{zone:"Europe/Berlin"});r=new Date(t.toISO());var n=new Date,o=n<new Date("2020-05-04"),s=ce.DateTime.fromISO(n.toISOString(),{zone:"Europe/Berlin"}),i=new ce.DateTime(s);i=i.set({hour:23,minute:59,second:0,millisecond:0}),i=new Date(i.toISO());var c=new Date;c=U.a.addHoursToDate(c,24);var l=new Date(c);return l=U.a.addHoursToDate(l,24),(U.a.diff_seconds(i,n)>0?c:l).getDate()===r.getDate()||o?U.a.roundDownToNextMilliSeconds(r,6e5):(Qe.responseWithJSON(e,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, timeslot is for wrong day or too late"}),!1)}return Qe.responseWithJSON(e,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, no timeslot given"}),!1}},{key:"getMaxOrdersPerPerson",value:(f=de(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.Information.findOne({where:{label:"EmergencyCareMaxMealPerOrder"}});case 2:return r=e.sent,t=parseInt(r.value),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getMaxPersonPerSlot",value:(h=de(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.Information.findOne({where:{label:"EmergencyCareMaxPersonPerSlot"}});case 2:return r=e.sent,t=parseInt(r.value),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"validateAmount",value:(m=de(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=1,e.next=3,this.getMaxOrdersPerPerson();case 3:if(n=e.sent,!r){e.next=8;break}if(!Number.isInteger(r)){e.next=8;break}if(!(r>=t&&r<=n)){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"checkMealExistense",value:(d=de(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,this.models.Meal.findOne({where:{id:r}});case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"checkCanteenExistense",value:(p=de(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return console.log(r),e.next=4,this.models.Canteen.findOne({where:{id:r}});case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"checkOrderDetail",value:(u=de(regeneratorRuntime.mark((function e(r,t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=16;break}return e.next=3,this.validateAmount(n);case 3:if(e.sent){e.next=7;break}return Qe.responseWithJSON(r,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, amount is not valid: "+n}),e.abrupt("return",!1);case 7:return e.next=9,this.checkMealExistense(t);case 9:if(!e.sent){e.next=14;break}return e.abrupt("return",!0);case 14:return Qe.responseWithJSON(r,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, MealId is not valid: "+t}),e.abrupt("return",!1);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return u.apply(this,arguments)})},{key:"checkAllOrderDetails",value:(l=de(regeneratorRuntime.mark((function e(r,t){var n,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t),a=0;case 2:if(!(a<n.length)){e.next=13;break}return o=n[a],s=t[o],e.next=7,this.checkOrderDetail(r,o,s);case 7:if(e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:a++,e.next=2;break;case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)}))),function(e,r){return l.apply(this,arguments)})},{key:"createOrderDetailForOrder",value:(c=de(regeneratorRuntime.mark((function e(r,t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.id,o=this.models.OrderDetail.build({OrderId:a,amount:n,MealId:t}),e.next=4,o.save();case 4:e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return c.apply(this,arguments)})},{key:"createOrderDetailsForOrder",value:(i=de(regeneratorRuntime.mark((function e(r,t){var n,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t),a=0;case 2:if(!(a<n.length)){e.next=10;break}return o=n[a],s=t[o],e.next=7,this.createOrderDetailForOrder(r,o,s);case 7:a++,e.next=2;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e,r){return i.apply(this,arguments)})},{key:"checkMaxAmountOrdersPerTimeslot",value:(s=de(regeneratorRuntime.mark((function e(r,t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaxPersonPerSlot();case 2:return o=e.sent,e.next=5,this.models.Order.findAll({where:{timeslot:t,CanteenId:n}});case 5:if(!(e.sent.length<o)){e.next=10;break}return e.abrupt("return",!0);case 10:return Qe.responseWithJSON(r,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, Already max Orders reached for specific timeslot"}),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return s.apply(this,arguments)})},{key:"generateRandomOrderToken",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,r=he,t="",n=e;n>0;--n)t+=r[Math.floor(Math.random()*r.length)];return t}},{key:"handleCreate",value:(o=de(regeneratorRuntime.mark((function e(r,t){var n,o,s,i,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.body.timeslot,n=this.validateTimeslot(t,n)){e.next=4;break}return e.abrupt("return");case 4:return o=r.body.CanteenId,e.next=7,this.checkCanteenExistense(o);case 7:if(e.sent){e.next=11;break}return Qe.responseWithJSON(t,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, CanteenId is invalid"}),e.abrupt("return");case 11:if(n){e.next=14;break}return Qe.responseWithJSON(t,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, timeslot is invalid"}),e.abrupt("return");case 14:if(s=null,r.locals.current_user&&r.locals.current_user.id&&""+(i=r.body.UserId)==""+r.locals.current_user.id&&(s=i),c=r.body.orderDetails){e.next=22;break}return Qe.responseWithJSON(t,a.a.BAD_REQUEST,{errorCode:a.a.HTTP_STATUS_BAD_REQUEST,error:"Bad Request, orderDetail is missing"}),e.abrupt("return");case 22:return e.next=24,this.checkAllOrderDetails(t,c);case 24:if(!e.sent){e.next=45;break}return e.next=28,this.checkMaxAmountOrdersPerTimeslot(t,n,o);case 28:if(!e.sent){e.next=43;break}return l=this.generateRandomOrderToken(),u=this.models.Order.build({timeslot:n,UserId:s,CanteenId:o,token:l}),e.next=34,this.myExpressRouter.defaultControllerHelper.handleCreate(r,t,u,this.myAccessControl,this.accessControlResource,this.resourceName,!0,!1,!0);case 34:if(!e.sent){e.next=42;break}return e.next=38,this.createOrderDetailsForOrder(u,c);case 38:r.locals[this.resourceName+"isOwn"]=!0,this.handleGet(r,t),e.next=43;break;case 42:console.log("No saved Resource ?");case 43:e.next=45;break;case 45:case"end":return e.stop()}}),e,this)}))),function(e,r){return o.apply(this,arguments)})},{key:"handleGet",value:function(e,r){var t=e.locals[this.resourceName+"isOwn"];this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t)}},{key:"handleUpdate",value:function(e,r){var t=e.locals[this.resourceName+"isOwn"];this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t,!1)}},{key:"handleDelete",value:function(e,r){var t=e.locals[this.resourceName+"isOwn"];this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,t,!1)}}])&&me(r.prototype,t),n&&me(r,n),e}();function ve(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ge=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.orderdetail_resource_id_parameter,this.routeResources=Qe.orderdetail_routeResources,this.routeResource=Qe.orderdetail_routeResource,this.accessControlResource=Qe.orderdetail_accessControlResource,this.resourceName=Qe.orderdetail_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.OrderDetail,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.OrderDetail,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!1)}}])&&ve(r.prototype,t),n&&ve(r,n),e}();function xe(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var be=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.washer_resource_id_parameter,this.routeResources=Qe.washer_routeResources,this.routeResource=Qe.washer_routeResource,this.accessControlResource=Qe.washer_accessControlResource,this.resourceName=Qe.washer_resourceName,this.washer_routeAssociationWasherJobs=Qe.washer_routeAssociationWasherJobs,this.washer_routeAssociationWasherJobAccessControll=Qe.washer_routeAssociationWasherJobAccessControll}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.post(this.routeResources,this.handleCreate.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this)),this.expressApp.get(this.washer_routeAssociationWasherJobs,this.handleGetAssociationWasherJobs.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.Washer,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.Washer,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleCreate",value:function(e,r){var t=e.body.ResidenceId,n=this.models.Washer.build({ResidenceId:t,name:"Neue Waschmaschiene"});this.myExpressRouter.defaultControllerHelper.handleCreate(e,r,n,this.myAccessControl,this.accessControlResource,this.resourceName,!1,!0)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleGetAssociationWasherJobs",value:function(e,r){var t=this,n=this.myAccessControl.can(e.locals.current_user.role).readAny(this.washer_routeAssociationWasherJobAccessControll);n.granted?e.locals[this.resourceName].getWasherJobs().then((function(t){m.a.respondWithPermissionFilteredResources(e,r,t,n)})).catch((function(e){t.logger.error("["+t.myExpressRouter.workerID+"][WasherController] handleGetAssociationWasherJobs - "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Washers WasherJobs",washer_id:e.locals[this.resourceName].id})}}])&&xe(r.prototype,t),n&&xe(r,n),e}();function ye(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Re=t(64),we=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[MyTokenHelper] creating")}var r,t,n;return r=e,(t=[{key:"verifyToken",value:function(e,r){Re.verify(e,"supersecretJWTKey",r)}},{key:"createToken",value:function(e,r){return this.logger.info("[MyTokenHelper] createToken: user_id: "+e+" role: "+r),Re.sign({user_id:e,role:r},"supersecretJWTKey",{expiresIn:"1h"})}}])&&ye(r.prototype,t),n&&ye(r,n),e}();function _e(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function ke(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ce,Ne=t(12),Ee=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n,a,o;return r=e,t=null,n=[{key:"getMetrics",value:(a=regeneratorRuntime.mark((function r(t){var n,a,o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.headers.authorization,r.next=3,Ne("https://swosy.sw-os.de/metrics/metrics",{method:"GET",headers:{authorization:n}});case 3:return a=r.sent,r.next=6,a.text();case 6:return o=r.sent,s=e.parseMetrics(o),r.abrupt("return",s);case 9:case"end":return r.stop()}}),r)})),o=function(){var e=this,r=arguments;return new Promise((function(t,n){var o=a.apply(e,r);function s(e){_e(o,t,n,s,i,"next",e)}function i(e){_e(o,t,n,s,i,"throw",e)}s(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"parseMetrics",value:function(e){for(var r=(e=e.replace(/"/g,"'")).split("\n"),t=[],n=0;n<r.length;n++){var a=r[n];a.length>0&&!a.startsWith("#")&&t.push(a)}for(var o={},s=0;s<t.length;s++){var i=t[s].split(" "),c=i[0],l=i[1],u=c.match(/path='.*?'/g);if(u&&u.length>0){var p=u[0].replace(/path='/g,"").replace(/'/g,"");o.path=o.path||{},o.path[p]=o.path[p]||{};var d=c.match(/method='.*?'/g)[0].replace(/method='/g,"").replace(/'/g,"");o.path[p][d]=o.path[p][d]||{};var m=c.match(/status_code='.*?'/g)[0].replace(/status_code='/g,"").replace(/'/g,"");if(o.path[p][d][m]=o.path[p][d][m]||{},c.startsWith("http_request_duration_seconds_bucket")){var h=c.match(/le='.*?'/g)[0].replace(/le='/g,"").replace(/'/g,"");o.path[p][d][m].buckets=o.path[p][d][m].buckets||{},o.path[p][d][m].buckets[h]=l}c.startsWith("http_request_duration_seconds_sum")&&(o.path[p][d][m].sum=l),c.startsWith("http_request_duration_seconds_count")&&(o.path[p][d][m].count=l)}else o[c]=l}return o}}],t&&ke(r.prototype,t),n&&ke(r,n),e}(),Se=t(4),Oe=t(5),Ae=t.n(Oe);function Ie(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function De(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function Te(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fe=t(8),Ue=t(65),Me=t(66),Pe=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.myExpressRouter=n}var r,t,n,o,s;return r=e,(t=[{key:"getPhotoFolderPath",value:function(e,r){var t=Fe.realpathSync(".");return Ae.a.join(t,"src","data","photos",""+e,""+r)}},{key:"getFilePathForResolutionImage",value:function(e,r,t,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.getPhotoFolderPath(e,r),s=n?"-smart":"",i=a?".webp":".jpg",c=Ae.a.join(o,r+"-"+t+s+i);return c}},{key:"getFilePathForOriginalImage",value:function(e,r){var t=this.getPhotoFolderPath(e,r);return Ae.a.join(t,"photo.jpg")}},{key:"findOrCreateResolutionImage",value:(o=regeneratorRuntime.mark((function r(t,n,a){var o,s,i,c,l,u,p,d,m,h,f,v,g,x,b,y,R,w=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=!(w.length>3&&void 0!==w[3])||w[3],s=!(w.length>4&&void 0!==w[4])||w[4],i=this.getFilePathForOriginalImage(t,n),a!==e.originalResTag){r.next=5;break}return r.abrupt("return",i);case 5:if(c=this.getFilePathForResolutionImage(t,n,a,o,s),!Se.a.doesPathExist(c)){r.next=10;break}return r.abrupt("return",c);case 10:if(!Se.a.doesPathExist(i)){r.next=56;break}return r.prev=11,Ue.cache(!1),r.next=15,Ue(i);case 15:return l=r.sent,r.next=18,l.metadata();case 18:if(u=r.sent,p=e.resolutions[a],d=u.height,m=u.width,!(d<p||m<p)){r.next=24;break}return r.abrupt("return",i);case 24:if(g=(m-(f=h=d<m?d:m))/2,x=(m-(v=h))/2,!o){r.next=38;break}return r.next=32,Me.crop(i,{width:h/2,height:h/2});case 32:b=r.sent,y=b.topCrop,f=y.width,v=y.height,g=y.x,x=y.y;case 38:if(R=l.extract({left:g,top:x,width:f,height:v}).resize(p,p),!s){r.next=45;break}return r.next=42,R.webp().toFile(c);case 42:return r.abrupt("return",c);case 45:return r.next=47,R.png().toFile(c);case 47:return r.abrupt("return",c);case 48:r.next=54;break;case 50:return r.prev=50,r.t0=r.catch(11),this.logger.error("["+this.myExpressRouter.workerID+"][DefaultPhotoHelper] findOrCreateResolutionImage - "+r.t0.toString()),r.abrupt("return",i);case 54:r.next=57;break;case 56:return r.abrupt("return",null);case 57:case"end":return r.stop()}}),r,this,[[11,50]])})),s=function(){var e=this,r=arguments;return new Promise((function(t,n){var a=o.apply(e,r);function s(e){De(a,t,n,s,i,"next",e)}function i(e){De(a,t,n,s,i,"throw",e)}s(void 0)}))},function(e,r,t){return s.apply(this,arguments)})},{key:"handlePhotoGet",value:function(r,t,n,o,s,i){var c=this;if(n.can(r.locals.current_user.role).readAny(o).granted){var l=r.query.resTag||e.defaultResTag,u="true"===r.query.smart;void 0===r.query.smart&&(u=!0);var p="true"===r.query.webp;void 0===r.query.webp&&(p=!0),l===e.originalResTag||e.resolutions[l]||(l=e.defaultResTag),this.findOrCreateResolutionImage(s,i,l,u,p).then((function(e){return e?void t.sendFile(e):void Qe.responseWithJSON(t,a.a.NOT_FOUND,{error:"Photo not found!"})})).catch((function(e){c.logger.error("["+c.myExpressRouter.workerID+"][DefaultPhotoHelper] handlePhotoGet - "+e.toString()),Qe.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}else Qe.responseWithJSON(t,a.a.FORBIDDEN,Ie({errorCode:a.a.FORBIDDEN,error:"Forbidden to get Photo Resource"},s+"_id",i))}},{key:"deleteAllResolutionPhotos",value:function(e,r){var t=this.getPhotoFolderPath(e,r);Se.a.deleteFolderRecursive(t)}},{key:"handleUpdateTableTimes",value:function(e){this.myExpressRouter.defaultControllerHelper.updateTableUpdateTimes(e.constructor,!0)}},{key:"handlePhotoUpdate",value:function(e,r,t,n,o,s){var i=t.can(e.locals.current_user.role).updateAny(n);if(this.logger.info("["+this.myExpressRouter.workerID+"][DefaultPhotoHelper] handlePhotoUpdate - current_user.id: "+e.locals.current_user.id+" role: "+e.locals.current_user.role+" permission.granted: "+i.granted),i.granted){if(!e.files)return void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"Files uploaded are null?!"});var c=void 0;if(!(c=e.files.photo))return void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"Input Field name has to be: photo!"});var l=this.getFilePathForOriginalImage(o,s);Se.a.mkdirpathForFile(l),this.deleteAllResolutionPhotos(o,s),Se.a.mkdirpathForFile(l);var u=this;c.mv(l,(function(t){if(t)console.log("err: "+t.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:t.toString()});else{Qe.responseWithJSON(r,a.a.OK,{success:!0});var n=e.locals[o];n.changed("updatedAt",!0),n.save(),u.handleUpdateTableTimes(n)}}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,Ie({errorCode:a.a.FORBIDDEN,error:"Forbidden to update Photo Resource"},o+"_id",s))}},{key:"handlePhotoDelete",value:function(e,r,t,n,o,s){var i=t.can(e.locals.current_user.role).deleteAny(n);if(this.logger.info("["+this.myExpressRouter.workerID+"][DefaultPhotoHelper] handlePhotoDelete - current_user.id: "+e.locals.current_user.id+" role: "+e.locals.current_user.role+" permission.granted: "+i.granted),i.granted){var c=this.getFilePathForOriginalImage(o,s);Se.a.mkdirpathForFile(c),Se.a.deleteFile(c),this.deleteAllResolutionPhotos(o,s),Qe.responseWithJSON(r,a.a.OK,{success:!0});var l=e.locals[o];this.handleUpdateTableTimes(l),l.changed("updatedAt",!0),l.save()}else Qe.responseWithJSON(r,a.a.FORBIDDEN,Ie({errorCode:a.a.FORBIDDEN,error:"Forbidden to destroy Photo Resource"},o+"_id",s))}}])&&Te(r.prototype,t),n&&Te(r,n),e}();function je(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Pe.originalResTag="original",Pe.thumbnailResTag="thumbnail",Pe.lowResTag="low",Pe.mediumResTag="medium",Pe.highResTag="high",Pe.resolutions=(Ie(Ce={},Pe.thumbnailResTag,128),Ie(Ce,Pe.lowResTag,512),Ie(Ce,Pe.mediumResTag,1024),Ie(Ce,Pe.highResTag,2048),Ie(Ce,Pe.originalResTag,null),Ce),Pe.defaultResTag=Pe.mediumResTag;var We=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.prepareRoutes(),this.configureRoutes()}var r,t,n;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.washerjob_resource_id_parameter,this.routeResources=Qe.washerjob_routeResources,this.routeResource=Qe.washerjob_routeResource,this.accessControlResource=Qe.washerjob_accessControlResource,this.resourceName=Qe.washerjob_resourceName}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResource,this.handleUpdate.bind(this)),this.expressApp.delete(this.routeResource,this.handleDelete.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.myExpressRouter.defaultControllerHelper.paramcheckerResourceId(e,r,t,n,this.models.WasherJob,this.accessControlResource,this.resourceName)}},{key:"handleIndex",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleIndex(e,r,this.models.WasherJob,this.myAccessControl,this.accessControlResource,this.resourceName)}},{key:"handleGet",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleGet(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleUpdate",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleUpdate(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}},{key:"handleDelete",value:function(e,r){this.myExpressRouter.defaultControllerHelper.handleDelete(e,r,this.myAccessControl,this.accessControlResource,this.resourceName,!1)}}])&&je(r.prototype,t),n&&je(r,n),e}(),Be=t(24);function Je(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function qe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Le(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ge=function(){function e(r,t,n,a,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.expressApp=n,this.myAccessControl=a,this.myExpressRouter=o,this.databaseBackupModule=new Be.a(r),this.prepareRoutes(),this.configureRoutes(),this.logger.info("["+this.myExpressRouter.workerID+"][Function_DatabaseBackupController] initialised")}var r,t,n,o,s;return r=e,(t=[{key:"prepareRoutes",value:function(){this.resource_id_parameter=Qe.function_backup_resource_id_parameter,this.routeResources=Qe.function_routeBackups,this.routeResource=Qe.function_routeBackup,this.accessControlResource=Qe.function_backup_accessControlResouce,this.resourceName=Qe.function_backup_resourceName,this.routeBackupRestore=Qe.function_routeBackupRestore,this.routeBackupDownload=Qe.function_routeBackupDownload,this.routeBackupCreate=Qe.function_routeBackupCreate}},{key:"configureRoutes",value:function(){this.expressApp.param(this.resource_id_parameter,this.paramcheckerResourceId.bind(this)),this.expressApp.get(this.routeResources,this.handleIndex.bind(this)),this.expressApp.get(this.routeResource,this.handleGet.bind(this)),this.expressApp.post(this.routeResources,this.handleFileUpload.bind(this)),this.expressApp.delete(this.routeResource,this.handleBackupDelete.bind(this)),this.expressApp.get(this.routeBackupDownload,this.handleDownload.bind(this)),this.expressApp.get(this.routeBackupCreate,this.handleCreate.bind(this)),this.expressApp.get(this.routeBackupRestore,this.handleBackupRestore.bind(this))}},{key:"paramcheckerResourceId",value:function(e,r,t,n){this.logger.info("[Function_DatabaseBackupController] paramcheckerResourceId - "+this.resourceName+" resource_id: "+n);for(var o=this.photoBackupModule.getAllBackupFileNames(),s=0; s<o.length; s++)if(n===o[s])return e.locals[this.resourceName]=n,void t();Qe.responseWithJSON(r,a.a.NOT_FOUND,qe({error:this.resourceName+"_id not found"},this.resourceName+"_id",n))}},{key:"handleIndex",value:(o=regeneratorRuntime.mark((function e(r, t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.myAccessControl.can(r.locals.current_user.role).readAny(this.accessControlResource).granted?(n=this.photoBackupModule.getAllBackupsInformation(),Qe.responseWithJSON(t,a.a.OK,n)):Qe.responseWithJSON(t,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource:s "+this.resourceName});case 2:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,r=arguments;return new Promise((function(t, n){var a=o.apply(e,r);function s(e){Je(a,t,n,s,i,"next",e)}function i(e){Je(a,t,n,s,i,"throw",e)}s(void 0)}))},function(e, r){return s.apply(this,arguments)})},{key:"handleGet",value:function(e, r){if(this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource).granted){var t=e.locals[this.resourceName],n=this.photoBackupModule.getBackupInformation(t);Qe.responseWithJSON(r,a.a.OK,n)}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource: "+this.resourceName})}},{key:"handleDownload",value:function(e, r){if(this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource).granted){var t=e.locals[this.resourceName],n=this.photoBackupModule.getBackupFilePath(t);r.sendFile(n)}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to download Resource: "+this.resourceName})}},{key:"handleCreate",value:function(e, r){this.myAccessControl.can(e.locals.current_user.role).createAny(this.accessControlResource).granted?this.photoBackupModule.exportDatabase(!0).then((function(e){Qe.responseWithJSON(r,a.a.OK,{success:!0,path:e})})).catch((function(e){Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:"Could not create Backup",more:e.toString()})})):Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to create Resource: "+this.resourceName})}},{key:"handleFileUpload",value:function(e, r){if(this.myAccessControl.can(e.locals.current_user.role).createAny(this.accessControlResource).granted){if(null===e.files||void 0===e.files)return void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"Files uploaded are null?!"});var t=void 0;if(void 0===(t=e.files.backup))return void Qe.responseWithJSON(r,a.a.BAD_REQUEST,{error:"Input Field name has to be: backup!"});var n=t.originalFilename||t.name||t.filename;n||(n=this.photoBackupModule.getPrefixForCustomBackups()+this.photoBackupModule.generateFileName()+"."+this.photoBackupModule.getCompressFileEnding());var o=this.photoBackupModule.getPathToBackups(),s=Ae.a.join(o,n);console.log("Function_DatabaseBackupController: backup: "+JSON.stringify(t)),console.log("Function_DatabaseBackupController: filePathOriginal: "+s),Se.a.mkdirpathForFile(s),Se.a.deleteFile(s),t.mv(s,(function(e){e?(console.log("err: "+e.toString()),Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})):(console.log("Function_DatabaseBackupController file uploaded"),Qe.responseWithJSON(r,a.a.OK,{success:"Okay files received"}))}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,qe({errorCode:a.a.FORBIDDEN,error:"Forbidden to update Backup Resource"},resourceName+"_id",resourceId))}},{key:"handleBackupDelete",value:function(e, r){var t=this.myAccessControl.can(e.locals.current_user.role).deleteAny(this.accessControlResource);if(this.logger.info("["+this.myExpressRouter.workerID+"][Function_DatabaseBackupController] handleBackupDelete - current_user.id: "+e.locals.current_user.id+" role: "+e.locals.current_user.role+" permission.granted: "+t.granted),t.granted){var n=e.locals[this.resourceName],o=this.photoBackupModule.getBackupFilePath(n);Se.a.mkdirpathForFile(o),Se.a.deleteFile(o),Qe.responseWithJSON(r,a.a.OK,{success:!0})}else Qe.responseWithJSON(r,a.a.FORBIDDEN,qe({errorCode:a.a.FORBIDDEN,error:"Forbidden to destroy Photo Resource"},resourceName+"_id",resourceId))}},{key:"handleBackupRestore",value:function(e, r){var t=this.myAccessControl.can(e.locals.current_user.role).readAny(this.accessControlResource),n=this.myAccessControl.can(e.locals.current_user.role).deleteAny(Qe.function_database_accessControlResource),o=this.myAccessControl.can(e.locals.current_user.role).createAny(Qe.function_database_accessControlResource);if(this.logger.info("["+this.myExpressRouter.workerID+"][Function_DatabaseBackupController] handleBackupRestore - current_user.id: "+e.locals.current_user.id+" role: "+e.locals.current_user.role+" permissionReadBackup.granted: "+t.granted+" permissionDelete.granted: "+n.granted+" permissionCreate.granted: "+o.granted),t.granted&&n.granted&&o.granted){var s=e.locals[this.resourceName],i=this.photoBackupModule.getBackupFilePath(s);this.photoBackupModule.restoreDatabaseWithCompressedFile(i).then((function(e){Qe.responseWithJSON(r,a.a.OK,{success:!0})})).catch((function(e){Qe.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:"Could not restore Database",more:e.toString()})}))}else Qe.responseWithJSON(r,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to destroy/create Resource: "+Qe.function_database_resourceName})}}])&&Le(r.prototype,t),n&&Le(r,n),e}();function ze(e, r, t, n, a, o, s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function He(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return Qe}));var Ve=t(19).server,Ke=t(69),$e=t(8),Ze=(t(12),t(70)),Qe=function(){function e(r,t,n,a,o,s,i,c){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.workerID=r,this.logger=t,this.bugReportLogger=n,this.logger.info("[MyExpressRouter] initialising"),this.models=s,this.firebaseAPI=a,this.expressApp=o,this.myAccessControl=i,e.redisClient=c,this.tokenHelper=new we(t),this.configureExpressApp(),this.configureController(),this.logger.info("[MyExpressRouter] initialised")}var r,t,n,s,c;return r=e,t=[{key:"configureExpressApp",value:function(){this.logger.info("[MyExpressRouter] configuring Routes App"),this.expressApp.use(this.middlewareAuthToken.bind(this)),this.expressApp.use(Ze.json({limit:"50mb"})),this.expressApp.use(Ze.urlencoded({limit:"50mb",extended:!0})),this.expressApp.use(Ke({useTempFiles:!0,tempFileDir:"/tmp/",limits:{fileSize:52428800}})),this.expressApp.param(e.days_parameter,e.paramcheckerDay.bind(this)),this.expressApp.options("/*",(function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Methods","GET,PUT,POST,DELETE,OPTIONS"),r.header("Access-Control-Allow-Headers","Content-Type, Authorization, Content-Length, X-Requested-With"),r.send(200)})),this.expressApp.get(e.custom_mealPhotoOfSchnellerTellerWesterberg,this.handleCustomWesterbergSchnellerTellerPhoto.bind(this)),this.expressApp.post(e.custom_bugReport,this.handleSendBugReport.bind(this)),this.expressApp.get(e.custom_showAllEndpoints,this.handleCustomShowAllEndpoints.bind(this)),this.expressApp.get("/loaderio-4fffcfb2d8504b146819ec8df3a58421/",this.handleVerification.bind(this)),this.expressApp.get(e.routeVersion,this.handleVersionRequest.bind(this)),this.expressApp.get(e.custom_routeSystemInformation,this.handleSystemInformationGetRequest.bind(this)),this.expressApp.post(e.custom_routeSendPushNotification,this.handleSendPushNotificationPostRequest.bind(this)),this.expressApp.get(e.custom_routeMetrics,this.handleMetricsRequest.bind(this))}},{key:"configureController",value:function(){var e=this.logger,r=this.models,t=this.expressApp,n=this.myAccessControl;this.function_BackupController=new Ge(e,r,t,n,this),this.defaultControllerHelper=new m.a(e,r,this),this.photoHelper=new Pe(e,r,this),this.addressController=new i(e,r,t,n,this),this.buildingController=new u(e,r,t,n,this),this.canteenController=new d(e,r,t,n,this),this.deviceController=new f(e,r,t,n,this),this.friendController=new g(e,r,t,n,this),this.grantListController=new b(e,r,t,n,this),this.loginController=new k(e,r,t,n,this),this.markingController=new N(e,r,t,n,this),this.tableUpdateTimesController=new S(e,r,t,n,this),this.mealController=new A(e,r,t,n,this),this.mealRatingController=new D(e,r,t,n,this),this.mealCommentController=new F(e,r,t,n,this),this.meetingController=new j(e,r,t,n,this),this.newsController=new B(e,r,t,n,this),this.permissionController=new q(e,r,t,n,this),this.residenceController=new G(e,r,t,n,this),this.roleController=new H(e,r,t,n,this),this.streamViewController=new K(e,r,t,n,this),this.universityController=new ne(e,r,t,n,this),this.userController=new X(e,r,t,n,this),this.userroleController=new ee(e,r,t,n,this),this.washerController=new be(e,r,t,n,this),this.washerjobController=new We(e,r,t,n,this),this.feedbackController=new oe(e,r,t,n,this),this.informationController=new ie(e,r,t,n,this),this.orderController=new fe(e,r,t,n,this),this.orderdetailController=new ge(e,r,t,n,this)}},{key:"handleVerification",value:function(e,r){r.set("Content-Type","text/html"),r.status(200),r.send("loaderio-4fffcfb2d8504b146819ec8df3a58421")}},{key:"middlewareAuthToken",value:function(r,t,n){var o=this.logger,s=this.workerID;if(o.info("["+s+"][MyExpressRouter] middlewareAuthToken - url: "+r.url),r.locals={},r.locals.user_id=null,r.locals.current_user={},r.locals.current_user.id=void 0,r.locals.current_user.role=$.a.roleNameGuest,r.locals.localhost=!1,r.connection.remoteAddress,this.isThisLocalhost(r))return r.locals.localhost=!0,r.locals.current_user.role=$.a.roleNameAdmin,void n();try{var i=r.headers.authorization;if(i){var c=i.split(" ")[1];this.tokenHelper.verifyToken(c,(function(o,s){if(null!=o)return"TokenExpiredError"===o.name?void e.responseWithJSON(t,a.a.UNAUTHORIZED,{error:"TokenExpiredError"}):void e.responseWithJSON(t,a.a.UNAUTHORIZED,{error:"TokenInvalid"});s?(r.locals.current_user.id=s.user_id,void 0===s.role&&(s.role=$.a.roleNameUser),r.locals.current_user.role=s.role,n()):n()}))}else n()}catch(e){o.error("["+s+"][MyExpressRouter] middlewareAuthToken - "+e.toString()),n()}}},{key:"isThisLocalhost",value:function(e){return"::ffff:127.0.1.1"===e.connection.localAddress&&"::ffff:127.0.0.1"===e.connection.remoteAddress||e.connection.localAddress===e.connection.remoteAddress}},{key:"middlewareOnlyAuthenticatedViaPlaintextSecret",value:function(r,t,n){var o=this;if(r.locals.localhost)n();else{r.locals.current_user={},r.locals.current_user.id=void 0,r.locals.current_user.role=$.a.roleNameGuest;var s=r.body.plaintextSecret;if(s){var i=parseInt(r.body.user_id);i?(this.logger.info("["+this.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - user_id: "+i+" censoredSecret: "+"x".repeat("plaintextSecret".length)),this.models.User.findOne({where:{id:i}}).then((function(c){c?c.getLogin().then((function(l){l?k.correctPlaintextSecretForUser(l,s)?(r.locals.current_user.id=c.id,r.locals.current_user.role=$.a.roleNameUser,o.logger.info("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - user_id: "+i+" correct plaintext"),o.models.UserRole.findOne({where:{UserId:c.id}}).then((function(e){if(e){var t=e.RoleId;o.models.Role.findOne({where:{id:t}}).then((function(e){e&&(r.locals.current_user.role=e.name),o.logger.info("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - user_id: "+i+" as special role: "+r.locals.current_user.role),n()})).catch((function(e){o.logger.error("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - "+e.toString())}))}else o.logger.info("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - user_id: "+i+" as default role: "+r.locals.current_user.role),n()})).catch((function(r){o.logger.error("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - "+r.toString()),e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}))):e.responseWithJSON(t,a.a.UNAUTHORIZED,{error:"WrongCredentials"}):e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:"User does not have a Login"})})).catch((function(r){o.logger.error("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - "+r.toString()),e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})})):e.responseWithJSON(t,a.a.NOT_FOUND,{error:"user_id not found",user_id:i})})).catch((function(r){o.logger.error("["+o.workerID+"][MyExpressRouter] middlewareOnlyAuthenticatedViaPlaintextSecret - "+r.toString()),e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}))):e.responseWithJSON(t,a.a.BAD_REQUEST,{error:"user_id is missing"})}else e.responseWithJSON(t,a.a.BAD_REQUEST,{error:"plaintextSecret is missing"})}}},{key:"handleMetricsRequest",value:(s=regeneratorRuntime.mark((function r(t,n){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("handleMetricsRequest"),r.next=3,Ee.getMetrics(t);case 3:o=r.sent,e.responseWithJSON(n,a.a.OK,o);case 5:case"end":return r.stop()}}),r)})),c=function(){var e=this,r=arguments;return new Promise((function(t,n){var a=s.apply(e,r);function o(e){ze(a,t,n,o,i,"next",e)}function i(e){ze(a,t,n,o,i,"throw",e)}o(void 0)}))},function(e,r){return c.apply(this,arguments)})},{key:"handleSendBugReport",value:function(r,t){var n=r.body.bugReport,o=escape(n);o=o.replace(/%20/g," "),this.bugReportLogger.info(o),e.responseWithJSON(t,a.a.OK,{success:"We received your message"});try{return r.body.message=n,r.body.label="bugreport",void this.feedbackController.handleCreate(r,t)}catch(e){}}},{key:"handleCustomWesterbergSchnellerTellerPhoto",value:function(r,t){var n=this,o=new Date;this.models.Canteen.findOne({where:{name:"Mensa Westerberg"}}).then((function(r){r&&r.id?n.models.CanteenMeal.findAll({include:[{model:n.models.Meal,include:[{model:n.models.RecipeGroup}]}],where:{CanteenId:r.id,date:o.toISOString()}}).then((function(r){if(r){for(var o=0;o<r.length;o++){var s=r[o];try{var i=s.Meal.RecipeGroup.name;if("KM Schneller Teller"===i||"KM Express"===i){var c=s.Meal.id;return void n.photoHelper.findOrCreateResolutionImage(e.meal_resourceName,c,Pe.highResTag,!0,!0).then((function(e){if(e)t.sendFile(e);else{var r=$e.realpathSync(".")+"/src/data/photos/custom/FotoLeererTellerZubereitung.jpg";t.sendFile(r)}})).catch((function(r){e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}))}}catch(r){return void e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}}e.responseWithJSON(t,a.a.NOT_FOUND,{error:"No ExpressMenu not found"})}else e.responseWithJSON(t,a.a.NOT_FOUND,{error:"No Meal CanteenMealOffer not found"})})).catch((function(r){e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})})):e.responseWithJSON(t,a.a.NOT_FOUND,{error:e.canteen_resourceName+" not found"})})).catch((function(r){e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}))}},{key:"handleCustomShowAllEndpoints",value:function(r,t){if(this.myAccessControl.can(r.locals.current_user.role).readAny(e.adminRoutes_accessControlResource).granted)try{console.log("handleShowAllEndpoints");var n=this.expressApp.router.stack;e.responseWithJSON(t,a.a.OK,n)}catch(r){e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:r.toString()})}else e.responseWithJSON(t,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to see all endpoints: "})}},{key:"handleVersionRequest",value:function(r,t){var n={version:e.serverAPIVersion};e.responseWithJSON(t,a.a.OK,n)}},{key:"handleSystemInformationGetRequest",value:function(r,t){this.logger.info("System Information Request"),this.myAccessControl.can(r.locals.current_user.role).readAny(e.adminRoutes_accessControlResource).granted?e.redisClient.get(o.a.redisKey,(function(r,n){var o=JSON.parse(n);e.responseWithJSON(t,a.a.OK,o)})):e.responseWithJSON(t,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get System Informations"})}},{key:"handleSendPushNotificationPostRequest",value:function(r,t){var n=this;if(this.myAccessControl.can(r.locals.current_user.role).createAny(e.adminRoutes_accessControlResource).granted){this.logger.info("Received a Post Request to send a Message to Devices");var o=r.body.title,s=r.body.body,i=r.body.badge,c=r.body.listOfDeviceIDs;this.firebaseAPI.sendPushNotification(c,o,s,i).then((function(r){n.logger.info("Sending: "+c.length+" tokens"),e.responseWithJSON(t,a.a.OK,r)})).catch((function(r){n.logger.error("Send Notification created an error"),n.logger.error(r.toString()),e.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,answer)}))}else e.responseWithJSON(t,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get System Informations"})}}],n=[{key:"responseWithJSON",value:function(e,r,t){e.status(r),e.header("Content-Type","application/json"),e.header("Access-Control-Allow-Headers","Content-Type"),e.header("Access-Control-Allow-Origin","*"),e.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),e.header("Access-Control-Allow-Headers","Content-Type, Authorization, Content-Length, X-Requested-With");var n=JSON.stringify(t);e.end(n)}},{key:"responseToFileUpload",value:function(e,r){e.status(r),e.header("Access-Control-Allow-Origin","*"),e.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),e.header("Access-Control-Allow-Headers","Content-Type, Authorization, Content-Length, X-Requested-With"),e.end()}},{key:"paramcheckerDay",value:function(r,t,n,o){var s=/^(\d{1,2})[-](\d{1,2})[-](\d{4})$/.exec(o);if(null==s)return!1;var i=s[1],c=s[2],l=s[3],u=U.a.validateAndFormatDate(i,c,l);u?(r.locals.date=u,n()):e.responseWithJSON(t,a.a.BAD_REQUEST,{error:"date has wrong format",date:o})}}],t&&He(r.prototype,t),n&&He(r,n),e}();Qe.urlAPI="/api",Qe.serverAPIVersion=Ve.serverAPIVersion,Qe.redisClient=null,Qe.days_parameter="date",Qe.routeVersion=Qe.urlAPI+"/version",Qe.routeFunctions=Qe.urlAPI+"/functions",Qe.function_backup_resource_id_parameter="backup_id",Qe.function_backup_routeIdentifier="/backups",Qe.function_backup_resourceName="backup",Qe.function_backup_accessControlResouce="Function_DatabaseBackup",Qe.function_database_resourceName="database",Qe.function_database_accessControlResource="Function_Database",Qe.building_resource_id_parameter="building_id",Qe.building_routeIdentifier="/buildings",Qe.building_resourceName="building",Qe.building_accessControlResource="Building",Qe.canteen_resource_id_parameter="canteen_id",Qe.canteen_routeIdentifier="/canteens",Qe.canteen_resourceName="canteen",Qe.canteen_accessControlResource="Canteen",Qe.device_resource_id_parameter="device_id",Qe.device_routeIdentifier="/devices",Qe.device_resourceName="device",Qe.device_accessControlResource="Device",Qe.friend_resource_id_parameter="friend_id",Qe.friend_routeIdentifier="/friends",Qe.friend_resourceName="friend",Qe.friend_accessControlResource="Friend",Qe.feedback_resource_id_parameter="feedback_id",Qe.feedback_routeIdentifier="/feedbacks",Qe.feedback_resourceName="feedback",Qe.feedback_accessControlResource="Feedback",Qe.friendrequest_resource_id_parameter="friendrequest_id",Qe.friendrequest_routeIdentifier="/friendrequests",Qe.friendrequest_resourceName="friendrequest",Qe.friendrequest_accessControlResource="FriendRequest",Qe.information_resource_id_parameter="information_id",Qe.information_routeIdentifier="/informations",Qe.information_resourceName="information",Qe.information_accessControlResource="Information",Qe.login_resource_id_parameter="login_id",Qe.login_routeIdentifier="/logins",Qe.login_resourceName="login",Qe.login_accessControlResource="Login",Qe.tableUpdateTimes_accessControlResource="TableUpdateTimes",Qe.tableUpdateTimes_routeIdentifier="/tableUpdateTimes",Qe.tableUpdateTimes_resourceName="TableUpdateTime",Qe.marking_resource_id_parameter="marking_id",Qe.marking_routeIdentifier="/markings",Qe.marking_resourceName="marking",Qe.marking_accessControlResource="Marking",Qe.meal_resource_id_parameter="meal_id",Qe.meal_routeIdentifier="/meals",Qe.meal_resourceName="meal",Qe.meal_accessControlResource="Meal",Qe.mealcomment_resource_id_parameter="mealcomment_id",Qe.mealcomment_routeIdentifier="/mealcomments",Qe.mealcomment_resourceName="mealcomment",Qe.mealcomment_accessControlResource="MealComment",Qe.mealrating_resource_id_parameter="mealrating_id",Qe.mealrating_routeIdentifier="/mealratings",Qe.mealrating_resourceName="mealrating",Qe.mealrating_accessControlResource="MealRating",Qe.meeting_resource_id_parameter="meeting_id",Qe.meeting_routeIdentifier="/meetings",Qe.meeting_resourceFindIdentifier="/meetingFind",Qe.meeting_resourceName="meeting",Qe.meeting_accessControlResource="Meeting",Qe.news_resource_id_parameter="news_id",Qe.news_routeIdentifier="/news",Qe.news_resourceName="news",Qe.news_accessControlResource="News",Qe.order_resource_id_parameter="order_id",Qe.order_routeIdentifier="/orders",Qe.order_resourceName="order",Qe.order_accessControlResource="Orders",Qe.orderdetail_resource_id_parameter="orderdetail_id",Qe.orderdetail_routeIdentifier="/orderdetails",Qe.orderdetail_resourceName="orderdetail",Qe.orderdetail_accessControlResource="OrderDetail",Qe.permissions_routeIdentifier="/permissions",Qe.permissions_resourceName="permissions",Qe.permissions_accessControlResource="Permissions",Qe.residence_resource_id_parameter="residence_id",Qe.residence_routeIdentifier="/residences",Qe.residence_resourceName="residence",Qe.residence_accessControlResource="Residence",Qe.role_resource_id_parameter="role_id",Qe.role_routeIdentifier="/roles",Qe.role_resourceName="role",Qe.role_accessControlResource="Role",Qe.streamview_resource_id_parameter="streamview_id",Qe.streamview_routeIdentifier="/streamviews",Qe.streamview_resourceName="streamview",Qe.streamview_accessControlResource="StreamView",Qe.user_resource_id_parameter="user_id",Qe.user_routeIdentifier="/users",Qe.user_resourceName="user",Qe.user_accessControlResource="User",Qe.user_accessToken_accessControlResource="AccessToken",Qe.user_favoriteMeals_accessControlResource="UserFavoriteMeal",Qe.userWasherNotification_routeIdentifier="/washerNotifications",Qe.userWasherNotification_accessControlResource="UserWasherNotification",Qe.userrole_routeIdentifier="/userroles",Qe.userrole_resourceName="userrole",Qe.userrole_accessControlResource="UserRole",Qe.university_resource_id_parameter="university_id",Qe.university_routeIdentifier="/universities",Qe.university_resourceName="university",Qe.university_accessControlResource="University",Qe.washer_resource_id_parameter="washer_id",Qe.washer_routeIdentifier="/washers",Qe.washer_resourceName="washer",Qe.washer_accessControlResource="Washer",Qe.washerjob_resource_id_parameter="washerjob_id",Qe.washerjob_routeIdentifier="/washerjobs",Qe.washerjob_resourceName="washerjob",Qe.washerjob_accessControlResource="WasherJob",Qe.userMarking_accessControlResource="UserMarkings",Qe.markingUsers_accessControlResource="MarkingUsers",Qe.function_routeBackups=Qe.routeFunctions+Qe.function_backup_routeIdentifier,Qe.function_routeBackupCreate=Qe.function_routeBackups+"create",Qe.function_routeBackup=Qe.function_routeBackups+"/:"+Qe.function_backup_resource_id_parameter,Qe.function_routeBackupDownload=Qe.function_routeBackup+"/download",Qe.function_routeBackupRestore=Qe.function_routeBackup+"/restore",Qe.building_routeResources=Qe.urlAPI+Qe.building_routeIdentifier,Qe.building_routeResource=Qe.building_routeResources+"/:"+Qe.building_resource_id_parameter,Qe.building_routeResourcePhotos=Qe.building_routeResource+"/photos",Qe.canteen_routeResources=Qe.urlAPI+Qe.canteen_routeIdentifier,Qe.canteen_routeResource=Qe.canteen_routeResources+"/:"+Qe.canteen_resource_id_parameter,Qe.canteen_routeCanteenAtDay=Qe.canteen_routeResource+"/days/:"+Qe.days_parameter,Qe.canteen_routeCanteenMealsAtDay=Qe.canteen_routeCanteenAtDay+"/meals",Qe.canteen_routeCanteenPopularTimeAtDay=Qe.canteen_routeCanteenAtDay+"/populartimes",Qe.device_routeResources=Qe.urlAPI+Qe.device_routeIdentifier,Qe.device_routeResource=Qe.device_routeResources+"/:"+Qe.device_resource_id_parameter,Qe.device_routeStreamViews=Qe.device_routeResource+Qe.streamview_routeIdentifier,Qe.feedback_routeResources=Qe.urlAPI+Qe.feedback_routeIdentifier,Qe.feedback_routeResource=Qe.feedback_routeResources+"/:"+Qe.feedback_resource_id_parameter,Qe.friend_routeResources=Qe.urlAPI+Qe.friend_routeIdentifier,Qe.information_routeResources=Qe.urlAPI+Qe.information_routeIdentifier,Qe.information_routeResource=Qe.information_routeResources+"/:"+Qe.information_resource_id_parameter,Qe.login_routeResources=Qe.urlAPI+Qe.login_routeIdentifier,Qe.login_routeResource=Qe.login_routeResources+"/:"+Qe.login_resource_id_parameter,Qe.marking_routeResources=Qe.urlAPI+Qe.marking_routeIdentifier,Qe.marking_routeResource=Qe.marking_routeResources+"/:"+Qe.marking_resource_id_parameter,Qe.marking_routeAssociationUsers=Qe.marking_routeResource+"/users",Qe.tableUpdateTimes_routeResources=Qe.urlAPI+Qe.tableUpdateTimes_routeIdentifier,Qe.meal_routeResources=Qe.urlAPI+Qe.meal_routeIdentifier,Qe.meal_routeResource=Qe.meal_routeResources+"/:"+Qe.meal_resource_id_parameter,Qe.meal_routeResourcePhotos=Qe.meal_routeResource+"/photos",Qe.meal_routeResourceUsersFavorite=Qe.meal_routeResource+"/usersFavorite",Qe.mealcomment_routeResources=Qe.urlAPI+Qe.mealcomment_routeIdentifier,Qe.mealcomment_routeResource=Qe.mealcomment_routeResources+"/:"+Qe.mealcomment_resource_id_parameter,Qe.mealrating_routeResources=Qe.urlAPI+Qe.mealrating_routeIdentifier,Qe.mealrating_routeResource=Qe.mealrating_routeResources+"/:"+Qe.mealrating_resource_id_parameter,Qe.meeting_routeResources=Qe.urlAPI+Qe.meeting_routeIdentifier,Qe.meeting_routeResource=Qe.meeting_routeResources+"/:"+Qe.meeting_resource_id_parameter,Qe.meeting_routeResourcFind=Qe.urlAPI+Qe.meeting_resourceFindIdentifier,Qe.news_routeResources=Qe.urlAPI+Qe.news_routeIdentifier,Qe.news_routeResource=Qe.news_routeResources+"/:"+Qe.news_resource_id_parameter,Qe.order_routeResources=Qe.urlAPI+Qe.order_routeIdentifier,Qe.order_routeResource=Qe.order_routeResources+"/:"+Qe.order_resource_id_parameter,Qe.orderdetail_routeResources=Qe.urlAPI+Qe.orderdetail_routeIdentifier,Qe.orderdetail_routeResource=Qe.orderdetail_routeResources+"/:"+Qe.orderdetail_resource_id_parameter,Qe.permission_routeResources=Qe.urlAPI+Qe.permissions_routeIdentifier,Qe.permission_routeOwn=Qe.permission_routeResources+"/own",Qe.residence_routeResources=Qe.urlAPI+Qe.residence_routeIdentifier,Qe.residence_routeResource=Qe.residence_routeResources+"/:"+Qe.residence_resource_id_parameter,Qe.residence_routeResourceWashers=Qe.residence_routeResource+"/washers",Qe.residence_routeAssociationUsersAccessControll="ResidenceUsers",Qe.residence_routeAssociationUsers=Qe.residence_routeResource+"/users",Qe.role_routeResources=Qe.urlAPI+Qe.role_routeIdentifier,Qe.role_routeResource=Qe.role_routeResources+"/:"+Qe.role_resource_id_parameter,Qe.streamview_routeResources=Qe.urlAPI+Qe.streamview_routeIdentifier,Qe.streamview_routeResource=Qe.streamview_routeResources+"/:"+Qe.streamview_resource_id_parameter,Qe.user_routeResources=Qe.urlAPI+Qe.user_routeIdentifier,Qe.user_routeResource=Qe.user_routeResources+"/:"+Qe.user_resource_id_parameter,Qe.user_routeAmount=Qe.urlAPI+"/usersAmount",Qe.user_routeUserGetNewToken=Qe.user_routeResource+"/newToken",Qe.user_routeUserPrivacyPolicyRead=Qe.user_routeResource+"/privacyPoliceRead",Qe.user_routeUsersDevice=Qe.user_routeResource+"/device",Qe.user_routeUsersFavoriteMeals=Qe.user_routeResource+"/favoriteMeals",Qe.user_routeUsersFavoriteMeal=Qe.user_routeUsersFavoriteMeals+"/:"+Qe.meal_resource_id_parameter,Qe.user_routeUsersFriends=Qe.user_routeResource+"/friends",Qe.user_routeUsersFriend=Qe.user_routeUsersFriends+"/:"+Qe.friend_resource_id_parameter,Qe.user_routeUsersFriendRequests=Qe.user_routeResource+"/friendrequests",Qe.user_routeUsersFriendRequest=Qe.user_routeUsersFriendRequests+"/:"+Qe.friendrequest_resource_id_parameter,Qe.user_routeMarkings=Qe.user_routeResource+Qe.marking_routeIdentifier,Qe.user_routeMarking=Qe.user_routeMarkings+"/:"+Qe.marking_resource_id_parameter,Qe.user_routeWasherNotifications=Qe.user_routeResource+Qe.userWasherNotification_routeIdentifier,Qe.user_routeWasherNotification=Qe.user_routeWasherNotifications+"/:"+Qe.washer_resource_id_parameter,Qe.userrole_routeResources=Qe.urlAPI+Qe.userrole_routeIdentifier,Qe.userrole_routeResource=Qe.userrole_routeResources+"/user/:"+Qe.user_resource_id_parameter+"/role/:"+Qe.role_resource_id_parameter,Qe.userrole_routeResourceForUser=Qe.userrole_routeResources+"/user/:"+Qe.user_resource_id_parameter,Qe.university_routeResources=Qe.urlAPI+Qe.university_routeIdentifier,Qe.university_routeResource=Qe.university_routeResources+"/:"+Qe.university_resource_id_parameter,Qe.university_routeResourceBuildings=Qe.university_routeResource+Qe.building_routeIdentifier,Qe.university_routeResourceBuilding=Qe.university_routeResourceBuildings+"/:"+Qe.building_resource_id_parameter,Qe.washer_routeResources=Qe.urlAPI+Qe.washer_routeIdentifier,Qe.washer_routeResource=Qe.washer_routeResources+"/:"+Qe.washer_resource_id_parameter,Qe.washer_routeAssociationWasherJobAccessControll="WasherWasherJobs",Qe.washer_routeAssociationWasherJobs=Qe.washer_routeResource+Qe.washerjob_routeIdentifier,Qe.washerjob_routeResources=Qe.urlAPI+Qe.washerjob_routeIdentifier,Qe.washerjob_routeResource=Qe.washerjob_routeResources+"/:"+Qe.washerjob_resource_id_parameter,Qe.custom_routeIdentifier="/custom",Qe.custom_routeResources=Qe.urlAPI+Qe.custom_routeIdentifier,Qe.adminRoutes_accessControlResource="AdminFunctions",Qe.custom_routeMetrics=Qe.custom_routeResources+"/metrics",Qe.custom_bugReport=Qe.custom_routeResources+"/bugReport",Qe.custom_mealPhotoOfSchnellerTellerWesterberg=Qe.custom_routeResources+"/photoSchnellerTellerWesterberg",Qe.custom_showAllEndpoints=Qe.custom_routeResources+"/showAllEndpoints",Qe.custom_routeSystemInformation=Qe.custom_routeResources+"/systemInformation",Qe.custom_routeSendPushNotification=Qe.custom_routeResources+"/sendNotification"},function(e,r,t){"use strict";t.d(r,"a",(function(){return p}));var n=t(0),a=t.n(n),o=t(1);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=t(30).Op,p=(t(62).performance,function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.models=t,this.myExpressRouter=n}var r,t,n,i,p,d,m,h,f,v,g;return r=e,t=[{key:"updateTableUpdateTimes",value:(g=c(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return n=r.name,e.next=4,this.updateTableUpdateTimesByTableName(n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return g.apply(this,arguments)})},{key:"updateTableUpdateTimesByTableName",value:(v=c(regeneratorRuntime.mark((function r(t){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.updateTableUpdateTimesByTableNameAndModels(t,this.models,this.myExpressRouter.workerID,this.logger);case 2:case"end":return r.stop()}}),r,this)}))),function(e){return v.apply(this,arguments)})},{key:"paramcheckerResourceId",value:function(e,r,t,n,i,l,u,p){var d=this;this.logger.info("[DefaultControllerHelper] paramcheckerResourceId - "+u+" resource_id: "+n),i.findOne({where:{id:n}}).then(function(){var i=c(regeneratorRuntime.mark((function i(c){var l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c){i.next=5;break}return o.a.responseWithJSON(r,a.a.NOT_FOUND,s({error:u+"_id not found"},u+"_id",n)),i.abrupt("return");case 5:if(e.locals[u]=c,!p){i.next=11;break}return i.next=9,p(e,c);case 9:l=i.sent,e.locals[u+"isOwn"]=l;case 11:t();case 12:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){d.logger.error("[DefaultControllerHelper] paramcheckerResourceId - "+e.toString()),o.a.responseWithJSON(r,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))}},{key:"parseOperatorContent",value:function(e){console.log("parseOperatorContent");for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];console.log("key: "+n);var a=e[n];if(console.log("content: "+a),a&&a.startsWith("{")&&a.endsWith("}")){for(var o=JSON.parse(a),s=Object.keys(o),i=0;i<s.length;i++){var c=s[t];console.log("operator: "+c),o[u[c]]=o[c],delete o[c]}e[n]=o}}return e}},{key:"handleIndex",value:(f=c(regeneratorRuntime.mark((function r(t,n,s,i,c,l){var u,p,d,m,h,f,v,g,x,b=this,y=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=y.length>6&&void 0!==y[6]?y[6]:[],p=y.length>7?y[7]:void 0,d=y.length>8?y[8]:void 0,m=o.a.redisClient,h=t.locals.current_user.role,f=i.can(t.locals.current_user.role).readAny(c),d&&(f=d),!f.granted){r.next=33;break}if(0===Object.keys(t.query).length){r.next=26;break}console.log("req.query"),console.log(JSON.stringify(t.query)),delete(v=JSON.parse(JSON.stringify(t.query))).limit,delete v.order,g=f.filter(v),g=this.parseOperatorContent(g),console.log("queryFiltered:"),console.log(JSON.stringify(g)),x={include:u,where:g},t.query.limit&&(x.limit=parseInt(t.query.limit)),t.query.order&&(x.order=JSON.parse(t.query.order)),s.findAll(x).then((function(r){b.logger.info("[DefaultControllerHelper] handleIndex - "+l+" with query: "+JSON.stringify(t.query)),console.log("[DefaultControllerHelper] handleIndex found: "+r.length),e.respondWithPermissionFilteredResources(t,n,r,f)})).catch((function(e){b.logger.error("[DefaultControllerHelper] handleIndex - "+l+" with query: "+JSON.stringify(t.query)+" - "+e.toString()),o.a.responseWithJSON(n,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})),r.next=31;break;case 26:if(!p){r.next=30;break}m.get(h+":"+p,(function(r,t){if(t){var i=JSON.parse(t);b.logger.info("[DefaultControllerHelper] handleIndex - "+l+" found in cache for role: "+h),o.a.responseWithJSON(n,a.a.OK,i)}else s.findAll({include:u}).then((function(r){var t=e.filterResourcesWithPermission(r,f);m.setex(h+":"+p,120,JSON.stringify(t)),b.logger.info("[DefaultControllerHelper] handleIndex - "+l+" not found in cache for role: "+h),o.a.responseWithJSON(n,a.a.OK,t)})).catch((function(e){b.logger.error("[DefaultControllerHelper] handleIndex - "+l+" found in cache for role: "+h+" - "+e.toString()),o.a.responseWithJSON(n,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))})),r.next=31;break;case 30:return r.abrupt("return",s.findAll({include:u}).then((function(r){e.respondWithPermissionFilteredResources(t,n,r,f)})).catch((function(e){b.logger.error("["+b.myExpressRouter.workerID+"][DefaultControllerHelper] handleIndex - "+e.toString()),o.a.responseWithJSON(n,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})})));case 31:r.next=34;break;case 33:o.a.responseWithJSON(n,a.a.FORBIDDEN,{errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource: "+l});case 34:case"end":return r.stop()}}),r,this)}))),function(e,r,t,n,a,o){return f.apply(this,arguments)})},{key:"handleCreate",value:(h=c(regeneratorRuntime.mark((function e(r,t,n,i,c,l,u){var p,d,m,h=this,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=f.length>7&&void 0!==f[7]&&f[7],d=f.length>8&&void 0!==f[8]&&f[8],m=i.can(r.locals.current_user.role).createAny(c),u&&(m=i.can(r.locals.current_user.role).createOwn(c)),this.logger.info("["+this.myExpressRouter.workerID+"][DefaultControllerHelper] handleCreate - "+l+" current_user: "+r.locals.current_user.id+" granted: "+m.granted),!m.granted){e.next=9;break}return e.abrupt("return",n.save().then((function(e){return r.locals[l]=e,d||h.handleGet(r,t,i,c,l,u),h.updateTableUpdateTimes(n.constructor,p),console.log("DefaultControllerHelper handleCreate savedResource"),console.log(e),e})).catch((function(e){return console.log(e),h.logger.error("["+h.myExpressRouter.workerID+"][DefaultControllerHelper] handleCreate - "+e.toString()),o.a.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{errorCode:a.a.INTERNAL_SERVER_ERROR,error:e.toString()}),null})));case 9:return o.a.responseWithJSON(t,a.a.FORBIDDEN,s({errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource"},l+"_id",n.id)),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n,a,o,s){return h.apply(this,arguments)})},{key:"handleGet",value:(m=c(regeneratorRuntime.mark((function r(t,n,i,c,l,u){var p,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:p=t.locals[l],d=i.can(t.locals.current_user.role).readAny(c),u&&(d=i.can(t.locals.current_user.role).readOwn(c)),d.granted?e.respondWithPermissionFilteredResource(t,n,p,d):o.a.responseWithJSON(n,a.a.FORBIDDEN,s({errorCode:a.a.FORBIDDEN,error:"Forbidden to get Resource"},l+"_id",p.id));case 4:case"end":return r.stop()}}),r)}))),function(e,r,t,n,a,o){return m.apply(this,arguments)})},{key:"handleUpdate",value:(d=c(regeneratorRuntime.mark((function e(r,t,n,i,c,l){var u,p,d,m,h=this,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=f.length>6&&void 0!==f[6]&&f[6],p=r.locals[c],d=n.can(r.locals.current_user.role).updateAny(i),l&&(d=n.can(r.locals.current_user.role).updateOwn(i)),this.logger.info("["+this.myExpressRouter.workerID+"][DefaultControllerHelper] handleUpdate - "+c+" current_user: "+r.locals.current_user.id+" granted: "+d.granted),d.granted?(this.logger.info("["+this.myExpressRouter.workerID+"][DefaultControllerHelper] handleUpdate - "+c+" current_user:"+r.locals.current_user.id+" body: "+JSON.stringify(r.body)),m=d.filter(r.body),this.logger.info("["+this.myExpressRouter.workerID+"][DefaultControllerHelper] handleUpdate - "+c+" current_user:"+r.locals.current_user.id+" allowedAttributesToUpdate: "+JSON.stringify(m)),p.update(m).then((function(e){r.locals[c]=e,h.handleGet(r,t,n,i,c,l),h.updateTableUpdateTimes(p.constructor,u)})).catch((function(e){h.logger.error("["+h.myExpressRouter.workerID+"][DefaultControllerHelper] handleUpdate - "+e.toString()),o.a.responseWithJSON(t,a.a.INTERNAL_SERVER_ERROR,{error:e.toString()})}))):o.a.responseWithJSON(t,a.a.FORBIDDEN,s({errorCode:a.a.FORBIDDEN,error:"Forbidden to update Resource"},c+"_id",p.id));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n,a,o){return d.apply(this,arguments)})},{key:"handleDelete",value:(p=c(regeneratorRuntime.mark((function r(t,n,i,c,l,u){var p,d,m,h,f=this,v=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:p=v.length>6&&void 0!==v[6]&&v[6],console.log("Helper handleDelete"),d=t.locals[l],console.log("Found Resource: "+!!d),m=i.can(t.locals.current_user.role).deleteAny(c),u&&(m=i.can(t.locals.current_user.role).deleteOwn(c)),this.logger.info("["+this.myExpressRouter.workerID+"][DefaultControllerHelper] handleDelete - "+l+" current_user: "+t.locals.current_user.id+" granted: "+m.granted),m.granted?(h=d.constructor,d.destroy().then((function(r){e.respondWithDeleteMessage(t,n),f.updateTableUpdateTimes(h,p)})).catch((function(e){f.logger.error("["+f.myExpressRouter.workerID+"][DefaultControllerHelper] handleDelete - "+l+" "+e.toString()),o.a.responseWithJSON(n,a.a.INTERNAL_SERVER_ERROR,{errorCode:a.a.INTERNAL_SERVER_ERROR,error:e.toString()})}))):o.a.responseWithJSON(n,a.a.FORBIDDEN,s({errorCode:a.a.FORBIDDEN,error:"Forbidden to destroy Resource"},l+"_id",d.id));case 8:case"end":return r.stop()}}),r,this)}))),function(e,r,t,n,a,o){return p.apply(this,arguments)})}],n=[{key:"updateTableUpdateTimesByTableNameAndModels",value:(i=c(regeneratorRuntime.mark((function e(r,t,n,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.TableUpdateTimes.findOne({where:{tableName:r}});case 3:if(!(o=e.sent)){e.next=9;break}o.changed("updatedAt",!0),o.save(),e.next=12;break;case 9:return o=t.TableUpdateTimes.build({tableName:r}),e.next=12,o.save();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a.error("["+n+"][DefaultControllerHelper] updateTableUpdateTimes - "+e.t0.toString());case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(e,r,t,n){return i.apply(this,arguments)})},{key:"getResourceAsJSON",value:function(e){return e.get({plain:!0})}},{key:"filterResourcesWithPermission",value:function(r,t){return r.map((function(r){return e.filterResourceWithPermission(r,t)}))}},{key:"filterResourceWithPermission",value:function(r,t){return t.filter(e.getResourceAsJSON(r))}},{key:"respondWithPermissionFilteredResources",value:function(r,t,n,s){var i=e.filterResourcesWithPermission(n,s);o.a.responseWithJSON(t,a.a.OK,i)}},{key:"respondWithPermissionFilteredResource",value:function(r,t,n,s){var i=e.filterResourceWithPermission(n,s);o.a.responseWithJSON(t,a.a.OK,i)}},{key:"respondWithDeleteMessage",value:function(e,r){o.a.responseWithJSON(r,a.a.OK,{success:!0})}}],t&&l(r.prototype,t),n&&l(r,n),e}())},function(e,r,t){"use strict";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return a}));var a=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,a;return r=e,a=[{key:"diff_seconds",value:function(e,r){return(e.getTime()-r.getTime())/1e3}},{key:"diff_minutes_abs",value:function(r,t){var n=e.diff_seconds(r,t);return n/=60,Math.abs(Math.round(n))}},{key:"roundDownToNextMilliSeconds",value:function(e,r){return new Date(Math.round(e.getTime()/r)*r)}},{key:"roundUpToNextMilliSeconds",value:function(e,r){return new Date(Math.ceil(e.getTime()/r)*r)}},{key:"addHoursToDate",value:function(e,r){var t=new Date(e);return t.setTime(t.getTime()+60*r*60*1e3),t}},{key:"dateToYYYYMMDDHHMMSS",value:function(e){var r=e,t=r.getDate(),n=r.getMonth()+1,a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),r.getFullYear()+""+n+t+a+o+s}},{key:"pad",value:function(e,r){for(var t=e+"";t.length<r;)t="0"+t;return t}},{key:"validateAndFormatDate",value:function(e,r,t){var n=new Date(t+"/"+r+"/"+e),a=parseInt(e),o=parseInt(r),s=parseInt(t);return isNaN(a)||isNaN(o)||isNaN(s)?null:n.getDate()===a&&n.getMonth()===o-1&&n.getFullYear()===s?n:null}}],(t=null)&&n(r.prototype,t),a&&n(r,a),e}()},function(e,r,t){"use strict";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return s}));var a=t(8),o=t(5),s=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,s;return r=e,s=[{key:"mkdirpath",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{a.mkdirSync(e,{recursive:r})}catch(e){e.code}}},{key:"doesPathExist",value:function(e){return a.existsSync(e)}},{key:"mkdirpathForFile",value:function(r){var t=o.dirname(r);e.mkdirpath(t)}},{key:"deleteFile",value:function(e){try{a.unlinkSync(e)}catch(e){e.code}}},{key:"readFileAsString",value:function(e){return a.readFileSync(e)}},{key:"readFileAsJSON",value:function(r){var t=e.readFileAsString(r);return JSON.parse(t)}},{key:"writeFile",value:function(e,r,t){mkdirp(getDirName(e),(function(n){if(n)return t(n);a.writeFile(e,r,t)}))}},{key:"getAllFilesFormPath",value:function(e){if(!e)return null;var r=[];return a.existsSync(e)&&a.readdirSync(e).forEach((function(t,n){var o=e+"/"+t;a.lstatSync(o).isDirectory()||/(^|\/)\.[^\/\.]/g.test(t)||r.push(t)})),r}},{key:"deleteFolderRecursive",value:function(r){void 0!==r&&a.existsSync(r)&&(a.readdirSync(r).forEach((function(t,n){var o=r+"/"+t;a.lstatSync(o).isDirectory()?e.deleteFolderRecursive(o):a.unlinkSync(o)})),a.rmdirSync(r))}},{key:"getCreatedDate",value:function(e){return a.statSync(e).birthtime}},{key:"getFileUpdatedDate",value:function(e){return a.statSync(e).mtime}}],(t=null)&&n(r.prototype,t),s&&n(r,s),e}()},function(e,r){e.exports=require("path")},function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));var n=t(1);function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=t(121),s=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[MyAccessControl] initialising"),this.models=t,this.initialiseAccessControlInstance(),this.initialisePermissions(),this.logger.info("[MyAccessControl] initialised")}var r,t,s;return r=e,s=[{key:"getInheritedRolesOf",value:function(e,r){return r.getInheritedRolesOf(e)}},{key:"inheritatesOrIsSameRole",value:function(r,t,n){return r===t||e.isFirstRoleRealyHigher(r,t,n)}},{key:"isFirstRoleRealyHigher",value:function(r,t,n){return e.getInheritedRolesOf(r,n).indexOf(t)>=0}}],(t=[{key:"initialiseAccessControlInstance",value:function(){this.ac=new o}},{key:"getAccessControlInstance",value:function(){return this.ac}},{key:"initialisePermissions",value:function(){this.logger.info("[MyAccessControl] initialisePermissions");var r=this.getAccessControlInstance();r.grant(e.roleNameGuest),r.grant(e.roleNameUser),r.grant(e.roleNameModerator),r.grant(e.roleNameAdmin),r.grant(e.roleNameOwner),this.initGuestPermissions(),this.initUserPermissions(),this.initModeratorPermissions(),this.initSuperModeratorPermissions(),this.initAdminPermissions(),r.grant(e.roleNameOwner).extend(e.roleNameAdmin),this.logger.info("[MyAccessControl] initialisePermissions finished"),this.ac=r}},{key:"initGuestPermissions",value:function(){var r=this.getAccessControlInstance();r.grant(e.roleNameGuest).readAny("Address",["id","street","number","city","zip","country"]),r.grant(e.roleNameGuest).readAny(n.a.building_accessControlResource,["id","short","name","moreInformation","latitude","longitude","photoCopyright","opening_time_monday","closing_time_monday","opening_time_tuesday","closing_time_tuesday","opening_time_wednesday","closing_time_wednesday","opening_time_thursday","closing_time_thursday","opening_time_friday","closing_time_friday","opening_time_saturday","closing_time_saturday","opening_time_sunday","closing_time_sunday","Canteens","Universities","Residences"]),r.grant(e.roleNameGuest).readAny("BuildingGetPopularTimes"),r.grant(e.roleNameGuest).readAny(n.a.tableUpdateTimes_accessControlResource,["*"]),r.grant(e.roleNameGuest).readAny(n.a.canteen_accessControlResource,["id","name","opening_time_monday","closing_time_monday","opening_time_tuesday","closing_time_tuesday","opening_time_wednesday","closing_time_wednesday","opening_time_thursday","closing_time_thursday","opening_time_friday","closing_time_friday","opening_time_saturday","closing_time_saturday","opening_time_sunday","closing_time_sunday","BuildingId"]),r.grant(e.roleNameGuest).readOwn(n.a.feedback_accessControlResource,["message","label","id","createdAt"]),r.grant(e.roleNameGuest).createOwn(n.a.feedback_accessControlResource,["message","label"]),r.grant(e.roleNameGuest).readAny(n.a.information_accessControlResource,["label","value","datatype","createdAt","updatedAt"]),r.grant(e.roleNameGuest).readAny(n.a.residence_accessControlResource,["id","BuildingId","name","size","rooms","description","livingWithChild","livingWithHandicap","singleFlat","available","available_from","available_contact"]),r.grant(e.roleNameGuest).readAny(n.a.marking_accessControlResource,["id","classification","label","description"]),r.grant(e.roleNameGuest).readAny(n.a.meal_accessControlResource,["id","name","nameEng","text1","text2","text3","text4","text5","text6","text1Eng","text2Eng","text3Eng","text4Eng","text5Eng","text6Eng","calorie","rating_average","rating_amount","photos","updatedAt"]),r.grant(e.roleNameGuest).readAny("MealGetAllergens"),r.grant(e.roleNameGuest).readAny(n.a.mealrating_accessControlResource,["CanteenId","MealId","value"]),r.grant(e.roleNameGuest).readAny(n.a.news_accessControlResource,["title","abstract","date","imageURL","externURL"]),r.grant(e.roleNameGuest).createOwn(n.a.order_accessControlResource,["CanteenId","timeslot","orderDetails"]),r.grant(e.roleNameGuest).readAny(n.a.order_accessControlResource,["CanteenId","timeslot"]),r.grant(e.roleNameGuest).readOwn(n.a.order_accessControlResource,["id","timeslot","CanteenId","token"]),r.grant(e.roleNameGuest).deleteOwn(n.a.order_accessControlResource),r.grant(e.roleNameGuest).createOwn(n.a.orderdetail_accessControlResource,["amount","MealId"]),r.grant(e.roleNameGuest).readOwn(n.a.orderdetail_accessControlResource,["id","amount","MealId","OrderId"]),r.grant(e.roleNameGuest).readOwn(n.a.permissions_accessControlResource,["*"]),r.grant(e.roleNameGuest).readAny("PopularTime",["id","date","time","traffic"]),r.grant(e.roleNameGuest).readAny(n.a.university_accessControlResource,["id","name",n.a.building_accessControlResource]),r.grant(e.roleNameGuest).readAny("UniversityGetAddress"),r.grant(e.roleNameGuest).createOwn(n.a.user_accessControlResource,["plaintextSecret"]),r.grant(e.roleNameGuest).readAny(n.a.washer_accessControlResource,["id","name","startTime","status","expectedFreeTime","automateNr"])}},{key:"initUserPermissions",value:function(){var r=this.getAccessControlInstance();r.grant(e.roleNameUser).extend(e.roleNameGuest),r.grant(e.roleNameUser).createOwn(n.a.user_accessToken_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.device_accessControlResource,["pushNotificationToken","os","version"]),r.grant(e.roleNameUser).readOwn(n.a.device_accessControlResource,["id","pushNotificationToken","os","version"]),r.grant(e.roleNameUser).updateOwn(n.a.device_accessControlResource,["pushNotificationToken","os","version"]),r.grant(e.roleNameUser).deleteOwn(n.a.device_accessControlResource),r.grant(e.roleNameUser).updateOwn("Login",["plaintextSecret"]),r.grant(e.roleNameUser).createOwn("UserMeeting",["MeetingId"]),r.grant(e.roleNameUser).readOwn("UserMeeting",["MeetingId"]),r.grant(e.roleNameUser).updateOwn("UserMeeting",["MeetingId"]),r.grant(e.roleNameUser).deleteOwn("UserMeeting"),r.grant(e.roleNameUser).readOwn(n.a.feedback_accessControlResource,["message","label","id","createdAt"]),r.grant(e.roleNameUser).deleteOwn(n.a.feedback_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.mealcomment_accessControlResource,["CanteenId","UserId","MealId","text"]),r.grant(e.roleNameUser).readOwn(n.a.mealcomment_accessControlResource,["id","CanteenId","UserId","MealId","text"]),r.grant(e.roleNameUser).updateOwn(n.a.mealcomment_accessControlResource,["text"]),r.grant(e.roleNameUser).deleteOwn(n.a.mealcomment_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.mealrating_accessControlResource,["CanteenId","UserId","MealId","value"]),r.grant(e.roleNameUser).readOwn(n.a.mealrating_accessControlResource,["id","CanteenId","UserId","MealId","value"]),r.grant(e.roleNameUser).updateOwn(n.a.mealrating_accessControlResource,["value"]),r.grant(e.roleNameUser).deleteOwn(n.a.mealrating_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.meeting_accessControlResource,["BuildingId","UserId","date"]),r.grant(e.roleNameUser).readOwn(n.a.meeting_accessControlResource,["id","BuildingId","date"]),r.grant(e.roleNameUser).deleteOwn(n.a.meeting_accessControlResource),r.grant(e.roleNameUser).readOwn(n.a.order_accessControlResource,["UserId"]),r.grant(e.roleNameUser).createOwn(n.a.streamview_accessControlResource,["screen","event","props","eventTime"]),r.grant(e.roleNameUser).readOwn(n.a.streamview_accessControlResource,["id","screen","event","props","eventTime"]),r.grant(e.roleNameUser).updateOwn(n.a.streamview_accessControlResource,["text"]),r.grant(e.roleNameUser).deleteOwn(n.a.streamview_accessControlResource),r.grant(e.roleNameUser).readOwn(n.a.user_accessControlResource,["id","online_time","privacyPoliceReadDate","pseudonym","avatar","typefood","language","ResidenceId","CanteenId"]),r.grant(e.roleNameUser).updateOwn(n.a.user_accessControlResource,["pseudonym","avatar","!privacyPoliceReadDate","typefood","language","ResidenceId","CanteenId"]),r.grant(e.roleNameUser).deleteOwn(n.a.user_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.userMarking_accessControlResource,["MarkingId"]),r.grant(e.roleNameUser).readOwn(n.a.userMarking_accessControlResource,["MarkingId"]),r.grant(e.roleNameUser).deleteOwn(n.a.userMarking_accessControlResource,["MarkingId"]),r.grant(e.roleNameUser).createOwn(n.a.user_favoriteMeals_accessControlResource,["MealId"]),r.grant(e.roleNameUser).readOwn(n.a.user_favoriteMeals_accessControlResource,["MealId"]),r.grant(e.roleNameUser).deleteOwn(n.a.user_favoriteMeals_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.userWasherNotification_accessControlResource,["WasherId"]),r.grant(e.roleNameUser).readOwn(n.a.userWasherNotification_accessControlResource,["WasherId"]),r.grant(e.roleNameUser).deleteOwn(n.a.userWasherNotification_accessControlResource),r.grant(e.roleNameUser).readOwn(n.a.friend_accessControlResource,["id","pseudonym","avatar","createdAt","UserFriends"]),r.grant(e.roleNameUser).deleteOwn(n.a.friend_accessControlResource),r.grant(e.roleNameUser).createOwn(n.a.friendrequest_accessControlResource),r.grant(e.roleNameUser).readOwn(n.a.friendrequest_accessControlResource,["id"]),r.grant(e.roleNameUser).deleteOwn(n.a.friendrequest_accessControlResource)}},{key:"initModeratorPermissions",value:function(){var r=this.getAccessControlInstance();r.grant("moderator").extend(e.roleNameUser),r.grant(e.roleNameModerator).createAny("Address",[]),r.grant(e.roleNameModerator).updateAny("Address",["*"]),r.grant(e.roleNameModerator).createAny(n.a.building_accessControlResource,[]),r.grant(e.roleNameModerator).updateAny(n.a.building_accessControlResource,["*"]),r.grant(e.roleNameModerator).updateAny(n.a.meal_accessControlResource,["*"]),r.grant(e.roleNameModerator).readAny(n.a.userrole_accessControlResource,["UserID","RoleId"])}},{key:"initSuperModeratorPermissions",value:function(){var r=this.getAccessControlInstance();r.grant(e.roleNameSuperModerator).extend(e.roleNameModerator),r.grant(e.roleNameSuperModerator).createAny(n.a.userrole_accessControlResource,["UserID","RoleId"]),r.grant(e.roleNameSuperModerator).updateAny(n.a.userrole_accessControlResource,["UserID","RoleId"]),r.grant(e.roleNameSuperModerator).deleteAny(n.a.userrole_accessControlResource)}},{key:"initAdminPermissions",value:function(){var r=this.getAccessControlInstance();r.grant(e.roleNameAdmin).extend(e.roleNameSuperModerator);var t=[n.a.building_accessControlResource,n.a.canteen_accessControlResource,n.a.device_accessControlResource,n.a.friend_accessControlResource,n.a.feedback_accessControlResource,n.a.friendrequest_accessControlResource,n.a.function_backup_accessControlResouce,n.a.function_database_accessControlResource,n.a.information_accessControlResource,n.a.login_accessControlResource,n.a.marking_accessControlResource,n.a.meal_accessControlResource,n.a.markingUsers_accessControlResource,n.a.mealcomment_accessControlResource,n.a.mealrating_accessControlResource,n.a.meeting_accessControlResource,n.a.news_accessControlResource,n.a.order_accessControlResource,n.a.orderdetail_accessControlResource,n.a.permissions_accessControlResource,n.a.residence_accessControlResource,n.a.residence_routeAssociationUsersAccessControll,n.a.role_accessControlResource,n.a.streamview_accessControlResource,n.a.user_accessControlResource,n.a.user_accessToken_accessControlResource,n.a.user_favoriteMeals_accessControlResource,n.a.userMarking_accessControlResource,n.a.userrole_accessControlResource,n.a.university_accessControlResource,n.a.washer_accessControlResource,n.a.washer_routeAssociationWasherJobAccessControll,n.a.userWasherNotification_accessControlResource,n.a.washerjob_accessControlResource];t.push(n.a.adminRoutes_accessControlResource);for(var a=0;a<t.length;a++){var o=t[a];r.grant(e.roleNameAdmin).createAny(o,["*"]),r.grant(e.roleNameAdmin).readAny(o,["*"]),r.grant(e.roleNameAdmin).updateAny(o,["*"]),r.grant(e.roleNameAdmin).deleteAny(o,["*"])}r.grant(e.roleNameAdmin).createAny("Address",["*"]),r.grant(e.roleNameAdmin).readAny("Address",["*"]),r.grant(e.roleNameAdmin).updateAny("Address",["*"]),r.grant(e.roleNameAdmin).deleteAny("Address",["*"]),r.grant(e.roleNameAdmin).createAny("GrantList",["*"]),r.grant(e.roleNameAdmin).readAny("GrantList",["*"]),r.grant(e.roleNameAdmin).updateAny("GrantList",["*"]),r.grant(e.roleNameAdmin).deleteAny("GrantList",["*"])}}])&&a(r.prototype,t),s&&a(r,s),e}();s.roleNameGuest="guest",s.roleNameUser="user",s.roleNameModerator="moderator",s.roleNameSuperModerator="supermoderator",s.roleNameAdmin="admin",s.roleNameOwner="owner",s.accessControl=void 0},function(e,r){e.exports=require("node-schedule")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("luxon")},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,o){var s=e.apply(r,t);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return i}));var s=t(61),i=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n,i,c,l,u,p,d,m,h,f,v,g;return r=e,t=null,n=[{key:"getAllSystemData",value:(g=a(regeneratorRuntime.mark((function r(t){var n,a,o,s,i,c,l,u,p,d,m,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.cpuDataJSON();case 2:return n=r.sent,r.next=5,e.cpuCurrentSpeedDataJSON();case 5:return a=r.sent,r.next=8,e.cpuTemperatureDataJSON();case 8:return o=r.sent,r.next=11,e.memDataJSON();case 11:return s=r.sent,r.next=14,e.currentLoadDataJSON();case 14:return i=r.sent,r.next=17,e.processesDataJSON();case 17:return c=r.sent,r.next=20,e.uptimeDataJSON();case 20:return l=r.sent,r.next=23,e.getFsSize();case 23:return u=r.sent,r.next=26,e.getNetworkStatsJSON();case 26:return p=r.sent,r.next=29,e.getNetworkInterfacesJSON();case 29:return d=r.sent,m=Object.assign(u,n,a,o,s,i,c,l,d,p),h={allInformations:m,allInformationsLastUpdateTime:new Date},t.setex(e.redisKey,e.redisCacheSeconds,JSON.stringify(h)),r.abrupt("return",h);case 34:case"end":return r.stop()}}),r)}))),function(e){return g.apply(this,arguments)})},{key:"getNetworkStatsJSON",value:(v=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.networkStats();case 3:return r=e.sent,e.abrupt("return",{networkStats:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return v.apply(this,arguments)})},{key:"getNetworkInterfacesJSON",value:(f=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.networkInterfaces();case 3:return r=e.sent,e.abrupt("return",{networkInterfaces:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return f.apply(this,arguments)})},{key:"getFsSize",value:(h=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.fsSize();case 3:return r=e.sent,e.abrupt("return",{fileSystem:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return h.apply(this,arguments)})},{key:"cpuDataJSON",value:(m=a(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.cpu();case 3:return r=e.sent,t=r.speed,n=r.speedmax,e.abrupt("return",{speed:t,speedmax:n});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(){return m.apply(this,arguments)})},{key:"cpuCurrentSpeedDataJSON",value:(d=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.cpuCurrentspeed();case 3:return r=e.sent,t=r.avg,e.abrupt("return",{avg:t});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(){return d.apply(this,arguments)})},{key:"cpuTemperatureDataJSON",value:(p=a(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.cpuTemperature();case 3:return r=e.sent,t=r.main,n=r.max,e.abrupt("return",{main:t,max:n});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(){return p.apply(this,arguments)})},{key:"memDataJSON",value:(u=a(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.mem();case 3:return r=e.sent,t=r.total,n=r.available,e.abrupt("return",{total:t,available:n});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(){return u.apply(this,arguments)})},{key:"currentLoadDataJSON",value:(l=a(regeneratorRuntime.mark((function e(){var r,t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.currentLoad();case 3:return r=e.sent,t=r.avgload,n=r.currentload,a=r.currentload_user,e.abrupt("return",{avgload:t,currentload:n,currentload_user:a});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return l.apply(this,arguments)})},{key:"processesDataJSON",value:(c=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.processes();case 3:return r=e.sent,t=r.running,e.abrupt("return",{running:t});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(){return c.apply(this,arguments)})},{key:"uptimeDataJSON",value:(i=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.time(),t=r.uptime,e.abrupt("return",{uptime:t});case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}],t&&o(r.prototype,t),n&&o(r,n),e}();i.redisKey="AllSystemData",i.redisCacheSeconds=30},function(e,r,t){"use strict";var n,a=t(14),o=a.Buffer,s={};for(n in a)a.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=a[n]);var i=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(i[n]=o[n]);if(s.Buffer.prototype=o.prototype,i.from&&i.from!==Uint8Array.from||(i.from=function(e,r,t){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,r,t)}),i.alloc||(i.alloc=function(e,r,t){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=o(e);return r&&0!==r.length?"string"==typeof t?n.fill(r,t):n.fill(r):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},function(e,r){e.exports=require("node-fetch")},function(e,r,t){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,r){if("string"==typeof e)return c(e);if("number"==typeof e)return i(e,r);return null},e.exports.format=i,e.exports.parse=c;var n=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},s=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function i(e,r){if(!Number.isFinite(e))return null;var t=Math.abs(e),s=r&&r.thousandsSeparator||"",i=r&&r.unitSeparator||"",c=r&&void 0!==r.decimalPlaces?r.decimalPlaces:2,l=Boolean(r&&r.fixedDecimals),u=r&&r.unit||"";u&&o[u.toLowerCase()]||(u=t>=o.tb?"TB":t>=o.gb?"GB":t>=o.mb?"MB":t>=o.kb?"KB":"B");var p=(e/o[u.toLowerCase()]).toFixed(c);return l||(p=p.replace(a,"$1")),s&&(p=p.replace(n,s)),p+i+u}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var r,t=s.exec(e),n="b";return t?(r=parseFloat(t[1]),n=t[4].toLowerCase()):(r=parseInt(e,10),n="b"),Math.floor(o[n]*r)}},function(e,r){e.exports=require("buffer")},function(e){e.exports={production:{username:"root",password:"MySQLIstDasBesteAufDerWelt",database:"swosy",host:"localhost",dialect:"mysql",operatorsAliases:0,logging:!1,insecureAuth:!0}}},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("firebase-admin")},function(e,r,t){"use strict";t.d(r,"a",(function(){return m}));var n=t(4);function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=t(122),s=o.createLogger,i=o.format,c=o.transports;t(123);var l=i.combine,u=i.timestamp,p=i.label,d=i.printf,m=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e);n.a.mkdirpath("./logs/");var a="./logs/"+r;n.a.mkdirpath(a);var o=d((function(e){var r=e.level,t=e.message,n=e.label,a=e.timestamp;return"".concat(a," [").concat(n,"] ").concat(r,": ").concat(t)})),i=[];i.push(new c.DailyRotateFile({filename:"logs/"+r+"/error-%DATE%.log",datePattern:"YYYY-MM-DD-HH",zippedArchive:!1,maxSize:"20m",maxFiles:"14d",level:"error"})),i.push(new c.DailyRotateFile({filename:"logs/"+r+"/combined-%DATE%.log",datePattern:"YYYY-MM-DD-HH",zippedArchive:!1,maxSize:"20m",maxFiles:"14d"}));var m="Worker: "+t+" - "+r;this.logger=s({format:l(p({label:m}),u(),o),defaultMeta:{service:"user-service"},transports:i}),this.logger.info("["+r+"] Logger Created")}var r,t,o;return r=e,(t=[{key:"getLogger",value:function(){return this.logger}}])&&a(r.prototype,t),o&&a(r,o),e}()},function(e){e.exports={server:{port:3001,metricsPort:9999,redisPort:6379,serverAPIVersion:"3.0.0",redisAlreadyRunning:!1,email:{service:"gmail",auth:{user:"swosy.swos@gmail.com",pass:"Cola4Live!"}}}}},function(e,r,t){"use strict";
/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(74)("http-errors"),a=t(77),o=t(78),s=t(80);function i(e){return Number(String(e).charAt(0)+"00")}e.exports=function e(){for(var r,t,a=500,s={},c=0;c<arguments.length;c++){var l=arguments[c];if(l instanceof Error)a=(r=l).status||r.statusCode||a;else switch(typeof l){case"string":t=l;break;case"number":a=l,0!==c&&n("non-first-argument status code; replace with createError("+l+", ...)");break;case"object":s=l}}"number"==typeof a&&(a<400||a>=600)&&n("non-error status code; use only 4xx or 5xx status codes");("number"!=typeof a||!o[a]&&(a<400||a>=600))&&(a=500);var u=e[a]||e[i(a)];r||(r=u?new u(t):new Error(t||o[a]),Error.captureStackTrace(r,e));u&&r instanceof u&&r.status===a||(r.expose=a<500,r.status=r.statusCode=a);for(var p in s)"status"!==p&&"statusCode"!==p&&(r[p]=s[p]);return r},e.exports.HttpError=function(){function e(){throw new TypeError("cannot construct abstract class")}return s(e,Error),e}(),function(e,r,t){r.forEach((function(r){var n,c=o[r].split(" ").map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1)})).join("").replace(/[^ _0-9a-z]/gi,"");switch(i(r)){case 400:n=function(e,r,t){var n=r.match(/Error$/)?r:r+"Error";function i(e){var r=null!=e?e:o[t],s=new Error(r);return Error.captureStackTrace(s,i),a(s,i.prototype),Object.defineProperty(s,"message",{enumerable:!0,configurable:!0,value:r,writable:!0}),Object.defineProperty(s,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),s}return s(i,e),i.prototype.status=t,i.prototype.statusCode=t,i.prototype.expose=!0,i}(t,c,r);break;case 500:n=function(e,r,t){var n=r.match(/Error$/)?r:r+"Error";function i(e){var r=null!=e?e:o[t],s=new Error(r);return Error.captureStackTrace(s,i),a(s,i.prototype),Object.defineProperty(s,"message",{enumerable:!0,configurable:!0,value:r,writable:!0}),Object.defineProperty(s,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),s}return s(i,e),i.prototype.status=t,i.prototype.statusCode=t,i.prototype.expose=!1,i}(t,c,r)}n&&(e[r]=n,e[c]=n)})),e["I'mateapot"]=n.function(e.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')}(e.exports,o.codes,e.exports.HttpError)},function(e,r,t){"undefined"!=typeof process&&"renderer"===process.type?e.exports=t(82):e.exports=t(84)},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(20),a=t(87),o=t(37),s=t(107),i=t(109);e.exports=function(e,r,t,c,l,u){var p,d,m=u;e._body=!0;var h=null!==m.encoding?m.encoding:null,f=m.verify;try{d=function(e,r,t){var a,o=(e.headers["content-encoding"]||"identity").toLowerCase(),s=e.headers["content-length"];if(r('content-encoding "%s"',o),!1===t&&"identity"!==o)throw n(415,"content encoding unsupported",{encoding:o,type:"encoding.unsupported"});switch(o){case"deflate":a=i.createInflate(),r("inflate body"),e.pipe(a);break;case"gzip":a=i.createGunzip(),r("gunzip body"),e.pipe(a);break;case"identity":(a=e).length=s;break;default:throw n(415,'unsupported content encoding "'+o+'"',{encoding:o,type:"encoding.unsupported"})}return a}(e,l,m.inflate),p=d.length,d.length=void 0}catch(e){return t(e)}if(m.length=p,m.encoding=f?null:h,null===m.encoding&&null!==h&&!o.encodingExists(h))return t(n(415,'unsupported charset "'+h.toUpperCase()+'"',{charset:h.toLowerCase(),type:"charset.unsupported"}));l("read body"),a(d,m,(function(a,i){var u;if(a)return u="encoding.unsupported"===a.type?n(415,'unsupported charset "'+h.toUpperCase()+'"',{charset:h.toLowerCase(),type:"charset.unsupported"}):n(400,a),d.resume(),void s(e,(function(){t(n(400,u))}));if(f)try{l("verify body"),f(e,r,i,h)}catch(e){return void t(n(403,e,{body:i,type:e.type||"entity.verify.failed"}))}var p=i;try{l("parse body"),p="string"!=typeof i&&null!==h?o.decode(i,h):i,e.body=c(p)}catch(e){return void t(n(400,e,{body:p,type:e.type||"entity.parse.failed"}))}t()}))}},function(e,r,t){"use strict";
/*!
 * type-is
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(110),a=t(111);function o(e,r){var t,a,o=r,s=function(e){if(!e)return null;try{return function(e){var r=n.parse(e);return r.parameters=void 0,n.format(r)}(e)}catch(e){return null}}(e);if(!s)return!1;if(o&&!Array.isArray(o))for(o=new Array(arguments.length-1),t=0;t<o.length;t++)o[t]=arguments[t+1];if(!o||!o.length)return s;for(t=0;t<o.length;t++)if(c(i(a=o[t]),s))return"+"===a[0]||-1!==a.indexOf("*")?s:a;return!1}function s(e){return void 0!==e.headers["transfer-encoding"]||!isNaN(e.headers["content-length"])}function i(e){if("string"!=typeof e)return!1;switch(e){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return"+"===e[0]?"*/*"+e:-1===e.indexOf("/")?a.lookup(e):e}function c(e,r){if(!1===e)return!1;var t=r.split("/"),n=e.split("/");return 2===t.length&&2===n.length&&(("*"===n[0]||n[0]===t[0])&&("*+"===n[1].substr(0,2)?n[1].length<=t[1].length+1&&n[1].substr(1)===t[1].substr(1-n[1].length):"*"===n[1]||n[1]===t[1]))}e.exports=function(e,r){var t=r;if(!s(e))return null;if(arguments.length>2){t=new Array(arguments.length-1);for(var n=0;n<t.length;n++)t[n]=arguments[n+1]}return o(e.headers["content-type"],t)},e.exports.is=o,e.exports.hasBody=s,e.exports.normalize=i,e.exports.match=c},function(e,r,t){"use strict";t.d(r,"a",(function(){return d}));var n=t(4),a=t(15),o=t(3);function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(67),c="production",l=t(68).exec,u=t(5),p=t(8),d=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r}var r,t,d;return r=e,(t=[{key:"getDatabaseName",value:function(){return a[c].database}},{key:"getUsername",value:function(){return a[c].username}},{key:"getPassword",value:function(){return a[c].password}},{key:"getCompressFileEnding",value:function(){return"gz"}},{key:"getRawFileEnding",value:function(){return"sql"}},{key:"getPrefixForCustomBackups",value:function(){return"custom-"}},{key:"generateExportCommand",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=r?"--no-create-info ":"",n=this.getDatabaseName(),a=this.getUsername(),o=this.getPassword(),s="--default-character-set=latin1",i="mysqldump -u "+a+" -p"+o+" "+s+" "+t+"--databases "+n+" > "+e;return i}},{key:"generateImportCommand",value:function(e){return"mysql -u "+this.getUsername()+" -p"+this.getPassword()+" < "+e}},{key:"generateFileName",value:function(){var e=new Date;return this.getDatabaseName()+"-"+o.a.dateToYYYYMMDDHHMMSS(e)}},{key:"getPathToBackups",value:function(){var e=p.realpathSync(".");return u.join(e,"backups","database")}},{key:"getAllBackupFileNames",value:function(){var e=this.getPathToBackups(),r=n.a.getAllFilesFormPath(e),t=this.getCompressFileEnding();return r=r.filter((function(e){return-1!==e.indexOf("."+t)}))}},{key:"getAllBackupFilePaths",value:function(){for(var e=this.getAllBackupFileNames(),r=[],t=0;t<e.length;t++)r.push(this.getBackupFilePath(e[t]));return r}},{key:"getBackupFilePath",value:function(e){var r=this.getPathToBackups();return u.join(r,e)}},{key:"getAllBackupsInformation",value:function(){for(var e=this.getAllBackupFileNames(),r=[],t=0;t<e.length;t++)r.push(this.getBackupInformation(e[t]));return r}},{key:"getBackupInformation",value:function(e){var r=this.getBackupFilePath(e);return{id:e,backupFilePath:r,createdAt:n.a.getCreatedDate(r),updatedAt:n.a.getFileUpdatedDate(r)}}},{key:"exportDatabase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this,t=this.generateFileName();e&&(t=this.getPrefixForCustomBackups()+t);var a=u.join(this.getPathToBackups(),t),o=a+"."+this.getRawFileEnding(),s=o+"."+this.getCompressFileEnding(),c=this.generateExportCommand(o,!1);this.logger.info("[DatabaseBackupModule] command: "+c);var p=new Promise((function(e,t){l(c,(function(a,c,l){if(a)return console.log("error: ".concat(a)),r.logger.error("error: ".concat(a)),void t(a);l&&r.logger.error("stderr: ".concat(l)),r.logger.info("[DatabaseBackupModule] : Database created raw backup"),i.gzip.compressFile(o,s).then((function(){r.logger.info("[DatabaseBackupModule] : Database created compressed backup from raw backup"),n.a.deleteFile(o),r.logger.info("[DatabaseBackupModule] : Database deleted raw backup"),e(s)})).catch((function(e){r.logger.error("[DatabaseBackupModule] : "+e.toString()),t(e)}))}))}));return p}},{key:"restoreDatabaseWithCompressedFile",value:function(e){var r=this,t=u.parse(e),a=u.join(t.dir,t.name);return new Promise((function(t,o){i.gzip.uncompress(e,a).then((function(){r.logger.info("[DatabaseBackupModule] : Database created raw backup from compressed backup");var e=r.generateImportCommand(a);l(e,(function(e,s,i){if(e)return console.log("error: ".concat(e)),r.logger.error("error: ".concat(e)),void o(e);i&&r.logger.error("stderr: ".concat(i)),r.logger.info("[DatabaseBackupModule] : Database imported raw backup"),n.a.deleteFile(a),r.logger.info("[DatabaseBackupModule] : Database deleted decompressed raw backup"),r.logger.info("stdout: ".concat(s)),t(!0)}))})).catch((function(e){r.logger.error("[DatabaseBackupModule] : "+e.toString()),o(e)}))}))}}])&&s(r.prototype,t),d&&s(r,d),e}()},function(e,r,t){"use strict";
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,a=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,s=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(e){var r=String(e);if(o.test(r))return r;if(r.length>0&&!a.test(r))throw new TypeError("invalid parameter value");return'"'+r.replace(i,"\\$1")+'"'}function u(e){this.parameters=Object.create(null),this.type=e}r.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var r=e.parameters,t=e.type;if(!t||!c.test(t))throw new TypeError("invalid type");var n=t;if(r&&"object"==typeof r)for(var a,s=Object.keys(r).sort(),i=0;i<s.length;i++){if(a=s[i],!o.test(a))throw new TypeError("invalid parameter name");n+="; "+a+"="+l(r[a])}return n},r.parse=function(e){if(!e)throw new TypeError("argument string is required");var r="object"==typeof e?function(e){var r;"function"==typeof e.getHeader?r=e.getHeader("content-type"):"object"==typeof e.headers&&(r=e.headers&&e.headers["content-type"]);if("string"!=typeof r)throw new TypeError("content-type header is missing from object");return r}(e):e;if("string"!=typeof r)throw new TypeError("argument string is required to be a string");var t=r.indexOf(";"),a=-1!==t?r.substr(0,t).trim():r.trim();if(!c.test(a))throw new TypeError("invalid media type");var o=new u(a.toLowerCase());if(-1!==t){var i,l,p;for(n.lastIndex=t;l=n.exec(r);){if(l.index!==t)throw new TypeError("invalid parameter format");t+=l[0].length,i=l[1].toLowerCase(),'"'===(p=l[2])[0]&&(p=p.substr(1,p.length-2).replace(s,"$1")),o.parameters[i]=p}if(t!==r.length)throw new TypeError("invalid parameter format")}return o}},function(e){e.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]},function(e,r){e.exports=require("stream")},function(e,r){e.exports=require("dateformat")},function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t(10);function a(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(126),c={},l=t(43),u=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,a,u,p,d,m,h,f,v,g;return r=e,t=null,a=[{key:"printClassicOutput",value:(g=o(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Worker: "+r+" - "+t);case 1:case"end":return e.stop()}}),e)}))),function(e,r){return g.apply(this,arguments)})},{key:"sleep",value:(v=o(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,r)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"addWorkerOutput",value:(f=o(regeneratorRuntime.mark((function r(t,n){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:l.isWorker?process.send({workerID:""+l.worker.id,message:""+n}):e.classicMode&&e.showMessages?e.printClassicOutput(t,n):((a=c[t]||[]).length>=5&&a.shift(),a.push(n),c[t]=a);case 1:case"end":return r.stop()}}),r)}))),function(e,r){return f.apply(this,arguments)})},{key:"startFancyTerminal",value:(h=o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.showMessages=!0,e.loopEnabled=!0,e.pollSystemInformation(),e.mainLoop();case 4:case"end":return r.stop()}}),r)}))),function(){return h.apply(this,arguments)})},{key:"stopFancyTerminal",value:function(){e.loopEnabled=!1}},{key:"pollSystemInformation",value:(m=o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.a.cpuDataJSON();case 2:return e.cpuData=r.sent,r.next=5,n.a.currentLoadDataJSON();case 5:return e.currentLoadData=r.sent,r.next=8,n.a.uptimeDataJSON();case 8:return e.uptimeData=r.sent,r.next=11,e.sleep(500);case 11:e.loopEnabled&&e.pollSystemInformation();case 12:case"end":return r.stop()}}),r)}))),function(){return m.apply(this,arguments)})},{key:"clearConsole",value:function(){i(!0)}},{key:"mainLoop",value:(d=o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.classicMode||e.printFancyOutput(),r.next=3,e.sleep(100);case 3:e.loopEnabled&&e.mainLoop();case 4:case"end":return r.stop()}}),r)}))),function(){return d.apply(this,arguments)})},{key:"printFancyOutput",value:(p=o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.clearConsole(),console.log("Welcome to"),console.log("\n         \n     \n       \n       \n      \n          \n                                            \n"),e.printSeperator(),r.next=6,e.printUsageInformations();case 6:e.showMessages&&e.printWorkerOutputs();case 7:case"end":return r.stop()}}),r)}))),function(){return p.apply(this,arguments)})},{key:"printWithBorders",value:function(e){var r=process.stdout.columns-2,t=e.length;console.log("|"+e+" ".repeat(r-t)+"|")}},{key:"printSeperator",value:function(){console.log("+"+"-".repeat(process.stdout.columns-2)+"+")}},{key:"padLeadingZero",value:function(e,r){for(var t=e+"";t.length<r;)t="0"+t;return t}},{key:"parseUptimeSecondsToReadableFormat",value:function(r){if(!r)return"";var t=Math.floor(r/86400),n=Math.floor((r-86400*t)/3600),a=Math.floor((r-(3600*n+86400*t))/60),o=r%60;return t+" "+e.padLeadingZero(n,2)+":"+e.padLeadingZero(a,2)+":"+e.padLeadingZero(o,2)}},{key:"printUsageInformations",value:(u=o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.printWithBorders(" CPU Speed: "+e.cpuData.speed+"/"+e.cpuData.speedmax+" Ghz"),e.printWithBorders(" Uptime: "+e.parseUptimeSecondsToReadableFormat(e.uptimeData.uptime)),e.printSeperator();case 3:case"end":return r.stop()}}),r)}))),function(){return u.apply(this,arguments)})},{key:"printWorkerOutputs",value:function(){var r=c||{},t=Object.keys(r);e.printWithBorders(" Amount of Workers: "+t.length),e.printSeperator();for(var n=0;n<t.length;n++){var a=t[n];e.printWithBorders(" Worker: "+a);for(var o=r[a],s=0;s<o.length;s++)e.printWithBorders(" "+o[s]);e.printSeperator()}}}],t&&s(r.prototype,t),a&&s(r,a),e}();u.classicMode=!0,u.showMessages=!1,u.loopEnabled=!0,u.cpuData={},u.currentLoadData={},u.uptimeData={}},function(e,r){e.exports=require("sequelize")},function(module,exports,__webpack_require__){
/*!
 * depd
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
var callSiteToString=__webpack_require__(32).callSiteToString,eventListenerCount=__webpack_require__(32).eventListenerCount,relative=__webpack_require__(5).relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,r){for(var t=e.split(/[ ,]+/),n=String(r).toLowerCase(),a=0;a<t.length;a++){var o=t[a];if(o&&("*"===o||o.toLowerCase()===n))return!0}return!1}function convertDataDescriptorToAccessor(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r),a=n.value;return n.get=function(){return a},n.writable&&(n.set=function(e){return a=e}),delete n.value,delete n.writable,Object.defineProperty(e,r,n),n}function createArgumentsString(e){for(var r="",t=0;t<e;t++)r+=", arg"+t;return r.substr(2)}function createStackString(e){var r=this.name+": "+this.namespace;this.message&&(r+=" deprecated "+this.message);for(var t=0;t<e.length;t++)r+="\n    at "+callSiteToString(e[t]);return r}function depd(e){if(!e)throw new TypeError("argument namespace is required");var r=callSiteLocation(getStack()[1])[0];function t(e){log.call(t,e)}return t._file=r,t._ignored=isignored(e),t._namespace=e,t._traced=istraced(e),t._warned=Object.create(null),t.function=wrapfunction,t.property=wrapproperty,t}function isignored(e){return!!process.noDeprecation||containsNamespace(process.env.NO_DEPRECATION||"",e)}function istraced(e){return!!process.traceDeprecation||containsNamespace(process.env.TRACE_DEPRECATION||"",e)}function log(e,r){var t=0!==eventListenerCount(process,"deprecation");if(t||!this._ignored){var n,a,o,s,i=0,c=!1,l=getStack(),u=this._file;for(r?(s=r,(o=callSiteLocation(l[1])).name=s.name,u=o[0]):o=s=callSiteLocation(l[i=2]);i<l.length;i++)if((a=(n=callSiteLocation(l[i]))[0])===u)c=!0;else if(a===this._file)u=this._file;else if(c)break;var p=n?s.join(":")+"__"+n.join(":"):void 0;if(!(void 0!==p&&p in this._warned)){this._warned[p]=!0;var d=e;if(d||(d=o!==s&&o.name?defaultMessage(o):defaultMessage(s)),t){var m=DeprecationError(this._namespace,d,l.slice(i));process.emit("deprecation",m)}else{var h=(process.stderr.isTTY?formatColor:formatPlain).call(this,d,n,l.slice(i));process.stderr.write(h+"\n","utf8")}}}}function callSiteLocation(e){var r=e.getFileName()||"<anonymous>",t=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(r=e.getEvalOrigin()+", "+r);var a=[r,t,n];return a.callSite=e,a.name=e.getFunctionName(),a}function defaultMessage(e){var r=e.callSite,t=e.name;t||(t="<anonymous@"+formatLocation(e)+">");var n=r.getThis(),a=n&&r.getTypeName();return"Object"===a&&(a=void 0),"Function"===a&&(a=n.name||a),a&&r.getMethodName()?a+"."+t:t}function formatPlain(e,r,t){var n=(new Date).toUTCString()+" "+this._namespace+" deprecated "+e;if(this._traced){for(var a=0;a<t.length;a++)n+="\n    at "+callSiteToString(t[a]);return n}return r&&(n+=" at "+formatLocation(r)),n}function formatColor(e,r,t){var n="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var a=0;a<t.length;a++)n+="\n    [36mat "+callSiteToString(t[a])+"[39m";return n}return r&&(n+=" [36m"+formatLocation(r)+"[39m"),n}function formatLocation(e){return relative(basePath,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,r={},t=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(r);var n=r.stack.slice(1);return Error.prepareStackTrace=t,Error.stackTraceLimit=e,n}function prepareObjectStackTrace(e,r){return r}function wrapfunction(fn,message){if("function"!=typeof fn)throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+') {\n"use strict"\nlog.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n})');return deprecatedfn}function wrapproperty(e,r,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,r);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var a=this,o=callSiteLocation(getStack()[1]);o.name=r,"value"in n&&(n=convertDataDescriptorToAccessor(e,r,t));var s=n.get,i=n.set;"function"==typeof s&&(n.get=function(){return log.call(a,t,o),s.apply(this,arguments)}),"function"==typeof i&&(n.set=function(){return log.call(a,t,o),i.apply(this,arguments)}),Object.defineProperty(e,r,n)}function DeprecationError(e,r,t){var n,a=new Error;return Object.defineProperty(a,"constructor",{value:DeprecationError}),Object.defineProperty(a,"message",{configurable:!0,enumerable:!1,value:r,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(a,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(a,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==n?n:n=createStackString.call(this,t)},set:function(e){n=e}}),a}},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(33).EventEmitter;function a(e,r,t){Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var n=t();return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,value:n}),n}})}function o(e){return e.toString()}a(e.exports,"callSiteToString",(function(){var e=Error.stackTraceLimit,r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(e,r){return r},Error.stackTraceLimit=2,Error.captureStackTrace(r);var a=r.stack.slice();return Error.prepareStackTrace=n,Error.stackTraceLimit=e,a[0].toString?o:t(71)})),a(e.exports,"eventListenerCount",(function(){return n.listenerCount||t(72)}))},function(e,r){e.exports=require("events")},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(33).EventEmitter;function a(e,r,t){Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var n=t();return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,value:n}),n}})}function o(e){return e.toString()}a(e.exports,"callSiteToString",(function(){var e=Error.stackTraceLimit,r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(e,r){return r},Error.stackTraceLimit=2,Error.captureStackTrace(r);var a=r.stack.slice();return Error.prepareStackTrace=n,Error.stackTraceLimit=e,a[0].toString?o:t(75)})),a(e.exports,"eventListenerCount",(function(){return n.listenerCount||t(76)}))},function(e,r){e.exports=require("util")},function(e,r,t){var n;function a(e){function t(){if(t.enabled){var e=t,a=+new Date,o=a-(n||a);e.diff=o,e.prev=n,e.curr=a,n=a;for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;c++;var a=r.formatters[n];if("function"==typeof a){var o=s[c];t=a.call(e,o),s.splice(c,1),c--}return t})),r.formatArgs.call(e,s),(t.log||r.log||console.log.bind(console)).apply(e,s)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),"function"==typeof r.init&&r.init(t),t}(r=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,a=0;a<n;a++)t[a]&&("-"===(e=t[a].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=t(83),r.names=[],r.skips=[],r.formatters={}},function(e,r,t){"use strict";var n=t(11).Buffer,a=t(88),o=e.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(e,r,t){e=""+(e||"");var a=o.getEncoder(r,t),s=a.write(e),i=a.end();return i&&i.length>0?n.concat([s,i]):s},o.decode=function(e,r,t){"string"==typeof e&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),e=n.from(""+(e||""),"binary"));var a=o.getDecoder(r,t),s=a.write(e),i=a.end();return i?s+i:s},o.encodingExists=function(e){try{return o.getCodec(e),!0}catch(e){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(e){o.encodings||(o.encodings=t(89));for(var r=o._canonicalizeEncoding(e),n={};;){var a=o._codecDataCache[r];if(a)return a;var s=o.encodings[r];switch(typeof s){case"string":r=s;break;case"object":for(var i in s)n[i]=s[i];n.encodingName||(n.encodingName=r),r=s.type;break;case"function":return n.encodingName||(n.encodingName=r),a=new s(n,o),o._codecDataCache[n.encodingName]=a,a;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+r+"')")}}},o._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(e,r){var t=o.getCodec(e),n=new t.encoder(r,t);return t.bomAware&&r&&r.addBOM&&(n=new a.PrependBOM(n,r)),n},o.getDecoder=function(e,r){var t=o.getCodec(e),n=new t.decoder(r,t);return!t.bomAware||r&&!1===r.stripBOM||(n=new a.StripBOM(n,r)),n};var s="undefined"!=typeof process&&process.versions&&process.versions.node;if(s){var i=s.split(".").map(Number);(i[0]>0||i[1]>=10)&&t(104)(o),t(105)(o)}},function(e){e.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},function(e){e.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]},function(e,r,t){"use strict";var n=Object.prototype.hasOwnProperty,a=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),o=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(t[n]=e[n]);return t};e.exports={arrayToObject:o,assign:function(e,r){return Object.keys(r).reduce((function(e,t){return e[t]=r[t],e}),e)},compact:function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],n=0;n<r.length;++n)for(var a=r[n],o=a.obj[a.prop],s=Object.keys(o),i=0;i<s.length;++i){var c=s[i],l=o[c];"object"==typeof l&&null!==l&&-1===t.indexOf(l)&&(r.push({obj:o,prop:c}),t.push(l))}return function(e){for(var r;e.length;){var t=e.pop();if(r=t.obj[t.prop],Array.isArray(r)){for(var n=[],a=0;a<r.length;++a)void 0!==r[a]&&n.push(r[a]);t.obj[t.prop]=n}}return r}(r)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return e}},encode:function(e){if(0===e.length)return e;for(var r="string"==typeof e?e:String(e),t="",n=0;n<r.length;++n){var o=r.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?t+=r.charAt(n):o<128?t+=a[o]:o<2048?t+=a[192|o>>6]+a[128|63&o]:o<55296||o>=57344?t+=a[224|o>>12]+a[128|o>>6&63]+a[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(n)),t+=a[240|o>>18]+a[128|o>>12&63]+a[128|o>>6&63]+a[128|63&o])}return t},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(r,t,a){if(!t)return r;if("object"!=typeof t){if(Array.isArray(r))r.push(t);else{if("object"!=typeof r)return[r,t];(a.plainObjects||a.allowPrototypes||!n.call(Object.prototype,t))&&(r[t]=!0)}return r}if("object"!=typeof r)return[r].concat(t);var s=r;return Array.isArray(r)&&!Array.isArray(t)&&(s=o(r,a)),Array.isArray(r)&&Array.isArray(t)?(t.forEach((function(t,o){n.call(r,o)?r[o]&&"object"==typeof r[o]?r[o]=e(r[o],t,a):r.push(t):r[o]=t})),r):Object.keys(t).reduce((function(r,o){var s=t[o];return n.call(r,o)?r[o]=e(r[o],s,a):r[o]=s,r}),s)}}},function(e,r,t){"use strict";var n=String.prototype.replace,a=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,r){e.exports=require("nodemailer")},function(e,r){e.exports=require("cluster")},function(e,r){e.exports=require("express-basic-auth")},function(e,r,t){"use strict";t.d(r,"a",(function(){return l}));var n=t(10);function a(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(7),c=t(12),l=function(){function e(r,t,n,a){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[EnvironmentRecorder] initialising"),this.environmentLogger=t,this.systemLogger=n,this.redisClient=a,this.logger.info("Created EnvironmentRecorder"),this.initializeSchedule(),this.logger.info("[EnvironmentRecorder] initialised")}var r,t,a,l,u,p;return r=e,(t=[{key:"initializeSchedule",value:(p=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initializeWeatherSchedule(),this.initializeMachineSchedule();case 2:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"initializeMachineSchedule",value:(u=o(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,t=i.scheduleJob("*/10 * * * * *",(function(){r.logSystemData()})),this.computerSchedule=t;case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"logSystemData",value:(l=o(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.getAllSystemData(this.redisClient);case 2:r=e.sent,this.systemLogger.info(JSON.stringify(r));case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"initializeWeatherSchedule",value:function(){this.initializeWeatherScheduleForLatLon("52.270494","8.047908")}},{key:"initializeWeatherScheduleForLatLon",value:function(e,r){var t="http://api.openweathermap.org/data/2.5/weather?APPID=2958b53f89bc0144117212ee6b1d76cc&lat="+e+"&lon="+r,n=this.environmentLogger,a=i.scheduleJob("0 0 */1 * * *",(function(){c(t).then((function(e){e.json().then((function(e){n.info(JSON.stringify(e))})).catch((function(e){n.error("Error response.json Temperature")}))})).catch((function(e){n.error("Error fetch Temperature")}))}));this.computerSchedule=a}}])&&s(r.prototype,t),a&&s(r,a),e}()},function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t(17),a=t(5),o=t.n(a);function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(8),c=i.realpathSync("."),l=o.a.resolve(c,"certificates","firebasePrivateKey.json"),u=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[FirebaseAPI] initialising"),this.models=t,this.logger.info("[FirebaseAPI] Load Private Key");try{this.firebasePrivateKey=this.loadFireBasePrivateKey(),n.initializeApp({credential:n.credential.cert(l),databaseURL:"https://swosy-284f0.firebaseio.com"})}catch(e){this.logger.error("[FirebaseAPI] coulnt find the private key!")}this.logger.info("[FirebaseAPI] initialised")}var r,t,a;return r=e,(t=[{key:"loadFireBasePrivateKey",value:function(){this.logger.info("Loading Firebase Private Key File");var e=i.readFileSync(l,"utf8",(function(e,r){if(e)throw e}));return this.logger.info("Parsing Firebase Private Key"),JSON.parse(e)}},{key:"assertListOfDeviceIDsIsValidType",value:function(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];("string"==typeof n||n instanceof String)&&n.length>0&&r.push(n)}return r}},{key:"sendPushNotification",value:function(e,r,t,n){var a=this;return e=this.assertListOfDeviceIDsIsValidType(e),new Promise((function(o,s){a.logger.info("[FirebaseAPI] Sending Push-Notification-Message to: "+e.length+" devices");var i,c,l=[],u=0;for(i=0,c=e.length;i<c;i+=100){var p=e.slice(i,i+100);l[u]=p,u++}a.logger.info("[FirebaseAPI] Splitting Push-Notification into "+u+" message packages");var d=[];for(i=0,c=l.length;i<c;i++){var m=a.createPushNotificationPayload(l[i],r,t,n);d[i]=a.createPromiseForSendingPushNotifications(m,l[i])}a.logger.info("[FirebaseAPI] Created all Promises, now resolving them all"),console.log("chunkPromises.length: "+d.length),Promise.all(d).then((function(r){a.logger.info("Okay done?: "+r.length),a.logger.info("Values: "+r.toString());var t=[];for(i=0;i<r.length;i++)a.logger.info("Okay now here should be a list of tokens: "+r[i].toString()),t=t.concat(r[i]);a.logger.info("collectedFailedTokens: "+t.toString());var n={deviceTokensAmount:e.length,failedTokens:t};o(n)}))}))}},{key:"createPushNotificationPayload",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Swosy",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"was gibt es heute leckeres?",n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],{notification:{title:r,body:t},tokens:e});return n}},{key:"createPromiseForSendingPushNotifications",value:function(e,r){var t=this;return new Promise((function(a,o){console.log("createPromiseForSendingPushNotifications: "),console.log("firebase exists: "+!!n),console.log("PushNotificationPayload: "+!!e),console.log(JSON.stringify(e)),console.log("listOfPushNotificationTokens"),console.log(JSON.stringify(r)),n.messaging().sendMulticast(e).then((function(e){console.log("got a response of sending: "+!!e),console.log(JSON.stringify(e));var n=[];e.failureCount>0&&e.responses.forEach((function(e,a){if(!e.success){n.push(r[a]),t.logger.info("Ups "+a+" didnt went well cause:");var o=e.error.errorInfo.code,s=e.error.errorInfo.message;t.handleSendError(r[a],e,o,s)}})),t.logger.info("[FirebaseAPI] Failed to send to: "+n.length+" Devices"),t.logger.info("[FirebaseAPI] Sended Successfully to "+(r.length-n.length)+"/"+r.length+" Devices"),a(n)})).catch((function(e){console.log("got an error sending"),console.log(e),o(e)}))}))}},{key:"handleSendError",value:function(e,r,t,n){this.logger.info("Error For Delivering a Message"),this.logger.info("deviceToken: "+e),this.logger.info("errorCode: "+t),this.logger.info("errorMessage: "+n),"messaging/invalid-argument"!=t&&"messaging/invalid-recipient"!=t&&"messaging/invalid-registration-token"!=t&&"messaging/registration-token-not-registered"!=t||this.models.Device.findAll({where:{pushNotificationToken:e}}).then((function(e){for(var r=0;r<e.length;r++){var t=e[r];t.pushNotificationToken=null,t.save()}}))}}])&&s(r.prototype,t),a&&s(r,a),e}()},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,o){var s=e.apply(r,t);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return s}));var s=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[CustomSchedule] initialising"),this.models=t,this.logger.info("[CustomSchedule] initialised")}var r,t,n,s,i,c,l,u;return r=e,(t=[{key:"runCustomMethod",value:(u=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renameMeals();case 2:return e.next=4,this.renameCanteenMeals();case 4:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"padLeadingZero",value:function(e,r){for(var t=e+"";t.length<r;)t="0"+t;return t}},{key:"calcTimeLeft",value:function(e,r,t){var n=(new Date).getTime()-e.getTime(),a=(n/r*t-n)/1e3,o=a=parseInt(a),s=Math.floor(o/86400),i=Math.floor((o-86400*s)/3600),c=Math.floor((o-(3600*i+86400*s))/60),l=o%60;return s+" "+this.padLeadingZero(i,2)+":"+this.padLeadingZero(c,2)+":"+this.padLeadingZero(l,2)}},{key:"renameCanteenMeals",value:(l=a(regeneratorRuntime.mark((function e(){var r,t,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,e.next=3,this.models.CanteenMeal.findAll();case 3:t=e.sent,n=t.length,a=0;case 6:if(!(a<n)){e.next=13;break}return o=t[a],e.next=10,this.renameCanteenMeal(o,a,n,r);case 10:a++,e.next=6;break;case 13:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"renameCanteenMeal",value:(c=a(regeneratorRuntime.mark((function e(r,t,n,a){var o,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.calcTimeLeft(a,t,n),e.next=3,r.getMeal();case 3:if(!(s=e.sent)){e.next=13;break}if(!(i=s.nameEng)){e.next=13;break}return console.log("Rename Canteen Meal ("+(t+1)+"/"+n+") ["+o+"]: "+r.date+" "+s.name+" --\x3e "+i),e.next=10,this.models.CanteenMeal.findOne({where:{date:r.date,MealId:r.MealId,CanteenId:r.CanteenId}});case 10:return c=e.sent,e.next=13,c.update({displayNameEng:""+i});case 13:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n){return c.apply(this,arguments)})},{key:"renameMeals",value:(i=a(regeneratorRuntime.mark((function e(){var r,t,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.Meal.findAll();case 2:r=e.sent,t=new Date,n=r.length,a=0;case 6:if(!(a<n)){e.next=13;break}return o=r[a],e.next=10,this.renameMeal(o,a,n,t);case 10:a++,e.next=6;break;case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"renameMeal",value:(s=a(regeneratorRuntime.mark((function e(r,t,n,a){var o,s,i,c,l,u,p,d,m,h,f,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=r.name,"f"===(s=r.foodtag)&&(s="a"),"l"===s&&(s="c"),i=this.calcTimeLeft(a,t,n),console.log("Rename Meal ("+(t+1)+"/"+n+") ["+i+"]: "+o),c=r.text1Eng,l=r.text2Eng,u=r.text3Eng,p=r.text4Eng,d=r.text5Eng,m=r.text6Eng,h=[c,l,u,p,d,m],f="",v=0;v<h.length;v++)f+=(g=h[v]).replace(/ \(.*/g,""),v<h.length-1&&""!==g&&""!==h[v+1]&&(f+=", ");return e.next=17,r.update({nameEng:f,foodtag:s});case 17:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n){return s.apply(this,arguments)})}])&&o(r.prototype,t),n&&o(r,n),e}()},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,o){var s=e.apply(r,t);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return i}));var s=t(7),i=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[MealRatingSchedule] initialising"),this.models=t,this.initializeSchedule(),this.logger.info("[MealRatingSchedule] initialised")}var r,t,n,i,c;return r=e,(t=[{key:"initializeSchedule",value:function(){var e=this,r=s.scheduleJob("0 0 19 * * *",(function(){e.evaluateMealRatings()}));this.checkSchedule=r}},{key:"evaluateMealRatings",value:(c=a(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("[MealRatingSchedule] initialising"),e.prev=1,e.next=4,this.models.Meal.findAll();case 4:if(!(r=e.sent)){e.next=14;break}t=0;case 7:if(!(t<r.length)){e.next=14;break}return n=r[t],e.next=11,this.evaluateMeal(n);case 11:t++,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),this.logger.error("[MealRatingSchedule] error"),this.logger.error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return c.apply(this,arguments)})},{key:"evaluateMeal",value:(i=a(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}return e.prev=1,e.next=4,r.getMealRatings();case 4:if(t=e.sent,n=null,a=0,(o=t.length)>0){for(s=0;s<o;s++)i=t[s],c=i.value,a+=c;n=a/o,n=parseFloat(n.toFixed(1))}return o=o>0?o:null,e.next=12,r.update({rating_average:n,rating_amount:o});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),this.logger.error("[MealRatingSchedule] evaluateMeal error"),this.logger.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return i.apply(this,arguments)})}])&&o(r.prototype,t),n&&o(r,n),e}()},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,o){var s=e.apply(r,t);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return l}));var s=t(12),i=t(7),c=t(124).default,l=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[NewsSchedule] initialising"),this.models=t,this.initializeSchedule(),this.logger.info("[NewsSchedule] initialised")}var r,t,n,l,u,p,d,m;return r=e,(t=[{key:"initializeSchedule",value:function(){var e=this,r=i.scheduleJob("0 0 17 * * *",(function(){e.runNewsSchedule()}));this.checkSchedule=r}},{key:"runNewsSchedule",value:(m=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNewsRemote();case 2:return r=e.sent,r=this.sortNewsByDate(r),e.next=6,this.checkNewsInDatabase(r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"sortNewsByDate",value:function(e){return e=e.sort((function(e,r){return new Date(e.date)-new Date(r.date)}))}},{key:"checkNewsInDatabase",value:(d=a(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<r.length)){e.next=8;break}return n=r[t],e.next=5,this.createNewsItemIfNotFound(n);case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"createNewsItemIfNotFound",value:(p=a(regeneratorRuntime.mark((function e(r){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.models.News.findOne({where:r}).then((function(e){e||t.models.News.build(r).save().then((function(e){})).catch((function(e){t.logger.error("NewsShedule"),t.logger.error(e)}))})).catch((function(e){t.logger.error("NewsShedule"),t.logger.error(e)}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getNewsRemote",value:(u=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHTMLPage();case 2:return r=e.sent,t=this.extractNewsHtmlItems(r),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"removeNonAsciiCharacters",value:function(e){return e=(e=(e=(e=e.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g,"")).replace(/&quot;/g,'"')).replace(/&nbsp;/g,"")).replace(/&amp;;/g,"&")}},{key:"extractDateFromArticle",value:function(e){var r=e.find("a").previousElement.nextSibling._text,t=new c(r).find("span").nextElement._text.replace(/[^a-zA-Z0-9\.]/g,""),n=t.split("."),a=n[2],o=n[0],s=n[1];return t=new Date(s+"/"+o+"/"+a)}},{key:"extractTitleFromArticle",value:function(e){var r=e.find("a").attrs.title;return r=this.removeNonAsciiCharacters(r)}},{key:"extractContentFromArticle",value:function(e){for(var r=e.findAll("div"),t="",n=0;n<r.length;n++){var a=r[n];"teaser-text"===a.attrs.class&&(t=a.find("div").getText())}return t=this.removeNonAsciiCharacters(t)}},{key:"extractImageURLFromArticle",value:function(r){for(var t=r.findAll("div"),n="",a=0;a<t.length;a++)"news-img-wrap"===t[a].attrs.class&&r.find("img")&&(n=e.homepageURL+r.find("img").attrs.src);return n}},{key:"extractURLFromArticle",value:function(r){var t=r.find("a").attrs.href;return null!=t&&(t=e.homepageURL+t),t}},{key:"extractNewsHtmlItems",value:function(e){for(var r=new c(e).findAll("div"),t=[],n=0;n<r.length;n++)"news-list-view"===r[n].attrs.class&&(t=r[n]);t=t.findAll("div");for(var a=[],o=0;o<t.length;o++)if("article  articletype-0"===t[o].attrs.class){var s=t[o],i=this.extractDateFromArticle(s)||null,l=this.extractImageURLFromArticle(s),u=this.extractContentFromArticle(s),p=this.extractURLFromArticle(s),d=this.extractTitleFromArticle(s);i&&d&&a.push({title:d,abstract:u,externURL:p,imageURL:l,date:i})}return a}},{key:"loadHTMLPage",value:(l=a(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s(e.newsURL);case 3:return t=r.sent,r.next=6,t.text();case 6:return r.abrupt("return",r.sent);case 9:return r.prev=9,r.t0=r.catch(0),r.abrupt("return",void 0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])}))),function(){return l.apply(this,arguments)})}])&&o(r.prototype,t),n&&o(r,n),e}();l.homepageURL="https://www.studentenwerk-osnabrueck.de",l.newsURL=l.homepageURL+"/de/nachrichten.html"},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return s}));var o=t(7),s=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[FavoriteMealReminderSchedule] initialising"),this.models=t,this.firebaseAPI=n,this.initializeSchedule(),this.logger.info("[FavoriteMealReminderSchedule] initialised"),this.isRunning=!1}var r,t,s,i,c;return r=e,(t=[{key:"initializeSchedule",value:function(){var e=this,r=o.scheduleJob("0 30 10 * * *",(function(){e.startScanForFavoriteMeals()}));this.checkSchedule=r}},{key:"startScanForFavoriteMeals",value:(i=regeneratorRuntime.mark((function e(){var r,t,n,a,o,s,i,c,l,u,p,d,m,h,f,v,g,x,b,y,R,w,_,k,C,N,E,S,O,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="userInstance",this.logger.info("[FavoriteMealReminderSchedule] starting for looking if canteens offers favorite meals"),t=new Date,e.next=5,this.models.CanteenMeal.findAll({where:{date:t.toISOString()}});case 5:if(!(n=e.sent)){e.next=50;break}a={},o=0;case 9:if(!(o<n.length)){e.next=25;break}return s=n[o],e.next=13,s.getMeal();case 13:return i=e.sent,e.next=16,s.getCanteen();case 16:if(c=e.sent,!i||!c){e.next=22;break}return e.next=20,i.getUsersFavorite();case 20:if(l=e.sent)for(u=0;u<l.length;u++)p=l[u],(d=p.CanteenId)&&c.id+""==d+""&&((m=a[p.id]||{})[r]=p,m[i.id]=i.name,a[p.id]=m);case 22:o++,e.next=9;break;case 25:h=Object.keys(a),f={},v=0;case 28:if(!(v<h.length)){e.next=48;break}return g=h[v],x=a[g],b=x.userInstance,e.next=34,b.getDevice();case 34:if(!(y=e.sent)||!y.pushNotificationToken){e.next=44;break}for(R=y.pushNotificationToken,w=Object.keys(x),_="",k=0;k<w.length;k++)(C=w[k])!==r&&(N=x[C],_+=N+" und ");_+="mehr",f[R]=_,e.next=45;break;case 44:return e.abrupt("break",48);case 45:v++,e.next=28;break;case 48:for(E=Object.keys(f),S=0;S<E.length;S++)O=E[S],A=f[O],this.firebaseAPI.sendPushNotification([O],"Heute",A,1);case 50:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,r=arguments;return new Promise((function(t,a){var o=i.apply(e,r);function s(e){n(o,t,a,s,c,"next",e)}function c(e){n(o,t,a,s,c,"throw",e)}s(void 0)}))},function(){return c.apply(this,arguments)})}])&&a(r.prototype,t),s&&a(r,s),e}()},function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t(3);function a(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(7),c=t(42),l=t(19).server.email,u=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[MealFeedbackToCanteenSchedule] initialising"),this.models=t,this.initializeSchedule(),this.logger.info("[MealFeedbackToCanteenSchedule] initialised")}var r,t,a,u,p,d,m,h,f;return r=e,(t=[{key:"initializeSchedule",value:(f=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initializeCanteenNotiicationSchedule();case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"initializeCanteenNotiicationSchedule",value:(h=o(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,t=i.scheduleJob("0 5 1 * * *",(function(){r.startEvaluation()})),this.canteenNotifierSchedule=t;case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"startEvaluation",value:(m=o(regeneratorRuntime.mark((function e(){var r,t,a,o,s,i,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,t=r,a=n.a.validateAndFormatDate(t.getDate(),t.getMonth()+1,t.getFullYear()),o={1:["mensa-westerberg@studentenwerk-osnabrueck.de","joerg.zuroven@studentenwerk-osnabrueck.de","nilsbaumgartner1994@gmail.com","theo.thoele@studentenwerk-osnabrueck.de","philipp.heckmann@studentenwerk-osnabrueck.de","Nathalie.Pflaum@studentenwerk-osnabrueck.de"],3:["mensa-schlossgarten@studentenwerk-osnabrueck.de","joerg.zuroven@studentenwerk-osnabrueck.de","nilsbaumgartner1994@gmail.com","theo.thoele@studentenwerk-osnabrueck.de","philipp.heckmann@studentenwerk-osnabrueck.de","Nathalie.Pflaum@studentenwerk-osnabrueck.de"]},s=Object.keys(o),i=0;case 6:if(!(i<s.length)){e.next=14;break}return c=s[i],l=o[c],e.next=11,this.startEvaluationForCanteenAndDate(a,c,l);case 11:i++,e.next=6;break;case 14:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"startEvaluationForCanteenAndDate",value:(d=o(regeneratorRuntime.mark((function e(r,t,n){var a,o,s,i,c,l,u,p,d,m,h,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("startEvaluationForCanteenAndDate"),console.log("canteenId: "+t+" date: "+r),a=r.getDate(),o=r.getMonth()+1,i="Bisher erhaltenes Feedback aus den vergangengen "+(s=180)+" Tagen zu den Rezepten von heute.<br>Angebot am "+a+"."+o+".<br><br>",e.next=8,this.getOfferedMealsWithMeals(t,r);case 8:c=e.sent,l=0;case 10:if(!(l<c.length)){e.next=24;break}if(!(u=c[l])){e.next=21;break}if(p=u.MealId,d=[],!p){e.next=19;break}return e.next=18,this.getMealCommentsWithinDays(t,p,s,r);case 18:d=e.sent;case 19:m=u.Meal,i+=this.getFormatedTextMealFeedback(u,d,m,s);case 21:l++,e.next=10;break;case 24:for(h="<html><head><style>table {width:100%; border-collapse: collapse;} td, th {border:1px solid black;}</style></head><body>"+i+"<br><br>Dieser Report wurde von ESMA automatisch generiert und ist laut allgemeiner Geschftsanweisung Absatz 11 ohne Unterschrift gltig ;-)</body></html>",f=0;f<n.length;f++)v=n[f],this.sendMail(v,"Feedback fr: "+a+"."+o+" | Mensa Nummer: "+t,h);case 26:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return d.apply(this,arguments)})},{key:"getFormatedTextMealFeedback",value:function(e,r,t,n){var a="<h2>"+e.displayName+"</h2>",o="",s="";if(t){var i=t.rating_average;i&&(o=i);var c=t.rating_amount;c&&(s=c)}return a+="Durchschn. Bewertung: "+o+"/5<br>Anzahl Bewertungen: "+s+"<br>",a+=this.getFormatedTextMealComments(r,n),a+="<br><br>"}},{key:"escapeHtml",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"getFormatedTextMealComments",value:function(e,r){if(e&&0===e.length)return"Keine Kommentare aus den vergangenen "+r+" Tagen.";var t='<table><tr><th style="width: 80%">Kommentar</th><th style="width: 20%">Datum</th></tr>';if(e)for(var n=0;n<e.length;n++){var a=e[n],o=a.text;o&&(o=this.escapeHtml(o));var s=a.createdAt;s&&(s=new Date(s))&&(s=s.getDate()+"."+(s.getMonth()+1)+"."+s.getFullYear()),t+="<tr><td>"+o+"</td><td>"+s+"</td></tr>"}return t+="</table><br>"}},{key:"getOfferedMealsWithMeals",value:(p=o(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.CanteenMeal.findAll({include:[{model:this.models.Meal}],where:{CanteenId:r,date:t.toISOString()}});case 2:return n=e.sent,console.log("Found Canteen meals: "+n.length),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,r){return p.apply(this,arguments)})},{key:"getMealCommentsWithinDays",value:(u=o(regeneratorRuntime.mark((function e(r,t,a,o){var s,i,c,l,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.MealComment.findAll({where:{MealId:t,CanteenId:r}});case 2:for(s=e.sent,console.log("getMealCommentsWithinDays: canteenId: "+r+" mealId: "+t+" amountRaw: "+s.length),i=[],c=24*a*60*60,l=0;l<s.length;l++)(u=s[l])&&(p=u.createdAt)&&(p=new Date(p),n.a.diff_seconds(o,p)<=c&&i.push(u));return console.log("getMealCommentsWithinDays: canteenId: "+r+" mealId: "+t+" amountFiltered: "+i.length),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n){return u.apply(this,arguments)})},{key:"sendMail",value:function(e,r,t){var n={from:l.auth.user,to:e,subject:r,html:t};c.createTransport(l).sendMail(n,(function(e,r){e?console.log(e):console.log("Email sent: "+r.response)}))}}])&&s(r.prototype,t),a&&s(r,a),e}()},function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var n=t(3);function a(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(7),c=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[UserInactivitySchedule] initialising"),this.models=t,this.firebaseAPI=n,this.initializeSchedule(),this.logger.info("[UserInactivitySchedule] initialised")}var r,t,a,c,l,u,p;return r=e,(t=[{key:"initializeSchedule",value:function(){var e=this,r=i.scheduleJob("0 0 18 * * *",(function(){e.runUserInactivitySchedule()}));this.checkSchedule=r}},{key:"runUserInactivitySchedule",value:(p=o(regeneratorRuntime.mark((function e(){var r,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,this.models.User.findAll().then((function(e){for(var n=0;n<e.length;n++){var a=e[n];t.checkUserInactiviy(a,r)}})).catch((function(e){}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"checkUserInactiviy",value:(u=o(regeneratorRuntime.mark((function r(t,a){var o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=t.online_time)){r.next=13;break}if(!((s=n.a.diff_minutes_abs(a,o))>e.minutesOfInactivityUntilDeletion)){r.next=8;break}return r.next=6,this.deleteInactieUser(t);case 6:r.next=11;break;case 8:if(!(s>e.minutesOfInactiviyAfterInactivityMessage)){r.next=11;break}return r.next=11,this.sendUserInactivityMessage(t,"due inactivity your Account will be deleted in the next days!");case 11:r.next=13;break;case 13:case"end":return r.stop()}}),r,this)}))),function(e,r){return u.apply(this,arguments)})},{key:"sendUserInactivityMessage",value:(l=o(regeneratorRuntime.mark((function e(r,t){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.pseudonym||"User",e.next=3,r.getDevice();case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(o=a.pushNotificationToken){e.next=9;break}return e.abrupt("return");case 9:t="Hey '"+n+"', "+t,this.firebaseAPI.sendPushNotification([o],"Inactiviy",t,0);case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return l.apply(this,arguments)})},{key:"deleteInactieUser",value:(c=o(regeneratorRuntime.mark((function e(r){var t,n,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.pseudonym||"User",n=null,e.next=4,r.getDevice();case 4:(a=e.sent)&&(n=a.pushNotificationToken),r.destroy().then((function(e){if(n){var r="Hey '"+t+"', you are now deleted :-( Goodby !";o.firebaseAPI.sendPushNotification([n],"Account Deletion",r,0)}})).catch((function(e){if(n){var r="Hey '"+t+"', we coudnt you delete !? Please report this to us";o.firebaseAPI.sendPushNotification([n],"Account Deletion",r,0)}o.logger.error("UserInactivitySchedule"),o.logger.error(e)}));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})}])&&s(r.prototype,t),a&&s(r,a),e}();c.minutesOfInactivityUntilDeletion=262080,c.minutesOfInactiviyAfterInactivityMessage=c.minutesOfInactivityUntilDeletion-2880},function(e,r,t){"use strict";t.d(r,"a",(function(){return m}));var n=t(3),a=t(9),o=t(28),s=t.n(o);function i(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=t(7),p=t(42),d=t(19).server.email,m=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[EmergencyCareCanteenSchedule] initialising"),this.models=t,this.initializeSchedule(),this.logger.info("[EmergencyCareCanteenSchedule] initialised")}var r,t,o,i,m,h,f,v,g,x,b,y;return r=e,(t=[{key:"initializeSchedule",value:(y=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initializeCanteenNotiicationSchedule();case 1:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"initializeCanteenNotiicationSchedule",value:(b=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,t=u.scheduleJob("0 0 1 * * *",(function(){r.startEvaluation()})),this.canteenNotifierSchedule=t;case 3:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"formatToTimeZone",value:function(e){var r=""+e.toISOString(),t=a.DateTime.fromISO(r,{zone:"Europe/Berlin"});return console.log(t),t}},{key:"startEvaluation",value:(x=c(regeneratorRuntime.mark((function e(){var r,t,n,a,o,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,t=r,n={"1 2":["mensa-westerberg@studentenwerk-osnabrueck.de","joerg.zuroven@studentenwerk-osnabrueck.de","nilsbaumgartner1994@gmail.com","theo.thoele@studentenwerk-osnabrueck.de","philipp.heckmann@studentenwerk-osnabrueck.de","Nathalie.Pflaum@studentenwerk-osnabrueck.de"],3:["mensa-schlossgarten@studentenwerk-osnabrueck.de","joerg.zuroven@studentenwerk-osnabrueck.de","nilsbaumgartner1994@gmail.com","theo.thoele@studentenwerk-osnabrueck.de","philipp.heckmann@studentenwerk-osnabrueck.de","Nathalie.Pflaum@studentenwerk-osnabrueck.de"],8:["joerg.zuroven@studentenwerk-osnabrueck.de","nilsbaumgartner1994@gmail.com","theo.thoele@studentenwerk-osnabrueck.de","philipp.heckmann@studentenwerk-osnabrueck.de","Nathalie.Pflaum@studentenwerk-osnabrueck.de"]},a=Object.keys(n),o=0;case 5:if(!(o<a.length)){e.next=14;break}return s=a[o],i=n[s],c=s.split(" "),e.next=11,this.startEvaluationForCanteenAndDate(t,c,i);case 11:o++,e.next=5;break;case 14:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"startEvaluationForCanteenAndDate",value:(g=c(regeneratorRuntime.mark((function e(r,t,n){var a,o,s,i,c,l,u,p,d,m,h,f,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("startEvaluationForCanteenAndDate"),console.log("canteenId: "+t+" date: "+r),console.log(t),a=[],o=0;case 5:if(!(o<t.length)){e.next=14;break}return s=t[o],e.next=9,this.getAllOrdersForCanteen(s,r);case 9:i=e.sent,a=a.concat(i);case 11:o++,e.next=5;break;case 14:return console.log("Orders Total: "+a.length),c=this.getAllOrdersSortedByTimeslot(a),e.next=18,this.getOrderDetailsCompact(a);case 18:return l=e.sent,console.log("orderDetailsCompact"),console.log(l),console.log("Start Getting Detailed Text"),e.next=24,this.convertSortedOrdersByTimeslotToMailFormat(c);case 24:return u=e.sent,e.next=27,this.convertCompactDetailsToMailFormat(l);case 27:for(p=e.sent,d="<html><head><style>table {width:100%; border-collapse: collapse;} td, th {border:1px solid black;}</style></head><body>"+u+p+"<br><br>Dieser Report wurde von SWOSY automatisch generiert und ist laut allgemeiner Geschftsanweisung Absatz 11 ohne Unterschrift gltig ;-)</body></html>",m=r.getDate(),h=r.getMonth()+1,f=t.toString(),v=0;v<n.length;v++)g=n[v],this.sendMail(g,"Bestellungen zum: "+m+"."+h+" | Mensa Nummer: "+f,d);case 33:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return g.apply(this,arguments)})},{key:"convertCompactDetailsToMailFormat",value:(v=c(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(r),n="<table><tr><th>Anzahl</th><th>Gericht</th></tr>",a=0;case 3:if(!(a<t.length)){e.next=13;break}return o=t[a],s=r[o],e.next=8,this.getMealNameById(o);case 8:i=e.sent,n+="<tr><td>"+s+"</td><td>"+i+"</td></tr>";case 10:a++,e.next=3;break;case 13:return n+="</table>",0===t.length&&(n="Keine"),e.abrupt("return","<h1>Alle Bestellungen zusammengefasst</h1>"+n);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getMealNameById",value:(f=c(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.Meal.findOne({where:{id:r}});case 2:return t=e.sent,e.abrupt("return",t.name);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getOrderDetailsCompact",value:(h=c(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,i,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=0;case 2:if(!(n<r.length)){e.next=11;break}return a=r[n],e.next=6,a.getOrderDetails();case 6:for(o=e.sent,s=0;s<o.length;s++)i=o[s],c=i.MealId,l=i.amount,u=t[c]||0,u+=l,t[c]=u;case 8:n++,e.next=2;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"convertSortedOrdersByTimeslotToMailFormat",value:(m=c(regeneratorRuntime.mark((function e(r){var t,a,o,s,i,c,l,u,p,d,m,h,f,v,g,x,b,y,R,w,_,k,C,N,E,S,O,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",a=Object.keys(r),o=0;case 3:if(!(o<a.length)){e.next=47;break}s=a[o],i=r[s],c=Object.keys(i),l=0;case 8:if(!(l<c.length)){e.next=44;break}u=c[l],t+="<h3>"+n.a.pad(s,2)+":"+n.a.pad(u,2)+":</h3>",t+='<table><tr><th style="width: 10%">Anzahl</th><th style="width: 70%">Gericht</th><th style="width: 20%">BestellNummern</th></tr>',p=i[u],d={},m=0;case 15:if(!(m<p.length)){e.next=25;break}return h=p[m],f=h.id,e.next=20,h.getOrderDetails();case 20:for(v=e.sent,g=0;g<v.length;g++){for(x=v[g],b=x.MealId,y=x.amount,R=d[b]||[],w=0;w<y;w++)R.push(f);d[b]=R}case 22:m++,e.next=15;break;case 25:_=Object.keys(d),k=0;case 27:if(!(k<_.length)){e.next=40;break}return C=_[k],N=d[C],e.next=32,this.getMealNameById(C);case 32:for(E=e.sent,S=N.length,O="",A=0;A<S;A++)O+=N[A],A<S-1&&(O+=", ");t+="<tr><td>"+S+"</td><td>"+E+"</td><td>"+O+"</td></tr>";case 37:k++,e.next=27;break;case 40:t+="</table><br>";case 41:l++,e.next=8;break;case 44:o++,e.next=3;break;case 47:return 0===a.length&&(t="Keine"),e.abrupt("return","<h1>Nach Uhrzeiten Gelistet</h1><br>"+t);case 49:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getAllOrdersSortedByTimeslot",value:function(e){for(var r={},t=0;t<e.length;t++){var n=e[t],a=this.formatToTimeZone(n.timeslot),o=a.hour,s=a.minute,i=r[o]||{},c=i[s]||[];c.push(n),i[s]=c,r[o]=i}return r}},{key:"getAllOrdersForCanteen",value:(i=c(regeneratorRuntime.mark((function e(r,t){var n,a,o,i,c,l,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s()(t,"mm/dd/yyyy"),console.log("getAllOrdersForCanteen: "+r+" date: "+t),e.next=4,this.models.Order.findAll({where:{CanteenId:r}});case 4:for(a=e.sent,o=[],i=0;i<a.length;i++)c=a[i],(l=c.timeslot)&&(u=new Date(l),p=s()(u,"mm/dd/yyyy"),n===p&&o.push(c));return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e,r){return i.apply(this,arguments)})},{key:"sendMail",value:function(e,r,t){var n={from:d.auth.user,to:e,subject:r,html:t};p.createTransport(d).sendMail(n,(function(e,r){e?console.log(e):console.log("Email sent: "+r.response)}))}}])&&l(r.prototype,t),o&&l(r,o),e}()},function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var n=t(24);function a(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(7),c=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.databaseBackupModule=new n.a(r),this.initializeSchedule()}var r,t,a,c,l;return r=e,(t=[{key:"initializeSchedule",value:(l=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("[DatabaseBackupSchedule] initialising"),e.next=3,this.initializeBackupchedule();case 3:this.logger.info("[DatabaseBackupSchedule] initialised");case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"initializeBackupchedule",value:(c=o(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,t=i.scheduleJob("0 0 2 * * *",(function(){r.photoBackupModule.exportDatabase()})),this.computerSchedule=t;case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})}])&&s(r.prototype,t),a&&s(r,a),e}()},function(e, r, t){"use strict";var n=t(3),a=t(2);function o(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length); r<e.length; r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(8),c=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n;return r=e,n=[{key:"getIdentifier",value:function(e){return e.TEXT1+e.TEXT2+e.TEXT3+e.TEXT4+e.TEXT5+e.TEXT6}},{key:"getUniqueIdentifier",value:function(r){return r.MENSA+r.DATUM+e.getIdentifier(r)}},{key:"getListOfIdentier",value:function(e){return[e.TEXT1,e.TEXT2,e.TEXT3,e.TEXT4,e.TEXT5,e.TEXT6]}},{key:"sortMealId",value:function(e){var r=new String(e).split("-").map(Number);return o(new Set(r)).map(Number).sort((function(e,r){return e-r})).map(String).join("-")}},{key:"removeImpossibleAllegeneConstalation",value:function(e,r){for(var t=[],n={21:["13","14","20","25","40","n","c","b","g"],20:["13","14","25","40","n","b"]},a=0;a<e.length;a++){var o=e[a];if(n[o]){for(var s=n[o],i=!1,c=0;c<r.length;c++){var l=r[c];s.indexOf(l)>=0&&(i=!0)}i||t.push(o)}else t.push(o)}return t}},{key:"parseAllergene",value:function(r,t){for(var n=[],a=0;a<r.length;a++)if(r[a]){var o=r[a].match(/\([^ ]+/gm);if(!o)continue;for(var s in o)for(var i=new String(o[s]).replace("(","").replace(")","").split(","),c=0;c<i.length;c++){var l=i[c].trim();n.includes(l)||n.push(l)}}return e.removeImpossibleAllegeneConstalation(n,n).join(", ")}},{key:"getMealsJson",value:function(r){for(var t=new String(i.readFileSync(r,"latin1")).split("\r"),n=[],a={},o=0;o<t.length;o++){var s=t[o].trim();if(0===o)for(var c=s.split("\t"),l=0;l<c.length;l++)n.push(c[l]);else{if(""===s)continue;for(var u={},p=s.split("\t"),d=0;d<n.length;d++)u[n[d]]=p.length>d?p[d]:"";var m=e.getIdentifier(u);a[u.MENSA]||(a[u.MENSA]={}),a[u.MENSA][u.DATUM]||(a[u.MENSA][u.DATUM]={}),a[u.MENSA][u.DATUM][m]||(a[u.MENSA][u.DATUM][m]=[]),a[u.MENSA][u.DATUM][m].push(u)}}var h=[];for(var f in a)for(var v in a[f])for(var g in a[f][v])h.push(a[f][v][g]);var x=[],b={};for(var y in h){for(var R in h[y])b&&e.getUniqueIdentifier(b)===e.getUniqueIdentifier(h[y][R])?b.REZEPTUR_ID+="-"+h[y][R].REZEPTUR_ID:b=h[y][R];b.mealId=b.REZEPTUR_ID,delete b.REZEPTUR_ID,x.push(b)}var w={};for(var _ in x)x[_].mealId=e.sortMealId(x[_].mealId),x[_].totalMarkings=e.parseAllergene(e.getListOfIdentier(x[_]),x[_].ZSNUMMERN),w[x[_].DATUM]||(w[x[_].DATUM]={}),w[x[_].DATUM][x[_].MENSA]||(w[x[_].DATUM][x[_].MENSA]=[]),w[x[_].DATUM][x[_].MENSA].push(x[_]);return w}}],(t=null)&&s(r.prototype,t),n&&s(r,n),e}(),l=t(4);function u(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function p(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){u(o,n,a,s,i,"next",e)}function i(e){u(o,n,a,s,i,"throw",e)}s(void 0)}))}}function d(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return h}));var m=t(7),h=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[MealParseSchedule] initialising"),this.models=t,this.resetLoggingParams(),this.initializeSchedule(),this.logger.info("[MealParseSchedule] initialised")}var r,t,o,s,i,u,h,f,v,g;return r=e,(t=[{key:"resetLoggingParams",value:function(){this.amountMealFound=0,this.amountMealUpdated=0,this.cachedExport=""}},{key:"initializeSchedule",value:function(){var e=this,r=m.scheduleJob("*/10 * * * * *",(function(){e.searchForNewParsedFiles()}));this.checkSchedule=r}},{key:"searchForNewParsedFiles",value:(g=p(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.a.doesPathExist("/home/exchangefiles/mensa/SWOSY-Export-Rez.txt")){e.next=11;break}if(r=c.getMealsJson("/home/exchangefiles/mensa/SWOSY-Export-Rez.txt"),(t=JSON.stringify(r))===this.cachedExport){e.next=11;break}return this.resetLoggingParams(),this.cachedExport=t,e.next=9,this.parseFoundFileIntoDatabase(r);case 9:a.a.updateTableUpdateTimesByTableNameAndModels("Meal",this.models,"Master",this.logger),a.a.updateTableUpdateTimesByTableNameAndModels("CanteenMeal",this.models,"Master",this.logger);case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"parseFoundFileIntoDatabase",value:(v=p(regeneratorRuntime.mark((function e(r){var t,a,o,s,i,c,l,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(r),a=0;case 2:if(!(a<t.length)){e.next=18;break}if(o=t[a],s=r[o],i=o.split("."),c=i[0],l=i[1],u=i[2],!(p=n.a.validateAndFormatDate(c,l,u))){e.next=15;break}return e.next=13,this.deleteAllMealsOfferedAtDayForAllCanteens(p);case 13:return e.next=15,this.findAllCanteensForDayData(r,p,s);case 15:a++,e.next=2;break;case 18:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"deleteAllMealsOfferedAtDayForAllCanteens",value:(f=p(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.CanteenMeal.destroy({where:{date:r.toISOString()}});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"deleteAllMealsOfferedAtDayForCanteen",value:(h=p(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.CanteenMeal.destroy({where:{CanteenId:r.id,date:t.toISOString()}});case 2:case"end":return e.stop()}}),e,this)}))),function(e,r){return h.apply(this,arguments)})},{key:"findAllCanteensForDayData",value:(u=p(regeneratorRuntime.mark((function e(r,t,n){var a,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object.keys(n),o=0;case 2:if(!(o<a.length)){e.next=10;break}return s=a[o],i=n[s],e.next=7,this.findAllMealsForCanteenForDay(r,t,s,i);case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return u.apply(this,arguments)})},{key:"findAllMealsForCanteenForDay",value:(i=p(regeneratorRuntime.mark((function e(r,t,n,a){var o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.models.Canteen.findOne({where:{name:n}});case 2:o=e.sent,s=0;case 4:if(!(s<a.length)){e.next=11;break}return i=a[s],e.next=8,this.parseMealIntoCanteenAtDate(o,t,i);case 8:s++,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)}))),function(e,r,t,n){return i.apply(this,arguments)})},{key:"parseMealIntoCanteenAtDate",value:(s=p(regeneratorRuntime.mark((function e(r,t,n){var a,o,s,i,c,l,u,p,d,m,h,f,v,g,x,b,y,R,w,_,k,C,N,E,S,O,A,I,D,T,F,U,M,P,j=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.mealId,o=n.totalMarkings,s=n.FREI1,i=n.SPEISE_BEZEICHNUNG,c=n.SPEISE,e.next=7,this.models.RecipeType.findOrCreate({where:{name:i}});case 7:return l=e.sent,e.next=10,this.models.RecipeGroup.findOrCreate({where:{name:c}});case 10:if(u=e.sent,p=l[0],d=u[0],m=null,!d||""===c||!c){e.next=19;break}if(m=d.id,""===d||!p){e.next=19;break}return e.next=19,d.setRecipeType(p);case 19:for(h=parseFloat(n.STD_PREIS.replace(",",".")),f=parseFloat(n.BED_PREIS.replace(",",".")),v=parseFloat(n["GSTE_PREIS"].replace(",",".")),g=n.TEXT1,x=n.TEXT2,b=n.TEXT3,y=n.TEXT4,R=n.TEXT5,w=n.TEXT6,_=n.TEXT1_1,k=n.TEXT2_1,C=n.TEXT3_1,N=n.TEXT4_1,E=n.TEXT5_1,S=n.TEXT6_1,O="",A="",I=1;I<7;I++)D=n["TEXT"+I],T=D.replace(/ \([^ ]+/gm,""),O+=T,F=n["TEXT"+I+"_1"],A+=F.replace(/ \([^ ]+/gm,""),I<6&&""!==D&&""!==n["TEXT"+(I+1)]&&(O+=", ",A+=", ");if(""!==O){e.next=39;break}return e.abrupt("return");case 39:return e.next=41,this.models.Meal.findOne({where:{id:a}});case 41:if(U=e.sent){e.next=48;break}return e.next=45,this.models.Meal.create({id:a,name:O,nameEng:A,text1:g,text2:x,text3:b,text4:y,text5:R,text6:w,text1Eng:_,text2Eng:k,text3Eng:C,text4Eng:N,text5Eng:E,text6Eng:S,foodtag:s,RecipeGroupId:m});case 45:U=e.sent,e.next=50;break;case 48:return e.next=50,U.update({name:O,nameEng:A,text1:g,text2:x,text3:b,text4:y,text5:R,text6:w,text1Eng:_,text2Eng:k,text3Eng:C,text4Eng:N,text5Eng:E,text6Eng:S,foodtag:s});case 50:if(null!==U){e.next=53;break}e.next=57;break;case 53:return e.next=55,this.models.CanteenMeal.findOne({where:{CanteenId:r.id,MealId:U.id,date:t.toISOString()}});case 55:(M=e.sent)?M.update({displayName:O,displayNameEng:A,totalMarkings:o,priceStudent:h,priceEmployee:f,priceGuest:v}).then((function(e){j.amountMealUpdated++})).catch((function(e){})):(P={CanteenId:r.id,MealId:U.id,displayName:O,displayNameEng:A,totalMarkings:o,date:t.toISOString(),priceStudent:h,priceEmployee:f,priceGuest:v},(M=this.models.CanteenMeal.build(P)).save().then((function(e){j.amountMealFound++})).catch((function(e){})));case 57:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return s.apply(this,arguments)})}])&&d(r.prototype,t),o&&d(r,o),e}()},function(e,r,t){"use strict";function n(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,o){var s=e.apply(r,t);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=t(12),i=t(125),c=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n,c,l,u;return r=e,t=null,n=[{key:"getAllTerminalFromIntercard",value:(u=a(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getAllTerminalsRawFromIntercard();case 2:return t=r.sent,r.next=5,e.parseTerminalsRawFromIntercardToJSON(t);case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}}),r)}))),function(){return u.apply(this,arguments)})},{key:"getAllTerminalsRawFromIntercard",value:(l=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,s("http://131.173.252.37:8080/smartWASH-WebService/JaxWsWashService/getAllTerminals");case 4:return r=e.sent,e.next=7,r.text();case 7:return t=e.sent,e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(){return l.apply(this,arguments)})},{key:"parseTerminalsRawFromIntercardToJSON",value:(c=a(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,c,l,u,p,d,m,h,f,v,g,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,i.parseStringPromise(r);case 4:for(n=e.sent,a=n["soap:Envelope"],o=a["soap:Body"],s=o[0],c=s["ns1:getAllTerminalsResponse"],l=c[0],u=l.return[0],p=u.list,d=0;d<p.length;d++)m=p[d],h=parseInt(m.terminalN5[0]),f=parseInt(m.automatenNR[0]),v=m.stateRunning[0],g=parseInt(m.expectedFreeTime[0]),x={terminalNr:h,automateNr:f,status:v,expectedFreeTime:g},t.push(x);e.next=17;break;case 15:e.prev=15,e.t0=e.catch(1);case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e){return c.apply(this,arguments)})}],t&&o(r.prototype,t),n&&o(r,n),e}();function l(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){l(o,n,a,s,i,"next",e)}function i(e){l(o,n,a,s,i,"throw",e)}s(void 0)}))}}function p(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(r,"a",(function(){return m}));var d=t(7),m=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=r,this.logger.info("[WasherSchedule] initialising"),this.models=t,this.firebaseAPI=n,this.initializeSchedule(),this.logger.info("[WasherSchedule] initialised")}var r,t,n,a,o,s,i,l,m;return r=e,(t=[{key:"initializeSchedule",value:function(){var e=this,r=d.scheduleJob("0 */1 * * * *",(function(){e.runWasherSchedule()}));this.checkSchedule=r}},{key:"runWasherSchedule",value:(m=u(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getAllTerminalFromIntercard();case 2:if(!(r=e.sent)){e.next=6;break}return e.next=6,this.updateWashers(r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"updateWashers",value:(l=u(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<r.length;t++)n=r[t],this.updateWasher(n);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"createAndSaveWasherJob",value:(i=u(regeneratorRuntime.mark((function e(r,t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.models.WasherJob.build({WasherId:r,startTime:t,stopTime:new Date}).save().then((function(e){})).catch((function(e){n.logger.error(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r){return i.apply(this,arguments)})},{key:"updateWasher",value:(s=u(regeneratorRuntime.mark((function e(r){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.terminalNr,n=r.automateNr,this.models.Washer.findOne({where:{terminalNr:t,automateNr:n}}).then((function(e){if(e){var t=e.status!==r.status,n="false"===r.status,o="true"===r.status;e.status=r.status,e.expectedFreeTime=r.expectedFreeTime,t&&(n&&(a.createAndSaveWasherJob(e.id,e.startTime),e.startTime=null,a.informUsersAboutFinishedWasher(e)),o&&(e.startTime=new Date)),e.save().then((function(e){})).catch((function(e){a.logger.error(e)}))}})).catch((function(e){a.logger.error(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"informUsersAboutFinishedWasher",value:(o=u(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getObservingUsers();case 3:if(t=e.sent,n=[],!t){e.next=16;break}a=0;case 7:if(!(a<t.length)){e.next=16;break}return o=t[a],e.next=11,o.getDevice();case 11:(s=e.sent)&&(i=s.pushNotificationToken)&&(n[n.length]=i);case 13:a++,e.next=7;break;case 16:n.length>0&&this.sendWasherFinishedToPushNotificationTokens(n,r),r.setObservingUsers([]).then((function(e){})).catch((function(e){})),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:case 23:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(e){return o.apply(this,arguments)})},{key:"sendWasherFinishedToPushNotificationTokens",value:(a=u(regeneratorRuntime.mark((function e(r,t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,a=n+" ist nun wieder frei",this.firebaseAPI.sendPushNotification(r,"Washmachinen Benachrichtigung",a,1);case 3:case"end":return e.stop()}}),e,this)}))),function(e,r){return a.apply(this,arguments)})}])&&p(r.prototype,t),n&&p(r,n),e}()},function(e,r,t){t(58),e.exports=t(59)},function(e,r){e.exports=require("babel-polyfill")},function(e,r,t){"use strict";t.r(r),function(e){var r=t(5),n=t.n(r),a=t(16),o=t.n(a),s=t(6),i=t(1),c=t(45),l=t(46),u=t(18),p=t(47),d=t(55),m=t(48),h=t(49),f=t(50),v=t(51),g=t(56),x=t(52),b=t(53),y=t(54),R=t(29);function w(e,r,t,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function _(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){w(o,n,a,s,i,"next",e)}function i(e){w(o,n,a,s,i,"throw",e)}s(void 0)}))}}var k,C,N,E,S,O,A,I,D,T,F,U,M=t(19).server,P=t(8),j=P.realpathSync("."),W={"swosy.sw-os.de":{key:j+"/certificates/swosy-privkey.pem",cert:j+"/certificates/swosy-combined.pem"}},B=t(127),J=t(128),q=t(129).constants,L=t(130),G=t(131),z=t(132),H=t(43),V=B.cpus().length,K=t(133),$=t(134),Z=t(135),Q=t(136),X=t(137),Y=M.redisPort,ee="\n         \n     \n       \n       \n      \n          \n                                            \n";function re(e,r){return te.apply(this,arguments)}function te(){return(te=_(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.isWorker){e.next=3;break}return process.send({workerID:H.worker.id,message:t}),e.abrupt("return");case 3:r||(r="Master"),R.a.addWorkerOutput(r,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.isMaster){e.next=10;break}return console.log("Welcome to"),console.log(ee),R.a.startFancyTerminal(),e.next=6,ae();case 6:re(null,"Models synchronizing ..."),Q.sequelize.sync().then(_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(null,"Models synchronized"),ce();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){re(null,"Error at Model Sync"),console.log(e.toString())})),e.next=11;break;case 10:me();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return oe.apply(this,arguments)}function oe(){return(oe=_(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(null,"Start Redis Server"),re(null,!M.redisAlreadyRunning),M.redisAlreadyRunning){e.next=8;break}return re(null,"No Redis Server found yet, creating on Port: "+Y),r=new X(Y),re(null,"Starting now the server"),e.next=8,r.open((function(e){null===e||re(null,"Error at starting Redis Server: "+e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return ie.apply(this,arguments)}function ie(){return(ie=_(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.on("exit",(function(e,r){re(null,"Some worker died :-(, let's revive him !"),se(H.fork())})),r.on("message",(function(e){re(e.workerID,e.message)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return le.apply(this,arguments)}function le(){return(le=_(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.isMaster){for(re(null,"Cluster Master starting"),null,r=0;r<V;r++)re(null,"Cluster create Worker: "+r),se(H.fork());ue()}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return pe.apply(this,arguments)}function pe(){return(pe=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Master",re("Master","prepareMasterServer"),de("Master"),ve("Master"),ye(),ge(),we(M.metricsPort);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){!function(e){re(e,"createSharedLoggers"),k=new u.a("ServerAPI",e),C=k.getLogger()}(e),T=new l.a(C,Q),(U=K.createClient(Y)).on("error",(function(e){re(null,e)}))}function me(){return he.apply(this,arguments)}function he(){return(he=_(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="Master",H.isWorker&&(r=H.worker.id),re(r,"prepare Server"),de(r),fe(r),xe(r),be(r),we();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){re(e,"Creating Loggers"),N=new u.a("BugReport",e),E=N.getLogger()}function ve(e){re(e,"Creating Master Loggers"),S=new u.a("Environment",e),O=S.getLogger(),A=new u.a("System",e),I=A.getLogger()}function ge(){re("Master","Creating Master Express App"),(D=new o.a).use($()),D.use($({credentials:!0,origin:!0})),D.use("/metrics/metrics",Z.clusterMetrics())}function xe(r){re(r,"Creating ExpressApp"),(D=new o.a).use($()),D.use(Z({autoregister:!1,includePath:!0,metricType:"histogram",includeMethod:!0,buckets:[.1,1,5],normalizePath:[[/\d[\-\d]*/g,"#val"]],promClient:{collectDefaultMetrics:{timeout:1e3}}})),D.use(G()),D.disable("x-powered-by"),D.set("view engine","ejs"),D.set("views",n.a.join(e,"views")),D.use(o.a.json()),D.use($({credentials:!0,origin:!0})),D.use(o.a.static(n.a.join(e,"static")))}function be(e){re(e,"creating Modules"),F=new s.a(C,Q),new i.a(e,C,E,T,D,Q,F.getAccessControlInstance(),U)}function ye(){re("Master","createMasterSchedules"),new p.a(C,Q),new d.a(C,Q),new m.a(C,Q),new b.a(C,Q),new v.a(C,Q),new y.a(C,Q),new f.a(C,Q,T),new h.a(C,Q),new g.a(C,Q,T),new c.a(C,O,I,U),new x.a(C,Q,T)}function Re(e){if(!e||"string"!=typeof e)return[];var r=e.split(/-----END CERTIFICATE-----[\s\n]+-----BEGIN CERTIFICATE-----/);r.map((function(e,t){return t&&(e="-----BEGIN CERTIFICATE-----"+e),t!==r.length-1&&(e+="-----END CERTIFICATE-----"),e=e.replace(/^\n+/,"").replace(/\n+$/,"")}))}function we(e){var r="Master";H.isWorker&&(r=H.worker.id),re(r,"Starting Server ...");var t=M.port;e&&(t=e),H.isMaster&&re("Master","Master Server ready on port: "+t);var n="production";P.realpathSync(".");try{var a=function(e){if(!e||0===Object.keys(e).length)throw new Error("Any certificate wasn't found.");for(var r={},t=0,n=Object.keys(e);t<n.length;t++){var a=n[t],o=e[a];r[a]=z.createSecureContext({key:P.readFileSync(o.key),cert:P.readFileSync(o.cert),ca:o.ca?Re(P.readFileSync(o.ca,"utf8")):null})}return r}(W),o={secureOptions:q.SSL_OP_NO_TLSv1|q.SSL_OP_NO_TLSv1_1,SNICallback:function(e,r){var t=a[e];if(!r)return t;r(null,t)}};J.createServer(o,D).listen(t,(function(e){if(e)return console.error(e);var r="Master";H.isMaster||(r=H.worker.id),re(r,"Server running on https://localhost:".concat(t," [").concat(n,"]}"))}))}catch(e){re(r,"No certificates for https found"),L.createServer(D).listen(t,(function(e){if(e)return console.error(e);re(r,"Server running on http://localhost:".concat(t," [").concat(n,"]}"))}))}}!function(){ne.apply(this,arguments)}()}.call(this,"/")},function(e,r){e.exports=require("react")},function(e,r){e.exports=require("systeminformation")},function(e,r){e.exports=require("perf_hooks")},function(e,r){e.exports=require("bcrypt")},function(e,r){e.exports=require("jsonwebtoken")},function(e,r){e.exports=require("sharp")},function(e,r){e.exports=require("smartcrop-sharp")},function(e,r){e.exports=require("compressing")},function(e,r){e.exports=require("child_process")},function(e,r){e.exports=require("express-fileupload")},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(31)("body-parser"),a=Object.create(null);function o(e){return function(){return function(e){var r=a[e];if(void 0!==r)return r;switch(e){case"json":r=t(73);break;case"raw":r=t(114);break;case"text":r=t(115);break;case"urlencoded":r=t(116)}return a[e]=r}(e)}}r=e.exports=n.function((function(e){var t={};if(e)for(var n in e)"type"!==n&&(t[n]=e[n]);var a=r.urlencoded(t),o=r.json(t);return function(e,r,t){o(e,r,(function(n){if(n)return t(n);a(e,r,t)}))}}),"bodyParser: use individual json/urlencoded middlewares"),Object.defineProperty(r,"json",{configurable:!0,enumerable:!0,get:o("json")}),Object.defineProperty(r,"raw",{configurable:!0,enumerable:!0,get:o("raw")}),Object.defineProperty(r,"text",{configurable:!0,enumerable:!0,get:o("text")}),Object.defineProperty(r,"urlencoded",{configurable:!0,enumerable:!0,get:o("urlencoded")})},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){var r=!0,t=function(e){var r,t="";e.isNative()?t="native":e.isEval()?(r=e.getScriptNameOrSourceURL())||(t=e.getEvalOrigin()):r=e.getFileName();if(r){t+=r;var n=e.getLineNumber();if(null!=n){t+=":"+n;var a=e.getColumnNumber();a&&(t+=":"+a)}}return t||"unknown source"}(e),n=e.getFunctionName(),a=e.isConstructor(),o=!(e.isToplevel()||a),s="";if(o){var i=e.getMethodName(),c=(l=e.receiver).constructor&&l.constructor.name||null;n?(c&&0!==n.indexOf(c)&&(s+=c+"."),s+=n,i&&n.lastIndexOf("."+i)!==n.length-i.length-1&&(s+=" [as "+i+"]")):s+=c+"."+(i||"<anonymous>")}else a?s+="new "+(n||"<anonymous>"):n?s+=n:(r=!1,s+=t);var l;r&&(s+=" ("+t+")");return s}},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,r){return e.listeners(r).length}},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(13),a=t(25),o=t(20),s=t(21)("body-parser:json"),i=t(22),c=t(23);e.exports=function(e){var r=e||{},t="number"!=typeof r.limit?n.parse(r.limit||"100kb"):r.limit,p=!1!==r.inflate,d=r.reviver,m=!1!==r.strict,h=r.type||"application/json",f=r.verify||!1;if(!1!==f&&"function"!=typeof f)throw new TypeError("option verify must be function");var v="function"!=typeof h?function(e){return function(r){return Boolean(c(r,e))}}(h):h;function g(e){if(0===e.length)return{};if(m){var r=(t=e,l.exec(t)[1]);if("{"!==r&&"["!==r)throw s("strict violation"),function(e,r){var t=e.indexOf(r),n=e.substring(0,t)+"#";try{throw JSON.parse(n),new SyntaxError("strict violation")}catch(e){return u(e,{message:e.message.replace("#",r),stack:e.stack})}}(e,r)}var t;try{return s("parse json"),JSON.parse(e,d)}catch(e){throw u(e,{message:e.message,stack:e.stack})}}return function(e,r,n){if(e._body)return s("body already parsed"),void n();if(e.body=e.body||{},!c.hasBody(e))return s("skip empty body"),void n();if(s("content-type %j",e.headers["content-type"]),!v(e))return s("skip parsing"),void n();var l=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-"!==l.substr(0,4))return s("invalid charset"),void n(o(415,'unsupported charset "'+l.toUpperCase()+'"',{charset:l,type:"charset.unsupported"}));i(e,r,n,g,s,{encoding:l,inflate:p,limit:t,verify:f})}};var l=/^[\x20\x09\x0a\x0d]*(.)/;function u(e,r){for(var t=Object.getOwnPropertyNames(e),n=0;n<t.length;n++){var a=t[n];"stack"!==a&&"message"!==a&&delete e[a]}return e.stack=r.stack.replace(e.message,r.message),e.message=r.message,e}},function(module,exports,__webpack_require__){
/*!
 * depd
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
var callSiteToString=__webpack_require__(34).callSiteToString,eventListenerCount=__webpack_require__(34).eventListenerCount,relative=__webpack_require__(5).relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,r){for(var t=e.split(/[ ,]+/),n=String(r).toLowerCase(),a=0;a<t.length;a++){var o=t[a];if(o&&("*"===o||o.toLowerCase()===n))return!0}return!1}function convertDataDescriptorToAccessor(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r),a=n.value;return n.get=function(){return a},n.writable&&(n.set=function(e){return a=e}),delete n.value,delete n.writable,Object.defineProperty(e,r,n),n}function createArgumentsString(e){for(var r="",t=0;t<e;t++)r+=", arg"+t;return r.substr(2)}function createStackString(e){var r=this.name+": "+this.namespace;this.message&&(r+=" deprecated "+this.message);for(var t=0;t<e.length;t++)r+="\n    at "+callSiteToString(e[t]);return r}function depd(e){if(!e)throw new TypeError("argument namespace is required");var r=callSiteLocation(getStack()[1])[0];function t(e){log.call(t,e)}return t._file=r,t._ignored=isignored(e),t._namespace=e,t._traced=istraced(e),t._warned=Object.create(null),t.function=wrapfunction,t.property=wrapproperty,t}function isignored(e){return!!process.noDeprecation||containsNamespace(process.env.NO_DEPRECATION||"",e)}function istraced(e){return!!process.traceDeprecation||containsNamespace(process.env.TRACE_DEPRECATION||"",e)}function log(e,r){var t=0!==eventListenerCount(process,"deprecation");if(t||!this._ignored){var n,a,o,s,i=0,c=!1,l=getStack(),u=this._file;for(r?(s=r,(o=callSiteLocation(l[1])).name=s.name,u=o[0]):o=s=callSiteLocation(l[i=2]);i<l.length;i++)if((a=(n=callSiteLocation(l[i]))[0])===u)c=!0;else if(a===this._file)u=this._file;else if(c)break;var p=n?s.join(":")+"__"+n.join(":"):void 0;if(!(void 0!==p&&p in this._warned)){this._warned[p]=!0;var d=e;if(d||(d=o!==s&&o.name?defaultMessage(o):defaultMessage(s)),t){var m=DeprecationError(this._namespace,d,l.slice(i));process.emit("deprecation",m)}else{var h=(process.stderr.isTTY?formatColor:formatPlain).call(this,d,n,l.slice(i));process.stderr.write(h+"\n","utf8")}}}}function callSiteLocation(e){var r=e.getFileName()||"<anonymous>",t=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(r=e.getEvalOrigin()+", "+r);var a=[r,t,n];return a.callSite=e,a.name=e.getFunctionName(),a}function defaultMessage(e){var r=e.callSite,t=e.name;t||(t="<anonymous@"+formatLocation(e)+">");var n=r.getThis(),a=n&&r.getTypeName();return"Object"===a&&(a=void 0),"Function"===a&&(a=n.name||a),a&&r.getMethodName()?a+"."+t:t}function formatPlain(e,r,t){var n=(new Date).toUTCString()+" "+this._namespace+" deprecated "+e;if(this._traced){for(var a=0;a<t.length;a++)n+="\n    at "+callSiteToString(t[a]);return n}return r&&(n+=" at "+formatLocation(r)),n}function formatColor(e,r,t){var n="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var a=0;a<t.length;a++)n+="\n    [36mat "+callSiteToString(t[a])+"[39m";return n}return r&&(n+=" [36m"+formatLocation(r)+"[39m"),n}function formatLocation(e){return relative(basePath,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,r={},t=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(r);var n=r.stack.slice(1);return Error.prepareStackTrace=t,Error.stackTraceLimit=e,n}function prepareObjectStackTrace(e,r){return r}function wrapfunction(fn,message){if("function"!=typeof fn)throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+') {\n"use strict"\nlog.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n})');return deprecatedfn}function wrapproperty(e,r,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,r);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var a=this,o=callSiteLocation(getStack()[1]);o.name=r,"value"in n&&(n=convertDataDescriptorToAccessor(e,r,t));var s=n.get,i=n.set;"function"==typeof s&&(n.get=function(){return log.call(a,t,o),s.apply(this,arguments)}),"function"==typeof i&&(n.set=function(){return log.call(a,t,o),i.apply(this,arguments)}),Object.defineProperty(e,r,n)}function DeprecationError(e,r,t){var n,a=new Error;return Object.defineProperty(a,"constructor",{value:DeprecationError}),Object.defineProperty(a,"message",{configurable:!0,enumerable:!1,value:r,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(a,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(a,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==n?n:n=createStackString.call(this,t)},set:function(e){n=e}}),a}},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){var r=!0,t=function(e){var r,t="";e.isNative()?t="native":e.isEval()?(r=e.getScriptNameOrSourceURL())||(t=e.getEvalOrigin()):r=e.getFileName();if(r){t+=r;var n=e.getLineNumber();if(null!=n){t+=":"+n;var a=e.getColumnNumber();a&&(t+=":"+a)}}return t||"unknown source"}(e),n=e.getFunctionName(),a=e.isConstructor(),o=!(e.isToplevel()||a),s="";if(o){var i=e.getMethodName(),c=(l=e.receiver).constructor&&l.constructor.name||null;n?(c&&0!==n.indexOf(c)&&(s+=c+"."),s+=n,i&&n.lastIndexOf("."+i)!==n.length-i.length-1&&(s+=" [as "+i+"]")):s+=c+"."+(i||"<anonymous>")}else a?s+="new "+(n||"<anonymous>"):n?s+=n:(r=!1,s+=t);var l;r&&(s+=" ("+t+")");return s}},function(e,r,t){"use strict";
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,r){return e.listeners(r).length}},function(e,r){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,r){return e.__proto__=r,e}:function(e,r){for(var t in r)e.hasOwnProperty(t)||(e[t]=r[t]);return e})},function(e,r,t){"use strict";
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(79);function a(e){if("number"==typeof e){if(!a[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var r=parseInt(e,10);if(!isNaN(r)){if(!a[r])throw new Error("invalid status code: "+r);return r}if(!(r=a[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return r}e.exports=a,a.STATUS_CODES=n,a.codes=function(e,r){var t=[];return Object.keys(r).forEach((function(n){var a=r[n],o=Number(n);e[o]=a,e[a]=o,e[a.toLowerCase()]=o,t.push(o)})),t}(a,n),a.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},a.empty={204:!0,205:!0,304:!0},a.retry={502:!0,503:!0,504:!0}},function(e){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,r,t){try{var n=t(35);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(r){e.exports=t(81)}},function(e,r){"function"==typeof Object.create?e.exports=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,r){e.super_=r;var t=function(){};t.prototype=r.prototype,e.prototype=new t,e.prototype.constructor=e}},function(e,r,t){function n(){var e;try{e=r.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(r=e.exports=t(36)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(o=a))})),e.splice(o,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=n,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(n())},function(e,r){var t=1e3,n=60*t,a=60*n,o=24*a,s=365.25*o;function i(e,r,t){if(!(e<r))return e<1.5*r?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}e.exports=function(e,r){r=r||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!r)return;var i=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*s;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*a;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===l&&!1===isNaN(e))return r.long?i(c=e,o,"day")||i(c,a,"hour")||i(c,n,"minute")||i(c,t,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,r,t){var n=t(85),a=t(35);(r=e.exports=t(36)).init=function(e){e.inspectOpts={};for(var t=Object.keys(r.inspectOpts),n=0;n<t.length;n++)e.inspectOpts[t[n]]=r.inspectOpts[t[n]]},r.log=function(){return s.write(a.format.apply(a,arguments)+"\n")},r.formatArgs=function(e){var t=this.namespace;if(this.useColors){var n=this.color,a="  [3"+n+";1m"+t+" [0m";e[0]=a+e[0].split("\n").join("\n"+a),e.push("[3"+n+"m+"+r.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+t+" "+e[0]},r.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},r.load=i,r.useColors=function(){return"colors"in r.inspectOpts?Boolean(r.inspectOpts.colors):n.isatty(o)},r.colors=[6,2,3,4,5,1],r.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,r){var t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,r){return r.toUpperCase()})),n=process.env[r];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[t]=n,e}),{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&a.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===o?process.stdout:2===o?process.stderr:function(e){var r;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(r=new n.WriteStream(e))._type="tty",r._handle&&r._handle.unref&&r._handle.unref();break;case"FILE":var a=t(8);(r=new a.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var o=t(86);(r=new o.Socket({fd:e,readable:!1,writable:!0})).readable=!1,r.read=null,r._type="pipe",r._handle&&r._handle.unref&&r._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return r.fd=e,r._isStdio=!0,r}(o);function i(){return process.env.DEBUG}r.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},r.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)},r.enable(i())},function(e,r){e.exports=require("tty")},function(e,r){e.exports=require("net")},function(e,r,t){"use strict";
/*!
 * raw-body
 * Copyright(c) 2013-2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(13),a=t(20),o=t(37),s=t(106);e.exports=function(e,r,t){var a=t,o=r||{};!0!==r&&"string"!=typeof r||(o={encoding:r});"function"==typeof r&&(a=r,o={});if(void 0!==a&&"function"!=typeof a)throw new TypeError("argument callback must be a function");if(!a&&!global.Promise)throw new TypeError("argument callback is required");var s=!0!==o.encoding?o.encoding:"utf-8",i=n.parse(o.limit),l=null==o.length||isNaN(o.length)?null:parseInt(o.length,10);if(a)return c(e,s,l,i,a);return new Promise((function(r,t){c(e,s,l,i,(function(e,n){if(e)return t(e);r(n)}))}))};var i=/^Encoding not recognized: /;function c(e,r,t,n,c){var l=!1,u=!0;if(null!==n&&null!==t&&t>n)return f(a(413,"request entity too large",{expected:t,length:t,limit:n,type:"entity.too.large"}));var p=e._readableState;if(e._decoder||p&&(p.encoding||p.decoder))return f(a(500,"stream encoding should not be set",{type:"stream.encoding.set"}));var d,m=0;try{d=function(e){if(!e)return null;try{return o.getDecoder(e)}catch(r){if(!i.test(r.message))throw r;throw a(415,"specified encoding unsupported",{encoding:e,type:"encoding.unsupported"})}}(r)}catch(e){return f(e)}var h=d?"":[];function f(){for(var r=new Array(arguments.length),t=0;t<r.length;t++)r[t]=arguments[t];function n(){b(),r[0]&&function(e){s(e),"function"==typeof e.pause&&e.pause()}(e),c.apply(null,r)}l=!0,u?process.nextTick(n):n()}function v(){l||f(a(400,"request aborted",{code:"ECONNABORTED",expected:t,length:t,received:m,type:"request.aborted"}))}function g(e){l||(m+=e.length,null!==n&&m>n?f(a(413,"request entity too large",{limit:n,received:m,type:"entity.too.large"})):d?h+=d.write(e):h.push(e))}function x(e){if(!l){if(e)return f(e);if(null!==t&&m!==t)f(a(400,"request size did not match content length",{expected:t,length:t,received:m,type:"request.size.invalid"}));else f(null,d?h+(d.end()||""):Buffer.concat(h))}}function b(){h=null,e.removeListener("aborted",v),e.removeListener("data",g),e.removeListener("end",x),e.removeListener("error",x),e.removeListener("close",b)}e.on("aborted",v),e.on("close",b),e.on("data",g),e.on("end",x),e.on("error",x),u=!1}},function(e,r,t){"use strict";function n(e,r){this.encoder=e,this.addBOM=!0}function a(e,r){this.decoder=e,this.pass=!1,this.options=r||{}}r.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},r.StripBOM=a,a.prototype.write=function(e){var r=this.decoder.write(e);return this.pass||!r?r:("\ufeff"===r[0]&&(r=r.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,r)},a.prototype.end=function(){return this.decoder.end()}},function(e,r,t){"use strict";for(var n=[t(90),t(92),t(93),t(94),t(95),t(96),t(97),t(98)],a=0;a<n.length;a++){e=n[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}},function(e,r,t){"use strict";var n=t(11).Buffer;function a(e,r){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=l,""!==n.from("eda0bdedb2a9","hex").toString()&&(this.decoder=u,this.defaultCharUnicode=r.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:a},a.prototype.encoder=i,a.prototype.decoder=s;var o=t(91).StringDecoder;function s(e,r){o.call(this,r.enc)}function i(e,r){this.enc=r.enc}function c(e,r){this.prevStr=""}function l(e,r){}function u(e,r){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=r.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype=o.prototype,i.prototype.write=function(e){return n.from(e,this.enc)},i.prototype.end=function(){},c.prototype.write=function(e){var r=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(r),e=e.slice(0,r),n.from(e,"base64")},c.prototype.end=function(){return n.from(this.prevStr,"base64")},l.prototype.write=function(e){for(var r=n.alloc(3*e.length),t=0,a=0;a<e.length;a++){var o=e.charCodeAt(a);o<128?r[t++]=o:o<2048?(r[t++]=192+(o>>>6),r[t++]=128+(63&o)):(r[t++]=224+(o>>>12),r[t++]=128+(o>>>6&63),r[t++]=128+(63&o))}return r.slice(0,t)},l.prototype.end=function(){},u.prototype.write=function(e){for(var r=this.acc,t=this.contBytes,n=this.accBytes,a="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(t>0&&(a+=this.defaultCharUnicode,t=0),s<128?a+=String.fromCharCode(s):s<224?(r=31&s,t=1,n=1):s<240?(r=15&s,t=2,n=1):a+=this.defaultCharUnicode):t>0?(r=r<<6|63&s,n++,0===--t&&(a+=2===n&&r<128&&r>0?this.defaultCharUnicode:3===n&&r<2048?this.defaultCharUnicode:String.fromCharCode(r))):a+=this.defaultCharUnicode}return this.acc=r,this.contBytes=t,this.accBytes=n,a},u.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,r){e.exports=require("string_decoder")},function(e,r,t){"use strict";var n=t(11).Buffer;function a(){}function o(){}function s(){this.overflowByte=-1}function i(e,r){this.iconv=r}function c(e,r){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=r.iconv.getEncoder("utf-16le",e)}function l(e,r){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=r.iconv}function u(e,r){var t=r||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])t="utf-16be";else if(255==e[0]&&254==e[1])t="utf-16le";else{for(var n=0,a=0,o=Math.min(e.length-e.length%2,64),s=0;s<o;s+=2)0===e[s]&&0!==e[s+1]&&a++,0!==e[s]&&0===e[s+1]&&n++;a>n?t="utf-16be":a<n&&(t="utf-16le")}return t}r.utf16be=a,a.prototype.encoder=o,a.prototype.decoder=s,a.prototype.bomAware=!0,o.prototype.write=function(e){for(var r=n.from(e,"ucs2"),t=0;t<r.length;t+=2){var a=r[t];r[t]=r[t+1],r[t+1]=a}return r},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var r=n.alloc(e.length+1),t=0,a=0;for(-1!==this.overflowByte&&(r[0]=e[0],r[1]=this.overflowByte,t=1,a=2);t<e.length-1;t+=2,a+=2)r[a]=e[t+1],r[a+1]=e[t];return this.overflowByte=t==e.length-1?e[e.length-1]:-1,r.slice(0,a).toString("ucs2")},s.prototype.end=function(){},r.utf16=i,i.prototype.encoder=c,i.prototype.decoder=l,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},l.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var r=u(e=n.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(r,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},l.prototype.end=function(){if(!this.decoder){var e=n.concat(this.initialBytes),r=u(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(r,this.options);var t=this.decoder.write(e),a=this.decoder.end();return a?t+a:t}return this.decoder.end()}},function(e,r,t){"use strict";var n=t(11).Buffer;function a(e,r){this.iconv=r}r.utf7=a,r.unicode11utf7="utf7",a.prototype.encoder=s,a.prototype.decoder=i,a.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,r){this.iconv=r.iconv}function i(e,r){this.iconv=r.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return n.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,l=[],u=0;u<256;u++)l[u]=c.test(String.fromCharCode(u));var p="+".charCodeAt(0),d="-".charCodeAt(0),m="&".charCodeAt(0);function h(e,r){this.iconv=r}function f(e,r){this.iconv=r.iconv,this.inBase64=!1,this.base64Accum=n.alloc(6),this.base64AccumIdx=0}function v(e,r){this.iconv=r.iconv,this.inBase64=!1,this.base64Accum=""}i.prototype.write=function(e){for(var r="",t=0,a=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(a){if(!l[e[s]]){if(s==t&&e[s]==d)r+="+";else{var i=o+e.slice(t,s).toString();r+=this.iconv.decode(n.from(i,"base64"),"utf16-be")}e[s]!=d&&s--,t=s+1,a=!1,o=""}}else e[s]==p&&(r+=this.iconv.decode(e.slice(t,s),"ascii"),t=s+1,a=!0);if(a){var c=(i=o+e.slice(t).toString()).length-i.length%8;o=i.slice(c),i=i.slice(0,c),r+=this.iconv.decode(n.from(i,"base64"),"utf16-be")}else r+=this.iconv.decode(e.slice(t),"ascii");return this.inBase64=a,this.base64Accum=o,r},i.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(n.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},r.utf7imap=h,h.prototype.encoder=f,h.prototype.decoder=v,h.prototype.bomAware=!0,f.prototype.write=function(e){for(var r=this.inBase64,t=this.base64Accum,a=this.base64AccumIdx,o=n.alloc(5*e.length+10),s=0,i=0;i<e.length;i++){var c=e.charCodeAt(i);32<=c&&c<=126?(r&&(a>0&&(s+=o.write(t.slice(0,a).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),a=0),o[s++]=d,r=!1),r||(o[s++]=c,c===m&&(o[s++]=d))):(r||(o[s++]=m,r=!0),r&&(t[a++]=c>>8,t[a++]=255&c,a==t.length&&(s+=o.write(t.toString("base64").replace(/\//g,","),s),a=0)))}return this.inBase64=r,this.base64AccumIdx=a,o.slice(0,s)},f.prototype.end=function(){var e=n.alloc(10),r=0;return this.inBase64&&(this.base64AccumIdx>0&&(r+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),r),this.base64AccumIdx=0),e[r++]=d,this.inBase64=!1),e.slice(0,r)};var g=l.slice();g[",".charCodeAt(0)]=!0,v.prototype.write=function(e){for(var r="",t=0,a=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(a){if(!g[e[s]]){if(s==t&&e[s]==d)r+="&";else{var i=o+e.slice(t,s).toString().replace(/,/g,"/");r+=this.iconv.decode(n.from(i,"base64"),"utf16-be")}e[s]!=d&&s--,t=s+1,a=!1,o=""}}else e[s]==m&&(r+=this.iconv.decode(e.slice(t,s),"ascii"),t=s+1,a=!0);if(a){var c=(i=o+e.slice(t).toString().replace(/,/g,"/")).length-i.length%8;o=i.slice(c),i=i.slice(0,c),r+=this.iconv.decode(n.from(i,"base64"),"utf16-be")}else r+=this.iconv.decode(e.slice(t),"ascii");return this.inBase64=a,this.base64Accum=o,r},v.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(n.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,r,t){"use strict";var n=t(11).Buffer;function a(e,r){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var t="",a=0;a<128;a++)t+=String.fromCharCode(a);e.chars=t+e.chars}this.decodeBuf=new n.from(e.chars,"ucs2");var o=new n.alloc(65536,r.defaultCharSingleByte.charCodeAt(0));for(a=0;a<e.chars.length;a++)o[e.chars.charCodeAt(a)]=a;this.encodeBuf=o}function o(e,r){this.encodeBuf=r.encodeBuf}function s(e,r){this.decodeBuf=r.decodeBuf}r._sbcs=a,a.prototype.encoder=o,a.prototype.decoder=s,o.prototype.write=function(e){for(var r=n.alloc(e.length),t=0;t<e.length;t++)r[t]=this.encodeBuf[e.charCodeAt(t)];return r},o.prototype.end=function(){},s.prototype.write=function(e){for(var r=this.decodeBuf,t=n.alloc(2*e.length),a=0,o=0,s=0;s<e.length;s++)a=2*e[s],t[o=2*s]=r[a],t[o+1]=r[a+1];return t.toString("ucs2")},s.prototype.end=function(){}},function(e,r,t){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,r,t){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,r,t){"use strict";var n=t(11).Buffer;r._dbcs=l;for(var a=-1,o=-2,s=-1e3,i=new Array(256),c=0;c<256;c++)i[c]=a;function l(e,r){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var t=e.table();this.decodeTables=[],this.decodeTables[0]=i.slice(0),this.decodeTableSeq=[];for(var n=0;n<t.length;n++)this._addDecodeChunk(t[n]);this.defaultCharUnicode=r.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var c={};if(e.encodeSkipVals)for(n=0;n<e.encodeSkipVals.length;n++){var l=e.encodeSkipVals[n];if("number"==typeof l)c[l]=!0;else for(var u=l.from;u<=l.to;u++)c[u]=!0}if(this._fillEncodeTable(0,0,c),e.encodeAdd)for(var p in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,p)&&this._setEncodeChar(p.charCodeAt(0),e.encodeAdd[p]);if(this.defCharSB=this.encodeTable[0][r.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===a&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===a&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var d=this.decodeTables.length,m=this.decodeTables[d]=i.slice(0),h=this.decodeTables.length,f=this.decodeTables[h]=i.slice(0);for(n=129;n<=254;n++){var v=s-this.decodeTables[0][n],g=this.decodeTables[v];for(u=48;u<=57;u++)g[u]=s-d}for(n=129;n<=254;n++)m[n]=s-h;for(n=48;n<=57;n++)f[n]=o}}function u(e,r){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=r.encodeTable,this.encodeTableSeq=r.encodeTableSeq,this.defaultCharSingleByte=r.defCharSB,this.gb18030=r.gb18030}function p(e,r){this.nodeIdx=0,this.prevBuf=n.alloc(0),this.decodeTables=r.decodeTables,this.decodeTableSeq=r.decodeTableSeq,this.defaultCharUnicode=r.defaultCharUnicode,this.gb18030=r.gb18030}function d(e,r){if(e[0]>r)return-1;for(var t=0,n=e.length;t<n-1;){var a=t+Math.floor((n-t+1)/2);e[a]<=r?t=a:n=a}return t}l.prototype.encoder=u,l.prototype.decoder=p,l.prototype._getDecodeTrieNode=function(e){for(var r=[];e>0;e>>=8)r.push(255&e);0==r.length&&r.push(0);for(var t=this.decodeTables[0],n=r.length-1;n>0;n--){var o=t[r[n]];if(o==a)t[r[n]]=s-this.decodeTables.length,this.decodeTables.push(t=i.slice(0));else{if(!(o<=s))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));t=this.decodeTables[s-o]}}return t},l.prototype._addDecodeChunk=function(e){var r=parseInt(e[0],16),t=this._getDecodeTrieNode(r);r&=255;for(var n=1;n<e.length;n++){var a=e[n];if("string"==typeof a)for(var o=0;o<a.length;){var s=a.charCodeAt(o++);if(55296<=s&&s<56320){var i=a.charCodeAt(o++);if(!(56320<=i&&i<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);t[r++]=65536+1024*(s-55296)+(i-56320)}else if(4080<s&&s<=4095){for(var c=4095-s+2,l=[],u=0;u<c;u++)l.push(a.charCodeAt(o++));t[r++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(l)}else t[r++]=s}else{if("number"!=typeof a)throw new Error("Incorrect type '"+typeof a+"' given in "+this.encodingName+" at chunk "+e[0]);var p=t[r-1]+1;for(o=0;o<a;o++)t[r++]=p++}}if(r>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+r)},l.prototype._getEncodeBucket=function(e){var r=e>>8;return void 0===this.encodeTable[r]&&(this.encodeTable[r]=i.slice(0)),this.encodeTable[r]},l.prototype._setEncodeChar=function(e,r){var t=this._getEncodeBucket(e),n=255&e;t[n]<=-10?this.encodeTableSeq[-10-t[n]][-1]=r:t[n]==a&&(t[n]=r)},l.prototype._setEncodeSequence=function(e,r){var t,n=e[0],o=this._getEncodeBucket(n),s=255&n;o[s]<=-10?t=this.encodeTableSeq[-10-o[s]]:(t={},o[s]!==a&&(t[-1]=o[s]),o[s]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(t));for(var i=1;i<e.length-1;i++){var c=t[n];"object"==typeof c?t=c:(t=t[n]={},void 0!==c&&(t[-1]=c))}t[n=e[e.length-1]]=r},l.prototype._fillEncodeTable=function(e,r,t){for(var n=this.decodeTables[e],a=0;a<256;a++){var o=n[a],i=r+a;t[i]||(o>=0?this._setEncodeChar(o,i):o<=s?this._fillEncodeTable(s-o,i<<8,t):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],i))}},u.prototype.write=function(e){for(var r=n.alloc(e.length*(this.gb18030?4:3)),t=this.leadSurrogate,o=this.seqObj,s=-1,i=0,c=0;;){if(-1===s){if(i==e.length)break;var l=e.charCodeAt(i++)}else{l=s;s=-1}if(55296<=l&&l<57344)if(l<56320){if(-1===t){t=l;continue}t=l,l=a}else-1!==t?(l=65536+1024*(t-55296)+(l-56320),t=-1):l=a;else-1!==t&&(s=l,l=a,t=-1);var u=a;if(void 0!==o&&l!=a){var p=o[l];if("object"==typeof p){o=p;continue}"number"==typeof p?u=p:null==p&&void 0!==(p=o[-1])&&(u=p,s=l),o=void 0}else if(l>=0){var m=this.encodeTable[l>>8];if(void 0!==m&&(u=m[255&l]),u<=-10){o=this.encodeTableSeq[-10-u];continue}if(u==a&&this.gb18030){var h=d(this.gb18030.uChars,l);if(-1!=h){u=this.gb18030.gbChars[h]+(l-this.gb18030.uChars[h]);r[c++]=129+Math.floor(u/12600),u%=12600,r[c++]=48+Math.floor(u/1260),u%=1260,r[c++]=129+Math.floor(u/10),u%=10,r[c++]=48+u;continue}}}u===a&&(u=this.defaultCharSingleByte),u<256?r[c++]=u:u<65536?(r[c++]=u>>8,r[c++]=255&u):(r[c++]=u>>16,r[c++]=u>>8&255,r[c++]=255&u)}return this.seqObj=o,this.leadSurrogate=t,r.slice(0,c)},u.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=n.alloc(10),r=0;if(this.seqObj){var t=this.seqObj[-1];void 0!==t&&(t<256?e[r++]=t:(e[r++]=t>>8,e[r++]=255&t)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[r++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,r)}},u.prototype.findIdx=d,p.prototype.write=function(e){var r=n.alloc(2*e.length),t=this.nodeIdx,i=this.prevBuf,c=this.prevBuf.length,l=-this.prevBuf.length;c>0&&(i=n.concat([i,e.slice(0,10)]));for(var u=0,p=0;u<e.length;u++){var m,h=u>=0?e[u]:i[u+c];if((m=this.decodeTables[t][h])>=0);else if(m===a)u=l,m=this.defaultCharUnicode.charCodeAt(0);else if(m===o){var f=l>=0?e.slice(l,u+1):i.slice(l+c,u+1+c),v=12600*(f[0]-129)+1260*(f[1]-48)+10*(f[2]-129)+(f[3]-48),g=d(this.gb18030.gbChars,v);m=this.gb18030.uChars[g]+v-this.gb18030.gbChars[g]}else{if(m<=s){t=s-m;continue}if(!(m<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+m+" at "+t+"/"+h);for(var x=this.decodeTableSeq[-10-m],b=0;b<x.length-1;b++)m=x[b],r[p++]=255&m,r[p++]=m>>8;m=x[x.length-1]}if(m>65535){m-=65536;var y=55296+Math.floor(m/1024);r[p++]=255&y,r[p++]=y>>8,m=56320+m%1024}r[p++]=255&m,r[p++]=m>>8,t=0,l=u+1}return this.nodeIdx=t,this.prevBuf=l>=0?e.slice(l):i.slice(l+c),r.slice(0,p).toString("ucs2")},p.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var r=this.prevBuf.slice(1);this.prevBuf=n.alloc(0),this.nodeIdx=0,r.length>0&&(e+=this.write(r))}return this.nodeIdx=0,e}},function(e,r,t){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return t(99)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return t(100)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return t(26)}},gbk:{type:"_dbcs",table:function(){return t(26).concat(t(38))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return t(26).concat(t(38))},gb18030:function(){return t(101)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return t(102)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return t(39)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return t(39).concat(t(103))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},function(e){e.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},function(e){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e){e.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},function(e){e.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},function(e,r,t){"use strict";var n=t(14).Buffer,a=t(27).Transform;function o(e,r){this.conv=e,(r=r||{}).decodeStrings=!1,a.call(this,r)}function s(e,r){this.conv=e,(r=r||{}).encoding=this.encoding="utf8",a.call(this,r)}e.exports=function(e){e.encodeStream=function(r,t){return new o(e.getEncoder(r,t),t)},e.decodeStream=function(r,t){return new s(e.getDecoder(r,t),t)},e.supportsStreams=!0,e.IconvLiteEncoderStream=o,e.IconvLiteDecoderStream=s,e._collect=s.prototype.collect},o.prototype=Object.create(a.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,r,t){if("string"!=typeof e)return t(new Error("Iconv encoding stream needs strings as its input."));try{var n=this.conv.write(e);n&&n.length&&this.push(n),t()}catch(e){t(e)}},o.prototype._flush=function(e){try{var r=this.conv.end();r&&r.length&&this.push(r),e()}catch(r){e(r)}},o.prototype.collect=function(e){var r=[];return this.on("error",e),this.on("data",(function(e){r.push(e)})),this.on("end",(function(){e(null,n.concat(r))})),this},s.prototype=Object.create(a.prototype,{constructor:{value:s}}),s.prototype._transform=function(e,r,t){if(!n.isBuffer(e))return t(new Error("Iconv decoding stream needs buffers as its input."));try{var a=this.conv.write(e);a&&a.length&&this.push(a,this.encoding),t()}catch(e){t(e)}},s.prototype._flush=function(e){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),e()}catch(r){e(r)}},s.prototype.collect=function(e){var r="";return this.on("error",e),this.on("data",(function(e){r+=e})),this.on("end",(function(){e(null,r)})),this}},function(e,r,t){"use strict";var n=t(14).Buffer;e.exports=function(e){var r=void 0;e.supportsNodeEncodingsExtension=!(n.from||new n(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!r){if(r={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var a={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};n.isNativeEncoding=function(e){return e&&a[e.toLowerCase()]};var o=t(14).SlowBuffer;if(r.SlowBufferToString=o.prototype.toString,o.prototype.toString=function(t,a,o){return t=String(t||"utf8").toLowerCase(),n.isNativeEncoding(t)?r.SlowBufferToString.call(this,t,a,o):(void 0===a&&(a=0),void 0===o&&(o=this.length),e.decode(this.slice(a,o),t))},r.SlowBufferWrite=o.prototype.write,o.prototype.write=function(t,a,o,s){if(isFinite(a))isFinite(o)||(s=o,o=void 0);else{var i=s;s=a,a=o,o=i}a=+a||0;var c=this.length-a;if(o?(o=+o)>c&&(o=c):o=c,s=String(s||"utf8").toLowerCase(),n.isNativeEncoding(s))return r.SlowBufferWrite.call(this,t,a,o,s);if(t.length>0&&(o<0||a<0))throw new RangeError("attempt to write beyond buffer bounds");var l=e.encode(t,s);return l.length<o&&(o=l.length),l.copy(this,a,0,o),o},r.BufferIsEncoding=n.isEncoding,n.isEncoding=function(r){return n.isNativeEncoding(r)||e.encodingExists(r)},r.BufferByteLength=n.byteLength,n.byteLength=o.byteLength=function(t,a){return a=String(a||"utf8").toLowerCase(),n.isNativeEncoding(a)?r.BufferByteLength.call(this,t,a):e.encode(t,a).length},r.BufferToString=n.prototype.toString,n.prototype.toString=function(t,a,o){return t=String(t||"utf8").toLowerCase(),n.isNativeEncoding(t)?r.BufferToString.call(this,t,a,o):(void 0===a&&(a=0),void 0===o&&(o=this.length),e.decode(this.slice(a,o),t))},r.BufferWrite=n.prototype.write,n.prototype.write=function(t,a,o,s){var i=a,c=o,l=s;if(isFinite(a))isFinite(o)||(s=o,o=void 0);else{var u=s;s=a,a=o,o=u}if(s=String(s||"utf8").toLowerCase(),n.isNativeEncoding(s))return r.BufferWrite.call(this,t,i,c,l);a=+a||0;var p=this.length-a;if(o?(o=+o)>p&&(o=p):o=p,t.length>0&&(o<0||a<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(t,s);return d.length<o&&(o=d.length),d.copy(this,a,0,o),o},e.supportsStreams){var s=t(27).Readable;r.ReadableSetEncoding=s.prototype.setEncoding,s.prototype.setEncoding=function(r,t){this._readableState.decoder=e.getDecoder(r,t),this._readableState.encoding=r},s.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!r)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete n.isNativeEncoding;var a=t(14).SlowBuffer;if(a.prototype.toString=r.SlowBufferToString,a.prototype.write=r.SlowBufferWrite,n.isEncoding=r.BufferIsEncoding,n.byteLength=r.BufferByteLength,n.prototype.toString=r.BufferToString,n.prototype.write=r.BufferWrite,e.supportsStreams){var o=t(27).Readable;o.prototype.setEncoding=r.ReadableSetEncoding,delete o.prototype.collect}r=void 0}}}},function(e,r,t){"use strict";
/*!
 * unpipe
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){if(!e)throw new TypeError("argument stream is required");if("function"==typeof e.unpipe)return void e.unpipe();if(!function(e){for(var r=e.listeners("data"),t=0;t<r.length;t++)if("ondata"===r[t].name)return!0;return!1}(e))return;for(var r,t=e.listeners("close"),n=0;n<t.length;n++)"cleanup"!==(r=t[n]).name&&"onclose"!==r.name||r.call(e)}},function(e,r,t){"use strict";
/*!
 * on-finished
 * Copyright(c) 2013 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,r){if(!1!==o(e))return a(r,null,e),e;return function(e,r){var t=e.__onFinished;t&&t.queue||(t=e.__onFinished=function(e){function r(t){if(e.__onFinished===r&&(e.__onFinished=null),r.queue){var n=r.queue;r.queue=null;for(var a=0;a<n.length;a++)n[a](t,e)}}return r.queue=[],r}(e),function(e,r){var t,a,o=!1;function s(e){t.cancel(),a.cancel(),o=!0,r(e)}function i(r){e.removeListener("socket",i),o||t===a&&(a=n([[r,"error","close"]],s))}if(t=a=n([[e,"end","finish"]],s),e.socket)return void i(e.socket);e.on("socket",i),void 0===e.socket&&function(e,r){var t=e.assignSocket;if("function"!=typeof t)return;e.assignSocket=function(e){t.call(this,e),r(e)}}(e,i)}(e,t));t.queue.push(r)}(e,r),e},e.exports.isFinished=o;var n=t(108),a="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function o(e){var r=e.socket;return"boolean"==typeof e.finished?Boolean(e.finished||r&&!r.writable):"boolean"==typeof e.complete?Boolean(e.upgrade||!r||!r.readable||e.complete&&!e.readable):void 0}},function(e,r,t){"use strict";
/*!
 * ee-first
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */function n(e,r){return function(t){for(var n=new Array(arguments.length),a=this,o="error"===e?t:null,s=0;s<n.length;s++)n[s]=arguments[s];r(o,a,e,n)}}e.exports=function(e,r){if(!Array.isArray(e))throw new TypeError("arg must be an array of [ee, events...] arrays");for(var t=[],a=0;a<e.length;a++){var o=e[a];if(!Array.isArray(o)||o.length<2)throw new TypeError("each array member must be [ee, events...]");for(var s=o[0],i=1;i<o.length;i++){var c=o[i],l=n(c,u);s.on(c,l),t.push({ee:s,event:c,fn:l})}}function u(){p(),r.apply(null,arguments)}function p(){for(var e,r=0;r<t.length;r++)(e=t[r]).ee.removeListener(e.event,e.fn)}function d(e){r=e}return d.cancel=p,d}},function(e,r){e.exports=require("zlib")},function(e,r){
/*!
 * media-typer
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
var t=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,n=/^[\u0020-\u007e\u0080-\u00ff]+$/,a=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,o=/\\([\u0000-\u007f])/g,s=/([\\"])/g,i=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,c=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,l=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function u(e){var r=String(e);if(a.test(r))return r;if(r.length>0&&!n.test(r))throw new TypeError("invalid parameter value");return'"'+r.replace(s,"\\$1")+'"'}r.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var r=e.parameters,t=e.subtype,n=e.suffix,o=e.type;if(!o||!c.test(o))throw new TypeError("invalid type");if(!t||!i.test(t))throw new TypeError("invalid subtype");var s=o+"/"+t;if(n){if(!c.test(n))throw new TypeError("invalid suffix");s+="+"+n}if(r&&"object"==typeof r)for(var l,p=Object.keys(r).sort(),d=0;d<p.length;d++){if(l=p[d],!a.test(l))throw new TypeError("invalid parameter name");s+="; "+l+"="+u(r[l])}return s},r.parse=function(e){if(!e)throw new TypeError("argument string is required");"object"==typeof e&&(e=function(e){if("function"==typeof e.getHeader)return e.getHeader("content-type");if("object"==typeof e.headers)return e.headers&&e.headers["content-type"]}(e));if("string"!=typeof e)throw new TypeError("argument string is required to be a string");var r,n,a,s=e.indexOf(";"),i=function(e){var r=l.exec(e.toLowerCase());if(!r)throw new TypeError("invalid media type");var t,n=r[1],a=r[2],o=a.lastIndexOf("+");-1!==o&&(t=a.substr(o+1),a=a.substr(0,o));return{type:n,subtype:a,suffix:t}}(-1!==s?e.substr(0,s):e),c={};t.lastIndex=s;for(;n=t.exec(e);){if(n.index!==s)throw new TypeError("invalid parameter format");s+=n[0].length,r=n[1].toLowerCase(),'"'===(a=n[2])[0]&&(a=a.substr(1,a.length-2).replace(o,"$1")),c[r]=a}if(-1!==s&&s!==e.length)throw new TypeError("invalid parameter format");return i.parameters=c,i}},function(e,r,t){"use strict";
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n,a,o,s=t(112),i=t(5).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var r=c.exec(e),t=r&&s[r[1].toLowerCase()];return t&&t.charset?t.charset:!(!r||!l.test(r[1]))&&"UTF-8"}r.charset=u,r.charsets={lookup:u},r.contentType=function(e){if(!e||"string"!=typeof e)return!1;var t=-1===e.indexOf("/")?r.lookup(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){var n=r.charset(t);n&&(t+="; charset="+n.toLowerCase())}return t},r.extension=function(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&r.extensions[t[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},r.extensions=Object.create(null),r.lookup=function(e){if(!e||"string"!=typeof e)return!1;var t=i("x."+e).toLowerCase().substr(1);if(!t)return!1;return r.types[t]||!1},r.types=Object.create(null),n=r.extensions,a=r.types,o=["nginx","apache",void 0,"iana"],Object.keys(s).forEach((function(e){var r=s[e],t=r.extensions;if(t&&t.length){n[e]=t;for(var i=0;i<t.length;i++){var c=t[i];if(a[c]){var l=o.indexOf(s[a[c]].source),u=o.indexOf(r.source);if("application/octet-stream"!==a[c]&&(l>u||l===u&&"application/"===a[c].substr(0,12)))continue}a[c]=e}}}))},function(e,r,t){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
e.exports=t(113)},function(e){e.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0},"application/atsc-held+xml":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["ecma","es"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0},"application/fhir+json":{source:"iana",compressible:!0},"application/fhir+xml":{source:"iana",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0},"application/mmt-usd+xml":{source:"iana",compressible:!0},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",compressible:!0},"application/msc-mixer+xml":{source:"iana",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",compressible:!0},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",compressible:!0},"application/pidf-diff+xml":{source:"iana",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0},"application/route-s-tsid+xml":{source:"iana",compressible:!0},"application/route-usd+xml":{source:"iana",compressible:!0},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana"},"application/ttml+xml":{source:"iana",compressible:!0},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0},"application/urc-targetdesc+xml":{source:"iana",compressible:!0},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["keynote"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",compressible:!0},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0},"application/xcap-caps+xml":{source:"iana",compressible:!0},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana"},"image/avcs":{source:"iana"},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:!1},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana"},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vp8":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(13),a=t(21)("body-parser:raw"),o=t(22),s=t(23);e.exports=function(e){var r=e||{},t=!1!==r.inflate,i="number"!=typeof r.limit?n.parse(r.limit||"100kb"):r.limit,c=r.type||"application/octet-stream",l=r.verify||!1;if(!1!==l&&"function"!=typeof l)throw new TypeError("option verify must be function");var u="function"!=typeof c?function(e){return function(r){return Boolean(s(r,e))}}(c):c;function p(e){return e}return function(e,r,n){return e._body?(a("body already parsed"),void n()):(e.body=e.body||{},s.hasBody(e)?(a("content-type %j",e.headers["content-type"]),u(e)?void o(e,r,n,p,a,{encoding:null,inflate:t,limit:i,verify:l}):(a("skip parsing"),void n())):(a("skip empty body"),void n()))}}},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(13),a=t(25),o=t(21)("body-parser:text"),s=t(22),i=t(23);e.exports=function(e){var r=e||{},t=r.defaultCharset||"utf-8",c=!1!==r.inflate,l="number"!=typeof r.limit?n.parse(r.limit||"100kb"):r.limit,u=r.type||"text/plain",p=r.verify||!1;if(!1!==p&&"function"!=typeof p)throw new TypeError("option verify must be function");var d="function"!=typeof u?function(e){return function(r){return Boolean(i(r,e))}}(u):u;function m(e){return e}return function(e,r,n){if(e._body)return o("body already parsed"),void n();if(e.body=e.body||{},!i.hasBody(e))return o("skip empty body"),void n();if(o("content-type %j",e.headers["content-type"]),!d(e))return o("skip parsing"),void n();var u=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||t;s(e,r,n,m,o,{encoding:u,inflate:c,limit:l,verify:p})}}},function(e,r,t){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=t(13),a=t(25),o=t(20),s=t(21)("body-parser:urlencoded"),i=t(31)("body-parser"),c=t(22),l=t(23);e.exports=function(e){var r=e||{};void 0===r.extended&&i("undefined extended: provide extended option");var t=!1!==r.extended,u=!1!==r.inflate,m="number"!=typeof r.limit?n.parse(r.limit||"100kb"):r.limit,h=r.type||"application/x-www-form-urlencoded",f=r.verify||!1;if(!1!==f&&"function"!=typeof f)throw new TypeError("option verify must be function");var v=t?function(e){var r=void 0!==e.parameterLimit?e.parameterLimit:1e3,t=d("qs");if(isNaN(r)||r<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(r)&&(r|=0);return function(e){var n=p(e,r);if(void 0===n)throw s("too many parameters"),o(413,"too many parameters",{type:"parameters.too.many"});var a=Math.max(100,n);return s("parse extended urlencoding"),t(e,{allowPrototypes:!0,arrayLimit:a,depth:1/0,parameterLimit:r})}}(r):function(e){var r=void 0!==e.parameterLimit?e.parameterLimit:1e3,t=d("querystring");if(isNaN(r)||r<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(r)&&(r|=0);return function(e){if(void 0===p(e,r))throw s("too many parameters"),o(413,"too many parameters",{type:"parameters.too.many"});return s("parse urlencoding"),t(e,void 0,void 0,{maxKeys:r})}}(r),g="function"!=typeof h?function(e){return function(r){return Boolean(l(r,e))}}(h):h;function x(e){return e.length?v(e):{}}return function(e,r,t){if(e._body)return s("body already parsed"),void t();if(e.body=e.body||{},!l.hasBody(e))return s("skip empty body"),void t();if(s("content-type %j",e.headers["content-type"]),!g(e))return s("skip parsing"),void t();var n=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-8"!==n)return s("invalid charset"),void t(o(415,'unsupported charset "'+n.toUpperCase()+'"',{charset:n,type:"charset.unsupported"}));c(e,r,t,x,s,{debug:s,encoding:n,inflate:u,limit:m,verify:f})}};var u=Object.create(null);function p(e,r){for(var t=0,n=0;-1!==(n=e.indexOf("&",n));)if(n++,++t===r)return;return t}function d(e){var r=u[e];if(void 0!==r)return r.parse;switch(e){case"qs":r=t(117);break;case"querystring":r=t(120)}return u[e]=r,r.parse}},function(e,r,t){"use strict";var n=t(118),a=t(119),o=t(41);e.exports={formats:o,parse:a,stringify:n}},function(e,r,t){"use strict";var n=t(40),a=t(41),o={brackets:function(e){return e+"[]"},indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,i={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(r,t,a,o,s,c,l,u,p,d,m,h){var f=r;if("function"==typeof l)f=l(t,f);else if(f instanceof Date)f=d(f);else if(null===f){if(o)return c&&!h?c(t,i.encoder):t;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return c?[m(h?t:c(t,i.encoder))+"="+m(c(f,i.encoder))]:[m(t)+"="+m(String(f))];var v,g=[];if(void 0===f)return g;if(Array.isArray(l))v=l;else{var x=Object.keys(f);v=u?x.sort(u):x}for(var b=0;b<v.length;++b){var y=v[b];s&&null===f[y]||(g=Array.isArray(f)?g.concat(e(f[y],a(t,y),a,o,s,c,l,u,p,d,m,h)):g.concat(e(f[y],t+(p?"."+y:"["+y+"]"),a,o,s,c,l,u,p,d,m,h)))}return g};e.exports=function(e,r){var t=e,s=r?n.assign({},r):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===s.delimiter?i.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:i.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:i.skipNulls,d="boolean"==typeof s.encode?s.encode:i.encode,m="function"==typeof s.encoder?s.encoder:i.encoder,h="function"==typeof s.sort?s.sort:null,f=void 0!==s.allowDots&&s.allowDots,v="function"==typeof s.serializeDate?s.serializeDate:i.serializeDate,g="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:i.encodeValuesOnly;if(void 0===s.format)s.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,s.format))throw new TypeError("Unknown format option provided.");var x,b,y=a.formatters[s.format];"function"==typeof s.filter?t=(b=s.filter)("",t):Array.isArray(s.filter)&&(x=b=s.filter);var R,w=[];if("object"!=typeof t||null===t)return"";R=s.arrayFormat in o?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var _=o[R];x||(x=Object.keys(t)),h&&x.sort(h);for(var k=0;k<x.length;++k){var C=x[k];p&&null===t[C]||(w=w.concat(c(t[C],C,_,u,p,d?m:null,b,h,f,v,y,g)))}var N=w.join(l),E=!0===s.addQueryPrefix?"?":"";return N.length>0?E+N:""}},function(e,r,t){"use strict";var n=t(40),a=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,r,t){if(e){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),i=s?n.slice(0,s.index):n,c=[];if(i){if(!t.plainObjects&&a.call(Object.prototype,i)&&!t.allowPrototypes)return;c.push(i)}for(var l=0;null!==(s=o.exec(n))&&l<t.depth;){if(l+=1,!t.plainObjects&&a.call(Object.prototype,s[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),function(e,r,t){for(var n=r,a=e.length-1;a>=0;--a){var o,s=e[a];if("[]"===s)o=(o=[]).concat(n);else{o=t.plainObjects?Object.create(null):{};var i="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(i,10);!isNaN(c)&&s!==i&&String(c)===i&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[])[c]=n:o[i]=n}n=o}return n}(c,r,t)}};e.exports=function(e,r){var t=r?n.assign({},r):{};if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(t.ignoreQueryPrefix=!0===t.ignoreQueryPrefix,t.delimiter="string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,t.depth="number"==typeof t.depth?t.depth:o.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.decoder="function"==typeof t.decoder?t.decoder:o.decoder,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:o.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,""===e||null==e)return t.plainObjects?Object.create(null):{};for(var i="string"==typeof e?function(e,r){for(var t={},n=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,i=n.split(r.delimiter,s),c=0;c<i.length;++c){var l,u,p=i[c],d=p.indexOf("]="),m=-1===d?p.indexOf("="):d+1;-1===m?(l=r.decoder(p,o.decoder),u=r.strictNullHandling?null:""):(l=r.decoder(p.slice(0,m),o.decoder),u=r.decoder(p.slice(m+1),o.decoder)),a.call(t,l)?t[l]=[].concat(t[l]).concat(u):t[l]=u}return t}(e,t):e,c=t.plainObjects?Object.create(null):{},l=Object.keys(i),u=0;u<l.length;++u){var p=l[u],d=s(p,i[p],t);c=n.merge(c,d,t)}return n.compact(c)}},function(e,r){e.exports=require("querystring")},function(e,r){e.exports=require("accesscontrol")},function(e,r){e.exports=require("winston")},function(e,r){e.exports=require("winston-daily-rotate-file")},function(e,r){e.exports=require("jssoup")},function(e,r){e.exports=require("xml2js")},function(e,r){e.exports=require("console-clear")},function(e,r){e.exports=require("os")},function(e,r){e.exports=require("https")},function(e,r){e.exports=require("crypto")},function(e,r){e.exports=require("http")},function(e,r){e.exports=require("helmet")},function(e,r){e.exports=require("tls")},function(e,r){e.exports=require("redis")},function(e,r){e.exports=require("cors")},function(e,r){e.exports=require("express-prom-bundle")},function(e,r,t){"use strict";(function(r,n){var a=t(8),o=t(5),s=t(30),i=process.cwd();n=(r=i+"/models")+"/index.js";var c,l=o.basename(n),u=t(15).production,p={};c=u.use_env_variable?new s(process.env[u.use_env_variable],u):new s(u.database,u.username,u.password,u),a.readdirSync(r).filter((function(e){return 0!==e.indexOf(".")&&e!==l&&".js"===e.slice(-3)})).forEach((function(e){var t=c.import(o.join(r,e));p[t.name]=t})),Object.keys(p).forEach((function(e){p[e].associate&&p[e].associate(p)})),p.sequelize=c,p.Sequelize=s,e.exports=p}).call(this,"/","/index.js")},function(e,r){e.exports=require("redis-server")}]);